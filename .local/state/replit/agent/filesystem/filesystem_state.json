{"file_contents":{"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","path":null,"size_bytes":1467,"size_tokens":null},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","path":null,"size_bytes":710,"size_tokens":null},"client/src/components/HeroSection.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Search, MapPin } from \"lucide-react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { LOCATION_OPTIONS } from \"@shared/barangays\";\nimport PiliBackground from \"@assets/Pili.jpeg\";\n\ninterface HeroSectionProps {\n  searchQuery: string;\n  setSearchQuery: (query: string) => void;\n  locationFilter: string;\n  setLocationFilter: (location: string) => void;\n}\n\n// Define the type for stats\ninterface Stats {\n  activeJobs: number;\n  employers: number;\n  hiredThisMonth: number;\n  jobSeekers: number;\n  totalJobs: number;\n  totalApplications: number;\n}\n\n// Function to fetch stats data\nconst fetchStats = async (): Promise<Stats> => {\n  const response = await fetch(\"/api/stats\");\n  if (!response.ok) {\n    throw new Error(\"Failed to fetch stats\");\n  }\n  return response.json();\n};\n\nexport default function HeroSection({\n  searchQuery,\n  setSearchQuery,\n  locationFilter,\n  setLocationFilter,\n}: HeroSectionProps) {\n  const { data: stats } = useQuery<Stats>({\n    queryKey: [\"/api/stats\"],\n    queryFn: fetchStats,\n  });\n\n  const handleSearch = () => {\n    // Scroll to jobs section\n    document.getElementById(\"jobs\")?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  return (\n    <section \n      className=\"text-white relative\"\n      style={{\n        backgroundImage: `linear-gradient(rgba(37, 99, 235, 0.7), rgba(29, 78, 216, 0.7)), url(${PiliBackground})`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat'\n      }}\n    >\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\n        <div className=\"text-center max-w-3xl mx-auto\">\n          <h2 className=\"text-4xl sm:text-5xl font-bold mb-6\">\n            Find Your Next Opportunity in{\" \"}\n            <span className=\"text-blue-200\">Pili</span>\n          </h2>\n          <p className=\"text-xl text-blue-100 mb-8\">\n            Connect with local employers and discover job opportunities right\n            here in Camarines Sur\n          </p>\n\n          {/* Main Search Bar */}\n          <div className=\"bg-white rounded-xl shadow-lg p-6 text-gray-900\">\n            <div className=\"flex flex-col md:flex-row gap-4\">\n              <div className=\"flex-1\">\n                <Label\n                  htmlFor=\"search\"\n                  className=\"block text-sm font-medium text-gray-700 mb-2\"\n                >\n                  What job are you looking for?\n                </Label>\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\n                  <Input\n                    id=\"search\"\n                    type=\"text\"\n                    placeholder=\"e.g. Teacher, Driver, Sales Assistant\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"pl-10\"\n                  />\n                </div>\n              </div>\n              <div className=\"md:w-64\">\n                <Label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Location\n                </Label>\n                <div className=\"relative\">\n                  <MapPin className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 z-10\" />\n                  <Select\n                    value={locationFilter}\n                    onValueChange={setLocationFilter}\n                  >\n                    <SelectTrigger className=\"pl-10\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {LOCATION_OPTIONS.map((location) => (\n                        <SelectItem key={location} value={location}>\n                          {location}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n              <Button\n                onClick={handleSearch}\n                className=\"bg-primary hover:bg-primary-600 md:self-end\"\n              >\n                <Search className=\"mr-2 h-4 w-4\" />\n                Search Jobs\n              </Button>\n            </div>\n          </div>\n\n          {/* Quick Stats */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6 mt-12 text-center\">\n            <div>\n              <div className=\"text-3xl font-bold\">{stats?.activeJobs || 0}</div>\n              <div className=\"text-blue-200\">Active Jobs</div>\n            </div>\n            <div>\n              <div className=\"text-3xl font-bold\">{stats?.employers || 0}</div>\n              <div className=\"text-blue-200\">Local Employers</div>\n            </div>\n            <div>\n              <div className=\"text-3xl font-bold\">\n                {stats?.hiredThisMonth || 0}\n              </div>\n              <div className=\"text-blue-200\">Hired This Month</div>\n            </div>\n            <div>\n              <div className=\"text-3xl font-bold\">{stats?.jobSeekers || 0}</div>\n              <div className=\"text-blue-200\">Job Seekers</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n","path":null,"size_bytes":5426,"size_tokens":null},"client/src/components/PostJobSection.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Building2, Users, TrendingUp, Shield, Plus } from \"lucide-react\";\nimport AuthModal from \"./auth/AuthModal\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Label } from \"@/components/ui/label\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { PILI_BARANGAYS } from \"@shared/barangays\";\n\nconst JOB_CATEGORIES = [\n  \"Education\",\n  \"Healthcare\",\n  \"Retail\",\n  \"Food Service\",\n  \"Transportation\",\n  \"Construction\",\n  \"Agriculture\",\n  \"Government\",\n  \"Technology\",\n  \"Manufacturing\",\n  \"Tourism\",\n  \"Banking & Finance\",\n  \"Real Estate\",\n  \"Security\",\n  \"Customer Service\",\n  \"Sales & Marketing\",\n  \"Administrative\",\n  \"Engineering\",\n  \"Legal\",\n  \"Beauty & Wellness\",\n  \"Entertainment\",\n  \"Non-Profit\",\n  \"Consulting\",\n  \"Media & Communications\",\n  \"Other\"\n];\n\nexport default function PostJobSection() {\n  const [isAuthModalOpen, setIsAuthModalOpen] = useState(false);\n  const [showJobForm, setShowJobForm] = useState(false);\n  const { isAuthenticated } = useAuth();\n\n  const [jobForm, setJobForm] = useState({\n    title: \"\",\n    company: \"\",\n    location: \"\",\n    type: \"\",\n    category: \"\",\n    salary: \"\",\n    description: \"\",\n    email: \"\"\n  });\n\n  const handlePostJobClick = () => {\n    if (!isAuthenticated) {\n      setIsAuthModalOpen(true);\n    } else {\n      setShowJobForm(true);\n    }\n  };\n\n  const updateForm = (field: string, value: string) => {\n    setJobForm(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    // Form submission logic would go here\n    console.log(\"Job form submitted:\", jobForm);\n  };\n\n\n\n  return (\n    <>\n      <section className=\"py-16 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">For Employers</h2>\n            <p className=\"text-lg text-gray-600 max-w-2xl mx-auto\">\n              Post your job openings and connect with qualified local talent in Pili, Camarines Sur\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12\">\n            <Card className=\"text-center\">\n              <CardHeader>\n                <Building2 className=\"h-8 w-8 text-primary mx-auto mb-2\" />\n                <CardTitle className=\"text-lg\">Easy Job Posting</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-sm text-gray-600\">\n                  Create detailed job listings in minutes with our simple form\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card className=\"text-center\">\n              <CardHeader>\n                <Users className=\"h-8 w-8 text-primary mx-auto mb-2\" />\n                <CardTitle className=\"text-lg\">Local Talent Pool</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-sm text-gray-600\">\n                  Access qualified candidates from Pili and surrounding areas\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card className=\"text-center\">\n              <CardHeader>\n                <TrendingUp className=\"h-8 w-8 text-primary mx-auto mb-2\" />\n                <CardTitle className=\"text-lg\">Application Tracking</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-sm text-gray-600\">\n                  Manage applications and communicate with candidates efficiently\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card className=\"text-center\">\n              <CardHeader>\n                <Shield className=\"h-8 w-8 text-primary mx-auto mb-2\" />\n                <CardTitle className=\"text-lg\">SMS Notifications</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-sm text-gray-600\">\n                  Get instant alerts when qualified candidates apply for your jobs\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n\n          <div className=\"text-center\">\n            <Button\n              size=\"lg\"\n              className=\"px-8 py-3 text-lg\"\n              onClick={handlePostJobClick}\n            >\n              Post a Job\n            </Button>\n            <p className=\"text-sm text-gray-500 mt-3\">\n              Join local employers finding great talent in Pili\n            </p>\n          </div>\n\n          {/* Job Posting Form */}\n          {showJobForm && isAuthenticated && (\n            <div className=\"mt-12\">\n              <Card className=\"max-w-4xl mx-auto\">\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Plus className=\"h-5 w-5\" />\n                    Post a Job Opening\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <form onSubmit={handleSubmit} className=\"space-y-6\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <Label htmlFor=\"title\">Job Title *</Label>\n                        <Input\n                          id=\"title\"\n                          type=\"text\"\n                          placeholder=\"e.g. Marketing Manager\"\n                          value={jobForm.title}\n                          onChange={(e) => updateForm(\"title\", e.target.value)}\n                          required\n                        />\n                      </div>\n                      <div>\n                        <Label htmlFor=\"company\">Company Name *</Label>\n                        <Input\n                          id=\"company\"\n                          type=\"text\"\n                          placeholder=\"Your Company\"\n                          value={jobForm.company}\n                          onChange={(e) => updateForm(\"company\", e.target.value)}\n                          required\n                        />\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <Label>Location *</Label>\n                        <Select value={jobForm.location} onValueChange={(value) => updateForm(\"location\", value)}>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select location\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {PILI_BARANGAYS.map((barangay) => (\n                              <SelectItem key={barangay} value={barangay}>\n                                {barangay}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                      <div>\n                        <Label>Job Type *</Label>\n                        <Select value={jobForm.type} onValueChange={(value) => updateForm(\"type\", value)}>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select job type\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"Full-time\">Full-time</SelectItem>\n                            <SelectItem value=\"Part-time\">Part-time</SelectItem>\n                            <SelectItem value=\"Contract\">Contract</SelectItem>\n                            <SelectItem value=\"Freelance\">Freelance</SelectItem>\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <Label>Category *</Label>\n                        <Select value={jobForm.category} onValueChange={(value) => updateForm(\"category\", value)}>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select job category\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {JOB_CATEGORIES.map((category) => (\n                              <SelectItem key={category} value={category}>\n                                {category}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      </div>\n                      <div>\n                        <Label>Salary Range (Monthly)</Label>\n                        <Select value={jobForm.salary} onValueChange={(value) => updateForm(\"salary\", value)}>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select salary range\" />\n                          </SelectTrigger>\n                          <SelectContent>\n                            <SelectItem value=\"₱15,000 - ₱20,000\">₱15,000 - ₱20,000</SelectItem>\n                            <SelectItem value=\"₱20,000 - ₱30,000\">₱20,000 - ₱30,000</SelectItem>\n                            <SelectItem value=\"₱30,000 - ₱50,000\">₱30,000 - ₱50,000</SelectItem>\n                            <SelectItem value=\"₱50,000+\">₱50,000+</SelectItem>\n                            <SelectItem value=\"Negotiable\">Negotiable</SelectItem>\n                          </SelectContent>\n                        </Select>\n                      </div>\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"description\">Job Description *</Label>\n                      <Textarea\n                        id=\"description\"\n                        rows={4}\n                        placeholder=\"Describe the role, requirements, and responsibilities...\"\n                        value={jobForm.description}\n                        onChange={(e) => updateForm(\"description\", e.target.value)}\n                        required\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"email\">Contact Email *</Label>\n                      <Input\n                        id=\"email\"\n                        type=\"email\"\n                        placeholder=\"your@company.com\"\n                        value={jobForm.email}\n                        onChange={(e) => updateForm(\"email\", e.target.value)}\n                        required\n                      />\n                    </div>\n\n                    <div className=\"flex gap-4\">\n                      <Button type=\"submit\" className=\"flex-1\">\n                        Post Job Opening\n                      </Button>\n                      <Button \n                        type=\"button\" \n                        variant=\"outline\" \n                        onClick={() => setShowJobForm(false)}\n                      >\n                        Cancel\n                      </Button>\n                    </div>\n                  </form>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </div>\n      </section>\n\n      <AuthModal\n        isOpen={isAuthModalOpen}\n        onClose={() => setIsAuthModalOpen(false)}\n        onSuccess={() => setIsAuthModalOpen(false)}\n      />\n    </>\n  );\n}","path":null,"size_bytes":11718,"size_tokens":null},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","path":null,"size_bytes":1642,"size_tokens":null},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","path":null,"size_bytes":7609,"size_tokens":null},"client/src/components/JobSeekerDashboard.tsx":{"content":"import { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { FileText, Briefcase, Heart, UserCircle } from \"lucide-react\";\nimport HeroSection from \"@/components/HeroSection\";\nimport JobListings from \"@/components/JobListings\";\nimport { JobSeekerApplications } from \"@/components/JobSeekerApplications\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport SavedJobs from \"@/components/SavedJobs\";\nimport UserProfileModal from \"./UserProfileModal\";\nimport RecommendedJobs from \"@/components/RecommendedJobs\"; // Assuming this component exists\n\ninterface JobSeekerDashboardProps {\n  searchQuery: string;\n  setSearchQuery: (query: string) => void;\n  locationFilter: string;\n  setLocationFilter: (location: string) => void;\n}\n\nexport default function JobSeekerDashboard({\n  searchQuery,\n  setSearchQuery,\n  locationFilter,\n  setLocationFilter\n}: JobSeekerDashboardProps) {\n  const [activeView, setActiveView] = useState<\"browse\" | \"applications\">(\"browse\");\n  const { user } = useAuth();\n  const [showProfileModal, setShowProfileModal] = useState(false); // State to control modal visibility\n\n  const getUserDisplayName = () => {\n    if (user?.firstName || user?.lastName) {\n      return `${user.firstName || \"\"} ${user.lastName || \"\"}`.trim();\n    }\n    return user?.email?.split(\"@\")[0] || \"User\";\n  };\n\n  // Check if user profile is incomplete\n  const isProfileIncomplete = !user?.skills || !user?.desiredRoles || !user?.experienceLevel || !user?.preferredLocation;\n\n  if (activeView === \"applications\") {\n    return (\n      <div>\n        <div className=\"bg-primary text-white py-8\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"flex justify-between items-center\">\n              <div>\n                <h1 className=\"text-3xl font-bold mb-2\">Welcome back, {getUserDisplayName()}!</h1>\n                <p className=\"text-primary-foreground/80\">Track your job applications and find new opportunities</p>\n              </div>\n              <Button\n                variant=\"secondary\"\n                onClick={() => setActiveView(\"browse\")}\n                className=\"bg-white text-primary hover:bg-gray-100\"\n              >\n                <Briefcase className=\"mr-2 h-4 w-4\" />\n                Browse Jobs\n              </Button>\n            </div>\n          </div>\n        </div>\n        <JobSeekerApplications />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Welcome back, {getUserDisplayName()}!</h1>\n          <p className=\"text-muted-foreground\">Find your next opportunity in Pili, Camarines Sur</p>\n        </div>\n      </div>\n\n      {/* Profile Completion Banner */}\n      {isProfileIncomplete && (\n        <Card className=\"bg-blue-50 border-blue-200\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"bg-blue-500 text-white p-2 rounded-full\">\n                <FileText className=\"h-5 w-5\" />\n              </div>\n              <div className=\"flex-1\">\n                <h3 className=\"font-semibold text-blue-900 mb-1\">\n                  Complete your profile to see job match percentages\n                </h3>\n                <p className=\"text-sm text-blue-700 mb-3\">\n                  Add your skills, desired roles, experience level, and preferred location to see how well each job matches your profile.\n                </p>\n                <Button\n                  size=\"sm\"\n                  onClick={() => setShowProfileModal(true)} // Open the modal\n                  className=\"bg-blue-600 hover:bg-blue-700\"\n                >\n                  Complete Profile Now\n                </Button>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      <Tabs defaultValue=\"recommended\" className=\"space-y-6\">\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"recommended\">Recommended</TabsTrigger>\n          <TabsTrigger value=\"browse\">Browse Jobs</TabsTrigger>\n          <TabsTrigger value=\"saved\">Saved Jobs</TabsTrigger>\n          <TabsTrigger value=\"applications\">My Applications</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"recommended\">\n          <RecommendedJobs />\n        </TabsContent>\n\n        <TabsContent value=\"browse\">\n          <div className=\"space-y-6\">\n            <HeroSection\n              searchQuery={searchQuery}\n              setSearchQuery={setSearchQuery}\n              locationFilter={locationFilter}\n              setLocationFilter={setLocationFilter}\n            />\n            <JobListings\n              searchQuery={searchQuery}\n              locationFilter={locationFilter}\n            />\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"saved\">\n          <SavedJobs />\n        </TabsContent>\n\n        <TabsContent value=\"applications\">\n          <JobSeekerApplications />\n        </TabsContent>\n      </Tabs>\n\n      {/* User Profile Modal */}\n      <UserProfileModal\n        isOpen={showProfileModal}\n        onClose={() => setShowProfileModal(false)}\n        user={user} // Pass the user object to the modal\n      />\n    </div>\n  );\n}","path":null,"size_bytes":5449,"size_tokens":null},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","path":null,"size_bytes":157,"size_tokens":null},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","path":null,"size_bytes":4845,"size_tokens":null},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","path":null,"size_bytes":261,"size_tokens":null},"LOCAL_SETUP.md":{"content":"# Local Development Setup for Windows\n\n## Prerequisites\n1. Install Node.js (version 18 or higher)\n2. Install PostgreSQL for Windows\n\n## PostgreSQL Installation Steps\n\n### Option 1: Install PostgreSQL (Recommended)\n1. Download PostgreSQL from: https://www.postgresql.org/download/windows/\n2. Run the installer and remember your password for the 'postgres' user\n3. Make sure PostgreSQL service is running\n\n### Option 2: Use Docker (Alternative)\n```bash\n# If you have Docker installed\ndocker run --name pili-postgres -e POSTGRES_PASSWORD=password -e POSTGRES_DB=pili_jobs -p 5432:5432 -d postgres:15\n```\n\n## Database Setup\n\n### Step 1: Create Database (Using pgAdmin or SQL Shell)\nOpen SQL Shell (psql) or pgAdmin and run:\n```sql\nCREATE DATABASE pili_jobs;\n```\n\n### Step 2: Environment Configuration\n1. Copy `.env.example` to `.env`\n2. Update the DATABASE_URL in `.env`:\n```\nDATABASE_URL=postgresql://postgres:your_password@localhost:5432/pili_jobs\n```\nReplace `your_password` with the password you set during PostgreSQL installation.\n\n### Step 3: Install Dependencies and Setup\n```bash\n# Install dependencies\nnpm install\n\n# Push database schema\nnpm run db:push\n\n# Seed with sample data (run this in Node.js)\nnode -e \"import('./server/seed.js').then(m => m.seedDatabase())\"\n\n# Start the application\nnpm run dev\n```\n\n## Alternative: Use SQLite for Local Development\n\nIf PostgreSQL setup is too complex, I can modify the project to use SQLite locally:\n\n1. Install SQLite driver: `npm install better-sqlite3`\n2. Modify database configuration for local SQLite file\n3. Keep PostgreSQL for production deployment\n\nWould you prefer this simpler approach?\n\n## Recommended: Current Setup\n\nThe easiest approach is to continue with the current development environment where everything is already working:\n- Database is configured and seeded\n- All dependencies are installed\n- Application runs without any setup\n\nThe application is ready for deployment to any hosting platform.","path":null,"size_bytes":1961,"size_tokens":null},"client/src/components/JobbViewModal.tsx":{"content":"import { useEffect } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport {\n  MapPin,\n  Clock,\n  Briefcase,\n  Building2,\n  Phone,\n  Mail,\n  Calendar,\n  Eye,\n  Users,\n  DollarSign,\n} from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { Job } from \"@shared/schema\";\n\ninterface JobViewModalProps {\n  job: Job | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onApply?: () => void;\n}\n\nexport default function JobViewModal({\n  job,\n  isOpen,\n  onClose,\n  onApply,\n}: JobViewModalProps) {\n  const queryClient = useQueryClient();\n\n  const incrementViewMutation = useMutation({\n    mutationFn: (jobId: number) =>\n      apiRequest(`/api/jobs/${jobId}/view`, \"POST\"),\n    onSuccess: () => {\n      // Invalidate job stats to update view counts\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/jobs\"] });\n    },\n  });\n\n  // Track view when modal opens\n  useEffect(() => {\n    if (isOpen && job) {\n      incrementViewMutation.mutate(job.id);\n    }\n  }, [isOpen, job?.id]);\n\n  if (!job) return null;\n\n  const formatDate = (dateString: string | Date) => {\n    const date =\n      typeof dateString === \"string\" ? new Date(dateString) : dateString;\n    return date.toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    });\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold\">{job.title}</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Company and Basic Info */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center\">\n                    <Building2 className=\"h-8 w-8 text-blue-600\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-900\">\n                      {job.company}\n                    </h3>\n                    <div className=\"flex flex-wrap items-center gap-4 text-sm text-gray-500 mt-1\">\n                      <span className=\"flex items-center\">\n                        <MapPin className=\"mr-1 h-4 w-4\" />\n                        {job.location}\n                      </span>\n                      <span className=\"flex items-center\">\n                        <Clock className=\"mr-1 h-4 w-4\" />\n                        {job.type}\n                      </span>\n                      <span className=\"flex items-center\">\n                        <span className=\"mr-1 text-xs\">₱</span>\n                        {job.salary}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                  <Badge variant=\"secondary\" className=\"w-fit\">\n                    {job.category}\n                  </Badge>\n                  {job.isFeatured && (\n                    <Badge variant=\"destructive\" className=\"w-fit\">\n                      Featured\n                    </Badge>\n                  )}\n                </div>\n              </div>\n\n              {/* Job Stats */}\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t\">\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-sm text-gray-500\">\n                    <Eye className=\"h-4 w-4\" />\n                    <span>{job.viewCount} views</span>\n                  </div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-sm text-gray-500\">\n                    <Users className=\"h-4 w-4\" />\n                    <span>{job.applicantCount} applicants</span>\n                  </div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-sm text-gray-500\">\n                    <Calendar className=\"h-4 w-4\" />\n                    <span>Posted {formatDate(job.postedAt)}</span>\n                  </div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-sm text-gray-500\">\n                    <Briefcase className=\"h-4 w-4\" />\n                    <span\n                      className={\n                        job.isActive ? \"text-green-600\" : \"text-red-600\"\n                      }\n                    >\n                      {job.isActive ? \"Active\" : \"Closed\"}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Job Description */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <h4 className=\"text-lg font-semibold mb-3\">Job Description</h4>\n              <div className=\"prose prose-sm max-w-none\">\n                <p className=\"text-gray-700 whitespace-pre-wrap\">\n                  {job.description}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Requirements */}\n          {job.requirements && (\n            <Card>\n              <CardContent className=\"p-6\">\n                <h4 className=\"text-lg font-semibold mb-3\">Requirements</h4>\n                <div className=\"prose prose-sm max-w-none\">\n                  <p className=\"text-gray-700 whitespace-pre-wrap\">\n                    {job.requirements}\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Benefits */}\n          {job.benefits && (\n            <Card>\n              <CardContent className=\"p-6\">\n                <h4 className=\"text-lg font-semibold mb-3\">Benefits</h4>\n                <div className=\"prose prose-sm max-w-none\">\n                  <p className=\"text-gray-700 whitespace-pre-wrap\">\n                    {job.benefits}\n                  </p>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Contact Information */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <h4 className=\"text-lg font-semibold mb-3\">\n                Contact Information\n              </h4>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center gap-2 text-gray-600\">\n                  <Mail className=\"h-4 w-4\" />\n                  <span>{job.email}</span>\n                </div>\n                {job.phone && (\n                  <div className=\"flex items-center gap-2 text-gray-600\">\n                    <Phone className=\"h-4 w-4\" />\n                    <span>{job.phone}</span>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Action Buttons */}\n          <div className=\"flex flex-col sm:flex-row gap-3 pt-4 border-t\">\n            <Button\n              onClick={onApply}\n              className=\"flex-1 bg-green-600 hover:bg-green-700\"\n              disabled={!job.isActive}\n            >\n              {job.isActive ? \"Apply Now\" : \"Position Closed\"}\n            </Button>\n            <Button\n              variant=\"outline\"\n              onClick={onClose}\n              className=\"flex-1 sm:flex-none sm:px-8\"\n            >\n              Close\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":8076,"size_tokens":null},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","path":null,"size_bytes":1858,"size_tokens":null},"client/src/components/admin/UserManagement.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Edit, Trash2, Phone } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface User {\n  id: number;\n  email: string;\n  firstName: string;\n  lastName: string;\n  phone?: string;\n  role: string;\n  isActive: boolean;\n  isVerified: boolean;\n  createdAt: string;\n}\n\ninterface UserManagementProps {\n  users: User[];\n}\n\nexport function UserManagement({ users }: UserManagementProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [editingUser, setEditingUser] = useState<User | null>(null);\n  const [editFormData, setEditFormData] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    phone: \"\",\n    role: \"\",\n    isActive: true,\n    isVerified: false,\n  });\n\n  const updateUserMutation = useMutation({\n    mutationFn: (data: { id: number; userData: any }) =>\n      apiRequest(`/api/admin/users/${data.id}`, \"PUT\", data.userData),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"User updated successfully!\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      setEditingUser(null);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update user\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteUserMutation = useMutation({\n    mutationFn: (id: number) => apiRequest(`/api/admin/users/${id}`, \"DELETE\"),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"User deleted successfully!\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to delete user\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleEditUser = (user: User) => {\n    setEditingUser(user);\n    setEditFormData({\n      firstName: user.firstName,\n      lastName: user.lastName,\n      phone: user.phone || \"\",\n      role: user.role,\n      isActive: user.isActive,\n      isVerified: user.isVerified,\n    });\n  };\n\n  const handleUpdateUser = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (editingUser) {\n      updateUserMutation.mutate({\n        id: editingUser.id,\n        userData: editFormData,\n      });\n    }\n  };\n\n  const handleDeleteUser = (user: User) => {\n    if (\n      window.confirm(\n        `Are you sure you want to delete user ${user.firstName} ${user.lastName}?`\n      )\n    ) {\n      deleteUserMutation.mutate(user.id);\n    }\n  };\n\n  const getRoleBadgeColor = (role: string) => {\n    switch (role) {\n      case \"admin\":\n        return \"destructive\";\n      case \"employer\":\n        return \"default\";\n      case \"job_seeker\":\n        return \"secondary\";\n      default:\n        return \"outline\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <Table>\n        <TableHeader>\n          <TableRow>\n            <TableHead>Name</TableHead>\n            <TableHead>Email</TableHead>\n            <TableHead>Phone</TableHead>\n            <TableHead>Role</TableHead>\n            <TableHead>Status</TableHead>\n            <TableHead>Joined</TableHead>\n            <TableHead>Actions</TableHead>\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {users.map((user) => (\n            <TableRow key={user.id}>\n              <TableCell className=\"font-medium\">\n                {user.firstName} {user.lastName}\n              </TableCell>\n              <TableCell>{user.email}</TableCell>\n              <TableCell>\n                <div className=\"flex items-center gap-1\">\n                  <Phone className=\"h-3 w-3 text-muted-foreground\" />\n                  {user.phone || \"Not provided\"}\n                </div>\n              </TableCell>\n              <TableCell>\n                <Badge variant={getRoleBadgeColor(user.role)}>\n                  {user.role}\n                </Badge>\n              </TableCell>\n              <TableCell>\n                <div className=\"flex gap-2\">\n                  <Badge variant={user.isActive ? \"default\" : \"secondary\"}>\n                    {user.isActive ? \"Active\" : \"Inactive\"}\n                  </Badge>\n                  {(user.isVerified ||\n                    user.verificationStatus === \"approved\") && (\n                    <Badge variant=\"outline\">Verified</Badge>\n                  )}\n                </div>\n              </TableCell>\n              <TableCell>\n                {new Date(user.createdAt).toLocaleDateString()}\n              </TableCell>\n              <TableCell>\n                <div className=\"flex gap-2\">\n                  <Dialog\n                    open={editingUser?.id === user.id}\n                    onOpenChange={(open) => !open && setEditingUser(null)}\n                  >\n                    <DialogTrigger asChild>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleEditUser(user)}\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                    </DialogTrigger>\n                    <DialogContent>\n                      <DialogHeader>\n                        <DialogTitle>Edit User</DialogTitle>\n                      </DialogHeader>\n                      <form onSubmit={handleUpdateUser} className=\"space-y-4\">\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"firstName\">First Name</Label>\n                            <Input\n                              id=\"firstName\"\n                              value={editFormData.firstName}\n                              onChange={(e) =>\n                                setEditFormData({\n                                  ...editFormData,\n                                  firstName: e.target.value,\n                                })\n                              }\n                              required\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"lastName\">Last Name</Label>\n                            <Input\n                              id=\"lastName\"\n                              value={editFormData.lastName}\n                              onChange={(e) =>\n                                setEditFormData({\n                                  ...editFormData,\n                                  lastName: e.target.value,\n                                })\n                              }\n                              required\n                            />\n                          </div>\n                        </div>\n\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"phone\">Phone Number</Label>\n                          <Input\n                            id=\"phone\"\n                            type=\"tel\"\n                            value={editFormData.phone}\n                            onChange={(e) =>\n                              setEditFormData({\n                                ...editFormData,\n                                phone: e.target.value,\n                              })\n                            }\n                            placeholder=\"+63 912 345 6789\"\n                          />\n                        </div>\n\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"role\">Role</Label>\n                          <Select\n                            value={editFormData.role}\n                            onValueChange={(value) =>\n                              setEditFormData({\n                                ...editFormData,\n                                role: value,\n                              })\n                            }\n                          >\n                            <SelectTrigger>\n                              <SelectValue />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"job_seeker\">\n                                Job Seeker\n                              </SelectItem>\n                              <SelectItem value=\"employer\">Employer</SelectItem>\n                              <SelectItem value=\"admin\">Admin</SelectItem>\n                            </SelectContent>\n                          </Select>\n                        </div>\n\n                        <div className=\"flex items-center space-x-4\">\n                          <div className=\"flex items-center space-x-2\">\n                            <input\n                              type=\"checkbox\"\n                              id=\"isActive\"\n                              checked={editFormData.isActive}\n                              onChange={(e) =>\n                                setEditFormData({\n                                  ...editFormData,\n                                  isActive: e.target.checked,\n                                })\n                              }\n                              className=\"rounded\"\n                            />\n                            <Label htmlFor=\"isActive\">Active</Label>\n                          </div>\n\n                          <div className=\"flex items-center space-x-2\">\n                            <input\n                              type=\"checkbox\"\n                              id=\"isVerified\"\n                              checked={editFormData.isVerified}\n                              onChange={(e) =>\n                                setEditFormData({\n                                  ...editFormData,\n                                  isVerified: e.target.checked,\n                                })\n                              }\n                              className=\"rounded\"\n                            />\n                            <Label htmlFor=\"isVerified\">Verified</Label>\n                          </div>\n                        </div>\n\n                        <div className=\"flex justify-end space-x-2\">\n                          <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            onClick={() => setEditingUser(null)}\n                          >\n                            Cancel\n                          </Button>\n                          <Button\n                            type=\"submit\"\n                            disabled={updateUserMutation.isPending}\n                          >\n                            {updateUserMutation.isPending\n                              ? \"Updating...\"\n                              : \"Update User\"}\n                          </Button>\n                        </div>\n                      </form>\n                    </DialogContent>\n                  </Dialog>\n\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleDeleteUser(user)}\n                    disabled={deleteUserMutation.isPending}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </div>\n  );\n}\n","path":null,"size_bytes":12073,"size_tokens":null},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","path":null,"size_bytes":23567,"size_tokens":null},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","path":null,"size_bytes":1139,"size_tokens":null},"client/src/components/EmployerScouting.tsx":{"content":"\nimport { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Search, User, MapPin, Briefcase, Mail, Phone, Award } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { PILI_BARANGAYS } from \"@shared/barangays\";\n\ninterface Candidate {\n  id: number;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string | null;\n  address: string | null;\n  skills: string | null;\n  desiredRoles: string | null;\n  experienceLevel: string | null;\n  preferredLocation: string | null;\n  matchScore: number;\n  matchingSkills: string[];\n}\n\nexport default function EmployerScouting() {\n  const { toast } = useToast();\n  const [searchParams, setSearchParams] = useState({\n    skills: \"\",\n    experienceLevel: \"\",\n    location: \"\",\n  });\n  const [candidates, setCandidates] = useState<Candidate[]>([]);\n  const [hasSearched, setHasSearched] = useState(false);\n\n  const scoutMutation = useMutation({\n    mutationFn: async (params: { skills: string[]; experienceLevel?: string; location?: string }) =>\n      apiRequest(\"/api/employer/scout-candidates\", \"POST\", params),\n    onSuccess: (data) => {\n      setCandidates(data);\n      setHasSearched(true);\n      toast({\n        title: \"Search Complete\",\n        description: `Found ${data.length} matching candidate${data.length !== 1 ? 's' : ''}`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Search Failed\",\n        description: error.message || \"Failed to scout candidates\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSearch = () => {\n    const skillsArray = searchParams.skills\n      .split(\",\")\n      .map(s => s.trim())\n      .filter(s => s);\n\n    if (skillsArray.length === 0) {\n      toast({\n        title: \"Skills Required\",\n        description: \"Please enter at least one skill to search\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    scoutMutation.mutate({\n      skills: skillsArray,\n      experienceLevel: searchParams.experienceLevel || undefined,\n      location: searchParams.location || undefined,\n    });\n  };\n\n  const getMatchColor = (score: number) => {\n    if (score >= 80) return \"text-green-600 bg-green-100\";\n    if (score >= 60) return \"text-blue-600 bg-blue-100\";\n    if (score >= 40) return \"text-yellow-600 bg-yellow-100\";\n    return \"text-gray-600 bg-gray-100\";\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Search className=\"h-5 w-5\" />\n            Scout Candidates\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"skills\">\n              Required Skills <span className=\"text-red-500\">*</span>\n            </Label>\n            <Input\n              id=\"skills\"\n              value={searchParams.skills}\n              onChange={(e) => setSearchParams({ ...searchParams, skills: e.target.value })}\n              placeholder=\"e.g., React, Customer Service, Sales (comma-separated)\"\n            />\n            <p className=\"text-xs text-gray-500\">\n              Enter skills you're looking for, separated by commas\n            </p>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"experienceLevel\">Experience Level (Optional)</Label>\n              <Select\n                value={searchParams.experienceLevel || \"any\"}\n                onValueChange={(value) =>\n                  setSearchParams({ ...searchParams, experienceLevel: value === \"any\" ? \"\" : value })\n                }\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Any experience level\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"any\">Any Experience</SelectItem>\n                  <SelectItem value=\"Entry\">Entry Level (0-2 years)</SelectItem>\n                  <SelectItem value=\"Mid\">Mid Level (3-5 years)</SelectItem>\n                  <SelectItem value=\"Senior\">Senior Level (6+ years)</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"location\">Preferred Location (Optional)</Label>\n              <Select\n                value={searchParams.location || \"any\"}\n                onValueChange={(value) =>\n                  setSearchParams({ ...searchParams, location: value === \"any\" ? \"\" : value })\n                }\n              >\n                <SelectTrigger>\n                  <SelectValue placeholder=\"Any location\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"any\">Any Location</SelectItem>\n                  {PILI_BARANGAYS.map((barangay) => (\n                    <SelectItem key={barangay} value={barangay}>\n                      {barangay}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n\n          <Button\n            onClick={handleSearch}\n            disabled={scoutMutation.isPending}\n            className=\"w-full\"\n          >\n            <Search className=\"mr-2 h-4 w-4\" />\n            {scoutMutation.isPending ? \"Searching...\" : \"Search Candidates\"}\n          </Button>\n        </CardContent>\n      </Card>\n\n      {hasSearched && (\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold\">\n              {candidates.length} Candidate{candidates.length !== 1 ? 's' : ''} Found\n            </h3>\n          </div>\n\n          {candidates.length === 0 ? (\n            <Card>\n              <CardContent className=\"p-6 text-center text-gray-500\">\n                No candidates found matching your criteria. Try adjusting your search parameters.\n              </CardContent>\n            </Card>\n          ) : (\n            candidates.map((candidate) => (\n              <Card key={candidate.id} className=\"hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-3 mb-2\">\n                        <div className=\"bg-primary-100 rounded-full p-2\">\n                          <User className=\"h-5 w-5 text-primary\" />\n                        </div>\n                        <div>\n                          <h3 className=\"text-lg font-semibold\">\n                            {candidate.firstName} {candidate.lastName}\n                          </h3>\n                          <Badge className={getMatchColor(candidate.matchScore)}>\n                            {candidate.matchScore}% Match\n                          </Badge>\n                        </div>\n                      </div>\n\n                      <div className=\"grid grid-cols-2 gap-3 mt-3 text-sm\">\n                        <div className=\"flex items-center gap-2 text-gray-600\">\n                          <Mail className=\"h-4 w-4\" />\n                          {candidate.email}\n                        </div>\n                        {candidate.phone && (\n                          <div className=\"flex items-center gap-2 text-gray-600\">\n                            <Phone className=\"h-4 w-4\" />\n                            {candidate.phone}\n                          </div>\n                        )}\n                        {candidate.preferredLocation && (\n                          <div className=\"flex items-center gap-2 text-gray-600\">\n                            <MapPin className=\"h-4 w-4\" />\n                            {candidate.preferredLocation}\n                          </div>\n                        )}\n                        {candidate.experienceLevel && (\n                          <div className=\"flex items-center gap-2 text-gray-600\">\n                            <Award className=\"h-4 w-4\" />\n                            {candidate.experienceLevel} Level\n                          </div>\n                        )}\n                      </div>\n\n                      {candidate.matchingSkills.length > 0 && (\n                        <div className=\"mt-3\">\n                          <p className=\"text-sm font-medium text-gray-700 mb-2\">\n                            Matching Skills:\n                          </p>\n                          <div className=\"flex flex-wrap gap-2\">\n                            {candidate.matchingSkills.map((skill, idx) => (\n                              <Badge key={idx} variant=\"secondary\">\n                                {skill}\n                              </Badge>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n\n                      {candidate.desiredRoles && (\n                        <div className=\"mt-3\">\n                          <p className=\"text-sm font-medium text-gray-700 mb-1\">\n                            Desired Roles:\n                          </p>\n                          <p className=\"text-sm text-gray-600\">{candidate.desiredRoles}</p>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","path":null,"size_bytes":9961,"size_tokens":null},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","path":null,"size_bytes":1251,"size_tokens":null},"client/src/components/EmployerVerificationModal.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Upload, X } from \"lucide-react\";\n\ninterface EmployerVerificationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst fileToBase64 = (file: File): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = (error) => reject(error);\n  });\n};\n\nexport default function EmployerVerificationModal({\n  isOpen,\n  onClose,\n}: EmployerVerificationModalProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [formData, setFormData] = useState({\n    businessName: \"\",\n    businessAddress: \"\",\n    contactPerson: \"\",\n    businessDescription: \"\",\n  });\n  const [barangayPermit, setBarangayPermit] = useState<File | null>(null);\n  const [businessPermit, setBusinessPermit] = useState<File | null>(null);\n\n  const submitVerificationMutation = useMutation({\n    mutationFn: async (data: any) => {\n      // Convert files to base64 and send as JSON\n      const barangayBase64 = await fileToBase64(data.barangayPermit);\n      const businessBase64 = await fileToBase64(data.businessPermit);\n\n      return apiRequest(\"/api/employer/verification\", \"POST\", {\n        barangayPermit: barangayBase64,\n        businessPermit: businessBase64,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description:\n          \"Verification request submitted successfully! Please wait for admin approval.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\n      onClose();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to submit verification request\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!barangayPermit || !businessPermit) {\n      toast({\n        title: \"Error\",\n        description: \"Please upload both barangay permit and business permit\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    submitVerificationMutation.mutate({\n      textData: formData,\n      barangayPermit,\n      businessPermit,\n    });\n  };\n\n  const handleFileChange = (\n    file: File | null,\n    type: \"barangay\" | \"business\"\n  ) => {\n    if (file) {\n      const allowedTypes = [\n        \"image/png\",\n        \"image/jpeg\",\n        \"image/jpg\",\n        \"application/pdf\",\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n      ];\n      if (!allowedTypes.includes(file.type)) {\n        toast({\n          title: \"Error\",\n          description: \"Please upload PNG, JPG, PDF, or DOCX files only\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Check file size (5MB limit)\n      const maxSize = 5 * 1024 * 1024; // 5MB\n      if (file.size > maxSize) {\n        toast({\n          title: \"Error\",\n          description: \"File size must be less than 5MB\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n    }\n\n    if (type === \"barangay\") {\n      setBarangayPermit(file);\n    } else {\n      setBusinessPermit(file);\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Employer Verification</DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"businessName\">Business Name *</Label>\n            <Input\n              id=\"businessName\"\n              value={formData.businessName}\n              onChange={(e) =>\n                setFormData((prev) => ({\n                  ...prev,\n                  businessName: e.target.value,\n                }))\n              }\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"businessAddress\">Business Address *</Label>\n            <Input\n              id=\"businessAddress\"\n              value={formData.businessAddress}\n              onChange={(e) =>\n                setFormData((prev) => ({\n                  ...prev,\n                  businessAddress: e.target.value,\n                }))\n              }\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"contactPerson\">Contact Person *</Label>\n            <Input\n              id=\"contactPerson\"\n              value={formData.contactPerson}\n              onChange={(e) =>\n                setFormData((prev) => ({\n                  ...prev,\n                  contactPerson: e.target.value,\n                }))\n              }\n              required\n            />\n          </div>\n\n          <div>\n            <Label htmlFor=\"businessDescription\">Business Description</Label>\n            <Textarea\n              id=\"businessDescription\"\n              value={formData.businessDescription}\n              onChange={(e) =>\n                setFormData((prev) => ({\n                  ...prev,\n                  businessDescription: e.target.value,\n                }))\n              }\n              placeholder=\"Briefly describe your business...\"\n            />\n          </div>\n\n          <div>\n            <Label>Barangay Permit *</Label>\n            <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4\">\n              <input\n                type=\"file\"\n                accept=\".png,.jpg,.jpeg,.pdf,.docx\"\n                onChange={(e) =>\n                  handleFileChange(e.target.files?.[0] || null, \"barangay\")\n                }\n                className=\"hidden\"\n                id=\"barangayPermit\"\n              />\n              <label\n                htmlFor=\"barangayPermit\"\n                className=\"cursor-pointer flex flex-col items-center\"\n              >\n                <Upload className=\"h-8 w-8 text-gray-400 mb-2\" />\n                <span className=\"text-sm text-gray-600\">\n                  {barangayPermit\n                    ? barangayPermit.name\n                    : \"Click to upload barangay permit\"}\n                </span>\n                <span className=\"text-xs text-gray-400 mt-1\">\n                  PNG, JPG, PDF, DOCX (max 10MB)\n                </span>\n              </label>\n              {barangayPermit && (\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => handleFileChange(null, \"barangay\")}\n                  className=\"mt-2\"\n                >\n                  <X className=\"h-4 w-4 mr-1\" />\n                  Remove\n                </Button>\n              )}\n            </div>\n          </div>\n\n          <div>\n            <Label>Business Permit *</Label>\n            <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4\">\n              <input\n                type=\"file\"\n                accept=\".png,.jpg,.jpeg,.pdf,.docx\"\n                onChange={(e) =>\n                  handleFileChange(e.target.files?.[0] || null, \"business\")\n                }\n                className=\"hidden\"\n                id=\"businessPermit\"\n              />\n              <label\n                htmlFor=\"businessPermit\"\n                className=\"cursor-pointer flex flex-col items-center\"\n              >\n                <Upload className=\"h-8 w-8 text-gray-400 mb-2\" />\n                <span className=\"text-sm text-gray-600\">\n                  {businessPermit\n                    ? businessPermit.name\n                    : \"Click to upload business permit\"}\n                </span>\n                <span className=\"text-xs text-gray-400 mt-1\">\n                  PNG, JPG, PDF, DOCX (max 10MB)\n                </span>\n              </label>\n              {businessPermit && (\n                <Button\n                  type=\"button\"\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => handleFileChange(null, \"business\")}\n                  className=\"mt-2\"\n                >\n                  <X className=\"h-4 w-4 mr-1\" />\n                  Remove\n                </Button>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex justify-end gap-2 pt-4\">\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={submitVerificationMutation.isPending}\n            >\n              {submitVerificationMutation.isPending\n                ? \"Submitting...\"\n                : \"Submit Verification\"}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":9241,"size_tokens":null},"server/seed.ts":{"content":"import bcrypt from \"bcryptjs\";\nimport { db } from \"./db\";\nimport {\n  jobs,\n  applications,\n  users,\n  categories,\n  employers,\n} from \"@shared/schema\";\nimport { eq } from \"drizzle-orm\";\n\nexport async function seedDatabase() {\n  try {\n    console.log(\"Starting database seeding...\");\n\n    // Create sample users\n    const hashedPassword = await bcrypt.hash(\"password123\", 10);\n\n    // Admin user\n    const [adminUser] = await db\n      .insert(users)\n      .values({\n        email: \"admin@pilijobs.com\",\n        passwordHash: hashedPassword,\n        role: \"admin\",\n        firstName: \"Admin\",\n        lastName: \"User\",\n        phone: \"+63912345678\",\n        address: \"Pili Centro\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    // Employer users\n    const [employer1] = await db\n      .insert(users)\n      .values({\n        email: \"employer1@company.com\",\n        passwordHash: hashedPassword,\n        role: \"employer\",\n        firstName: \"John\",\n        lastName: \"Manager\",\n        phone: \"+639123456790\",\n        address: \"Bagumbayan, Pili\",\n        isActive: true,\n        isVerified: true,\n        verificationStatus: \"approved\",\n      })\n      .returning();\n\n    const [employer2] = await db\n      .insert(users)\n      .values({\n        email: \"employer2@business.com\",\n        passwordHash: hashedPassword,\n        role: \"employer\",\n        firstName: \"Jane\",\n        lastName: \"Smith\",\n        phone: \"+639123456791\",\n        address: \"San Jose, Pili\",\n        isActive: true,\n        isVerified: true,\n        verificationStatus: \"approved\",\n      })\n      .returning();\n\n    const [employer3] = await db\n      .insert(users)\n      .values({\n        email: \"employer3@restaurant.com\",\n        passwordHash: hashedPassword,\n        role: \"employer\",\n        firstName: \"Carlos\",\n        lastName: \"Rodriguez\",\n        phone: \"+639123456792\",\n        address: \"Santiago, Pili\",\n        isActive: true,\n        isVerified: true,\n        verificationStatus: \"approved\",\n      })\n      .returning();\n\n    // Job seekers with COMPLETE profiles for testing matching\n    const [jobseeker1] = await db\n      .insert(users)\n      .values({\n        email: \"maria.tech@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Maria\",\n        lastName: \"Cruz\",\n        phone: \"+639123456793\",\n        address: \"Santa Cruz Norte, Pili\",\n        skills: \"Web Development, JavaScript, React, HTML, CSS, Customer Service\",\n        desiredRoles: \"Web Developer, Software Developer, IT Support\",\n        experienceLevel: \"Entry\",\n        preferredLocation: \"Any Location\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    const [jobseeker2] = await db\n      .insert(users)\n      .values({\n        email: \"pedro.hospitality@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Pedro\",\n        lastName: \"Santos\",\n        phone: \"+639123456794\",\n        address: \"Santiago, Pili\",\n        skills: \"Customer Service, Food Service, Communication, Teamwork, Cash Handling\",\n        desiredRoles: \"Restaurant Server, Cashier, Customer Service Representative\",\n        experienceLevel: \"Mid\",\n        preferredLocation: \"Santiago\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    const [jobseeker3] = await db\n      .insert(users)\n      .values({\n        email: \"anna.admin@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Anna\",\n        lastName: \"Reyes\",\n        phone: \"+639123456795\",\n        address: \"Bagumbayan, Pili\",\n        skills: \"Microsoft Office, Data Entry, Filing, Communication, Organization, Customer Service\",\n        desiredRoles: \"Administrative Assistant, Secretary, Office Clerk\",\n        experienceLevel: \"Mid\",\n        preferredLocation: \"Bagumbayan\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    const [jobseeker4] = await db\n      .insert(users)\n      .values({\n        email: \"jose.driver@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Jose\",\n        lastName: \"Mendoza\",\n        phone: \"+639123456796\",\n        address: \"Palestina, Pili\",\n        skills: \"Driving, Navigation, Customer Service, Time Management, Vehicle Maintenance\",\n        desiredRoles: \"Delivery Driver, Truck Driver, Personal Driver\",\n        experienceLevel: \"Senior\",\n        preferredLocation: \"Any Location\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    const [jobseeker5] = await db\n      .insert(users)\n      .values({\n        email: \"lisa.teacher@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Lisa\",\n        lastName: \"Garcia\",\n        phone: \"+639123456797\",\n        address: \"Santo Domingo, Pili\",\n        skills: \"Teaching, Mathematics, English, Communication, Classroom Management, Tutoring\",\n        desiredRoles: \"Teacher, Tutor, Education Coordinator\",\n        experienceLevel: \"Mid\",\n        preferredLocation: \"Santo Domingo\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    const [jobseeker6] = await db\n      .insert(users)\n      .values({\n        email: \"marco.sales@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Marco\",\n        lastName: \"Villanueva\",\n        phone: \"+639123456798\",\n        address: \"San Jose, Pili\",\n        skills: \"Sales, Retail, Customer Service, Product Knowledge, Inventory Management, Communication\",\n        desiredRoles: \"Sales Associate, Retail Clerk, Store Manager\",\n        experienceLevel: \"Entry\",\n        preferredLocation: \"San Jose\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    // Create diverse jobs across categories\n    const jobsData = [\n      // Technology jobs\n      {\n        title: \"Junior Web Developer\",\n        description: \"We're looking for a motivated Junior Web Developer to join our team. You'll work on building responsive websites and web applications using modern technologies.\",\n        company: \"Pili Tech Solutions\",\n        location: \"Bagumbayan\",\n        salary: \"₱20,000 - ₱30,000\",\n        type: \"Full-time\",\n        category: \"Technology\",\n        employerId: employer1.id,\n        requirements: \"Web Development, JavaScript, HTML, CSS, React or similar framework\",\n        requiredSkills: \"Web Development, JavaScript, React, HTML, CSS\",\n        benefits: \"Health insurance, 13th month pay, Professional development\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: true,\n      },\n      {\n        title: \"IT Support Specialist\",\n        description: \"Provide technical support to our clients, troubleshoot hardware and software issues, and maintain network infrastructure.\",\n        company: \"Pili Computer Services\",\n        location: \"San Jose\",\n        salary: \"₱18,000 - ₱25,000\",\n        type: \"Full-time\",\n        category: \"Technology\",\n        employerId: employer2.id,\n        requirements: \"IT Support, Computer Hardware, Windows, Networking, Problem Solving\",\n        requiredSkills: \"IT Support, Computer Hardware, Networking, Windows\",\n        benefits: \"Health coverage, Training programs, Performance bonus\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Food Service jobs\n      {\n        title: \"Restaurant Server\",\n        description: \"Join our team as a restaurant server. Take orders, serve customers, and ensure excellent dining experience for our guests.\",\n        company: \"Pili Family Restaurant\",\n        location: \"Santiago\",\n        salary: \"₱15,000 - ₱20,000\",\n        type: \"Full-time\",\n        category: \"Food Service\",\n        employerId: employer3.id,\n        requirements: \"Customer Service, Food Service, Communication, Teamwork\",\n        requiredSkills: \"Customer Service, Food Service, Communication\",\n        benefits: \"Meal allowance, Service charge, Overtime pay, Tips\",\n        email: \"employer3@restaurant.com\",\n        phone: \"+639123456792\",\n        isActive: true,\n        isFeatured: true,\n      },\n      {\n        title: \"Barista\",\n        description: \"Prepare and serve coffee beverages, maintain cleanliness, and provide excellent customer service in our cafe.\",\n        company: \"Pili Coffee House\",\n        location: \"Bagumbayan\",\n        salary: \"₱14,000 - ₱18,000\",\n        type: \"Full-time\",\n        category: \"Food Service\",\n        employerId: employer3.id,\n        requirements: \"Customer Service, Food Service, Coffee Preparation, Cash Handling\",\n        requiredSkills: \"Customer Service, Food Service, Cash Handling\",\n        benefits: \"Free meals, Tips, Flexible schedule\",\n        email: \"employer3@restaurant.com\",\n        phone: \"+639123456792\",\n        isActive: true,\n        isFeatured: false,\n      },\n      {\n        title: \"Kitchen Staff\",\n        description: \"Assist in food preparation, maintain kitchen cleanliness, and follow food safety protocols.\",\n        company: \"Pili Grill House\",\n        location: \"Santiago\",\n        salary: \"₱13,000 - ₱17,000\",\n        type: \"Full-time\",\n        category: \"Food Service\",\n        employerId: employer3.id,\n        requirements: \"Food Preparation, Kitchen Operations, Hygiene Standards, Teamwork\",\n        requiredSkills: \"Food Preparation, Kitchen Operations, Teamwork\",\n        benefits: \"Meal allowance, 13th month pay\",\n        email: \"employer3@restaurant.com\",\n        phone: \"+639123456792\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Administrative jobs\n      {\n        title: \"Administrative Assistant\",\n        description: \"Support office operations with administrative tasks, document preparation, data entry, and customer communication.\",\n        company: \"Pili Municipal Office\",\n        location: \"Bagumbayan\",\n        salary: \"₱18,000 - ₱25,000\",\n        type: \"Full-time\",\n        category: \"Administrative\",\n        employerId: employer1.id,\n        requirements: \"Microsoft Office, Data Entry, Communication, Organization, Filing\",\n        requiredSkills: \"Microsoft Office, Data Entry, Organization, Communication\",\n        benefits: \"Government benefits, Paid leaves, Training opportunities\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: true,\n      },\n      {\n        title: \"Office Clerk\",\n        description: \"Handle filing, data entry, phone calls, and general office support tasks.\",\n        company: \"Pili Business Center\",\n        location: \"San Jose\",\n        salary: \"₱15,000 - ₱20,000\",\n        type: \"Full-time\",\n        category: \"Administrative\",\n        employerId: employer2.id,\n        requirements: \"Microsoft Office, Filing, Data Entry, Phone Etiquette, Organization\",\n        requiredSkills: \"Microsoft Office, Data Entry, Filing, Organization\",\n        benefits: \"Health insurance, 13th month pay\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Transportation jobs\n      {\n        title: \"Delivery Driver\",\n        description: \"Deliver products to customers in Pili and surrounding areas. Must have valid driver's license and motorcycle.\",\n        company: \"Pili Express Delivery\",\n        location: \"Palestina\",\n        salary: \"₱16,000 - ₱22,000\",\n        type: \"Full-time\",\n        category: \"Transportation\",\n        employerId: employer2.id,\n        requirements: \"Driving, Navigation, Customer Service, Time Management, Valid License\",\n        requiredSkills: \"Driving, Navigation, Time Management, Customer Service\",\n        benefits: \"Fuel allowance, Maintenance support, Insurance coverage\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: true,\n      },\n      {\n        title: \"Tricycle Driver\",\n        description: \"Transport passengers within Pili. Must have professional driver's license and own tricycle.\",\n        company: \"Pili Transport Cooperative\",\n        location: \"Santiago\",\n        salary: \"₱500 - ₱800 per day\",\n        type: \"Contract\",\n        category: \"Transportation\",\n        employerId: employer1.id,\n        requirements: \"Driving, Navigation, Customer Service, Valid Professional License\",\n        requiredSkills: \"Driving, Customer Service, Navigation\",\n        benefits: \"Flexible schedule, Fuel subsidy\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Education jobs\n      {\n        title: \"Math Tutor\",\n        description: \"Provide one-on-one or group tutoring for high school students in mathematics.\",\n        company: \"Pili Learning Center\",\n        location: \"Santo Domingo\",\n        salary: \"₱400 - ₱600 per hour\",\n        type: \"Part-time\",\n        category: \"Education\",\n        employerId: employer1.id,\n        requirements: \"Mathematics, Teaching, Communication, Patience, Tutoring\",\n        requiredSkills: \"Mathematics, Teaching, Tutoring, Communication\",\n        benefits: \"Flexible schedule, Professional development, Performance bonus\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: false,\n      },\n      {\n        title: \"English Teacher\",\n        description: \"Teach English to elementary and high school students. Full curriculum development and classroom management.\",\n        company: \"Pili Private School\",\n        location: \"Bagumbayan\",\n        salary: \"₱20,000 - ₱28,000\",\n        type: \"Full-time\",\n        category: \"Education\",\n        employerId: employer1.id,\n        requirements: \"English, Teaching, Classroom Management, Communication, Lesson Planning\",\n        requiredSkills: \"English, Teaching, Communication, Classroom Management\",\n        benefits: \"Health insurance, Summer vacation pay, Professional development\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: true,\n      },\n\n      // Retail jobs\n      {\n        title: \"Sales Associate\",\n        description: \"Assist customers, manage inventory, handle transactions, and maintain store appearance.\",\n        company: \"Pili Shopping Center\",\n        location: \"San Jose\",\n        salary: \"₱15,000 - ₱20,000\",\n        type: \"Full-time\",\n        category: \"Retail\",\n        employerId: employer2.id,\n        requirements: \"Sales, Customer Service, Retail, Product Knowledge, Communication\",\n        requiredSkills: \"Sales, Customer Service, Retail, Communication\",\n        benefits: \"Health insurance, Employee discount, Performance bonus\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: true,\n      },\n      {\n        title: \"Cashier\",\n        description: \"Process customer transactions, handle cash and credit payments, maintain accurate records.\",\n        company: \"Pili Supermarket\",\n        location: \"Bagumbayan\",\n        salary: \"₱14,000 - ₱18,000\",\n        type: \"Full-time\",\n        category: \"Retail\",\n        employerId: employer2.id,\n        requirements: \"Cash Handling, Customer Service, Attention to Detail, Basic Math\",\n        requiredSkills: \"Cash Handling, Customer Service\",\n        benefits: \"13th month pay, Employee discount\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: false,\n      },\n      {\n        title: \"Inventory Clerk\",\n        description: \"Manage stock levels, receive shipments, organize warehouse, track inventory.\",\n        company: \"Pili Warehouse\",\n        location: \"Palestina\",\n        salary: \"₱16,000 - ₱21,000\",\n        type: \"Full-time\",\n        category: \"Retail\",\n        employerId: employer1.id,\n        requirements: \"Inventory Management, Organization, Data Entry, Physical Work\",\n        requiredSkills: \"Inventory Management, Organization, Data Entry\",\n        benefits: \"Health insurance, 13th month pay\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Healthcare jobs\n      {\n        title: \"Nursing Assistant\",\n        description: \"Assist nurses with patient care, monitoring, and daily activities in our healthcare facility.\",\n        company: \"Pili Health Clinic\",\n        location: \"Bagumbayan\",\n        salary: \"₱18,000 - ₱24,000\",\n        type: \"Full-time\",\n        category: \"Healthcare\",\n        employerId: employer1.id,\n        requirements: \"Patient Care, Healthcare, Communication, Compassion, Basic First Aid\",\n        requiredSkills: \"Patient Care, Healthcare, Communication\",\n        benefits: \"Health insurance, Hazard pay, Professional development\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Construction jobs\n      {\n        title: \"Construction Worker\",\n        description: \"General construction labor including carpentry, masonry, and site cleanup.\",\n        company: \"Pili Builders Inc\",\n        location: \"Santiago\",\n        salary: \"₱400 - ₱600 per day\",\n        type: \"Contract\",\n        category: \"Construction\",\n        employerId: employer2.id,\n        requirements: \"Construction, Physical Labor, Teamwork, Safety Awareness\",\n        requiredSkills: \"Construction, Physical Labor, Teamwork\",\n        benefits: \"Daily pay, Meal allowance, Safety equipment provided\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Freelance jobs\n      {\n        title: \"Graphic Designer\",\n        description: \"Create marketing materials, logos, and social media graphics for various clients on a project basis.\",\n        company: \"Pili Creative Studio\",\n        location: \"Any Location\",\n        salary: \"₱2,000 - ₱5,000 per project\",\n        type: \"Freelance\",\n        category: \"Creative\",\n        employerId: employer1.id,\n        requirements: \"Graphic Design, Adobe Photoshop, Illustrator, Creativity, Communication\",\n        requiredSkills: \"Graphic Design, Adobe Photoshop, Creativity\",\n        benefits: \"Flexible schedule, Work from home, Portfolio building\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Customer service\n      {\n        title: \"Customer Service Representative\",\n        description: \"Handle customer inquiries, complaints, and provide product information via phone and email.\",\n        company: \"Pili Call Center\",\n        location: \"San Jose\",\n        salary: \"₱17,000 - ₱23,000\",\n        type: \"Full-time\",\n        category: \"Customer Service\",\n        employerId: employer2.id,\n        requirements: \"Customer Service, Communication, Problem Solving, Computer Skills\",\n        requiredSkills: \"Customer Service, Communication, Problem Solving\",\n        benefits: \"Health insurance, Night differential, Performance bonus\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: true,\n      },\n    ];\n\n    const createdJobs = [];\n    for (const jobData of jobsData) {\n      const [job] = await db.insert(jobs).values(jobData).returning();\n      createdJobs.push(job);\n    }\n\n    console.log(\"Database seeded successfully!\");\n    console.log(\"\\n=== TEST LOGIN CREDENTIALS ===\");\n    console.log(\"\\nAdmin Account:\");\n    console.log(\"  Email: admin@pilijobs.com\");\n    console.log(\"  Password: password123\");\n    console.log(\"\\nEmployer Accounts:\");\n    console.log(\"  Email: employer1@company.com / Password: password123\");\n    console.log(\"  Email: employer2@business.com / Password: password123\");\n    console.log(\"  Email: employer3@restaurant.com / Password: password123\");\n    console.log(\"\\nJob Seeker Accounts (WITH COMPLETE PROFILES for testing matching):\");\n    console.log(\"  1. Maria Cruz (Tech) - maria.tech@email.com / password123\");\n    console.log(\"     Skills: Web Development, JavaScript, React\");\n    console.log(\"     Best matches: Web Developer, IT Support jobs\");\n    console.log(\"\\n  2. Pedro Santos (Hospitality) - pedro.hospitality@email.com / password123\");\n    console.log(\"     Skills: Customer Service, Food Service\");\n    console.log(\"     Best matches: Restaurant Server, Barista, Cashier jobs\");\n    console.log(\"\\n  3. Anna Reyes (Admin) - anna.admin@email.com / password123\");\n    console.log(\"     Skills: Microsoft Office, Data Entry, Organization\");\n    console.log(\"     Best matches: Administrative Assistant, Office Clerk jobs\");\n    console.log(\"\\n  4. Jose Mendoza (Driver) - jose.driver@email.com / password123\");\n    console.log(\"     Skills: Driving, Navigation, Time Management\");\n    console.log(\"     Best matches: Delivery Driver, Tricycle Driver jobs\");\n    console.log(\"\\n  5. Lisa Garcia (Teacher) - lisa.teacher@email.com / password123\");\n    console.log(\"     Skills: Teaching, Mathematics, English\");\n    console.log(\"     Best matches: Teacher, Tutor jobs\");\n    console.log(\"\\n  6. Marco Villanueva (Sales) - marco.sales@email.com / password123\");\n    console.log(\"     Skills: Sales, Retail, Customer Service\");\n    console.log(\"     Best matches: Sales Associate, Retail jobs\");\n    console.log(\"\\nTotal Jobs Created: \" + createdJobs.length);\n    console.log(\"================================\\n\");\n\n    return { success: true, message: \"Database seeded successfully!\" };\n  } catch (error) {\n    console.error(\"Error seeding database:\", error);\n    throw new Error(\"Failed to seed database\");\n  }\n}\n","path":null,"size_bytes":21980,"size_tokens":null},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","path":null,"size_bytes":7428,"size_tokens":null},"shared/schema.ts":{"content":"import { pgTable, text, integer, serial, boolean, timestamp, real, uniqueIndex, varchar, json } from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\n  passwordHash: text(\"password_hash\").notNull(),\n  firstName: varchar(\"first_name\", { length: 100 }).notNull(),\n  middleName: varchar(\"middle_name\", { length: 100 }),\n  lastName: varchar(\"last_name\", { length: 100 }).notNull(),\n  role: varchar(\"role\", { length: 20 }).notNull().default(\"jobseeker\"),\n  phone: varchar(\"phone\", { length: 20 }),\n  address: text(\"address\"),\n  profileImage: text(\"profile_image\"),\n  skills: text(\"skills\"),\n  desiredRoles: text(\"desired_roles\"),\n  experienceLevel: varchar(\"experience_level\", { length: 50 }),\n  preferredLocation: varchar(\"preferred_location\", { length: 255 }),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  isVerified: boolean(\"is_verified\").default(false),\n  verificationStatus: varchar(\"verification_status\", { length: 50 }).default(\"pending\"),\n  barangayPermit: text(\"barangay_permit\"),\n  businessPermit: text(\"business_permit\"),\n  lastLoginAt: timestamp(\"last_login_at\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const userSessions = pgTable(\"user_sessions\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  expiresAt: timestamp(\"expires_at\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const sessions = pgTable(\"sessions\", {\n  sid: varchar(\"sid\", { length: 255 }).primaryKey(),\n  sess: json(\"sess\").notNull(),\n  expire: timestamp(\"expire\").notNull(),\n});\n\nexport const jobs = pgTable(\"jobs\", {\n  id: serial(\"id\").primaryKey(),\n  title: varchar(\"title\", { length: 255 }).notNull(),\n  company: varchar(\"company\", { length: 255 }).notNull(),\n  location: varchar(\"location\", { length: 255 }).notNull(),\n  type: varchar(\"type\", { length: 50 }).notNull(),\n  category: varchar(\"category\", { length: 100 }).notNull(),\n  salary: varchar(\"salary\", { length: 100 }).notNull(),\n  description: text(\"description\").notNull(),\n  requirements: text(\"requirements\"),\n  requiredSkills: text(\"required_skills\"),\n  benefits: text(\"benefits\"),\n  email: varchar(\"email\", { length: 255 }).notNull(),\n  phone: varchar(\"phone\", { length: 20 }),\n  employerId: integer(\"employer_id\").references(() => users.id),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  isFeatured: boolean(\"is_featured\").notNull().default(false),\n  applicantCount: integer(\"applicant_count\").notNull().default(0),\n  viewCount: integer(\"view_count\").notNull().default(0),\n  expiresAt: timestamp(\"expires_at\"),\n  postedAt: timestamp(\"posted_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const applications = pgTable(\"applications\", {\n  id: serial(\"id\").primaryKey(),\n  jobId: integer(\"job_id\").notNull().references(() => jobs.id, { onDelete: \"cascade\" }),\n  applicantId: integer(\"applicant_id\").references(() => users.id),\n  firstName: varchar(\"first_name\", { length: 100 }).notNull(),\n  middleName: varchar(\"middle_name\", { length: 100 }),\n  lastName: varchar(\"last_name\", { length: 100 }).notNull(),\n  email: varchar(\"email\", { length: 255 }).notNull(),\n  phone: varchar(\"phone\", { length: 20 }).notNull(),\n  address: text(\"address\"),\n  coverLetter: text(\"cover_letter\"),\n  resume: text(\"resume\"),\n  status: varchar(\"status\", { length: 50 }).notNull().default(\"pending\"),\n  channelId: text(\"channel_id\"),\n  notes: text(\"notes\"),\n  smsNotificationSent: boolean(\"sms_notification_sent\").notNull().default(false),\n  appliedAt: timestamp(\"applied_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const employers = pgTable(\"employers\", {\n  id: serial(\"id\").primaryKey(),\n  companyName: varchar(\"company_name\", { length: 255 }).notNull(),\n  contactName: varchar(\"contact_name\", { length: 255 }).notNull(),\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\n  phone: varchar(\"phone\", { length: 20 }),\n  address: text(\"address\"),\n  website: varchar(\"website\", { length: 255 }),\n  description: text(\"description\"),\n  logo: text(\"logo\"),\n  isVerified: boolean(\"is_verified\").notNull().default(false),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const categories = pgTable(\"categories\", {\n  id: serial(\"id\").primaryKey(),\n  name: varchar(\"name\", { length: 100 }).notNull().unique(),\n  description: text(\"description\"),\n  icon: varchar(\"icon\", { length: 50 }),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  jobCount: integer(\"job_count\").notNull().default(0),\n});\n\nexport const jobMatches = pgTable(\"job_matches\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  jobId: integer(\"job_id\").notNull().references(() => jobs.id, { onDelete: \"cascade\" }),\n  matchScore: real(\"match_score\").notNull(),\n  skillMatch: real(\"skill_match\").notNull().default(0),\n  locationMatch: real(\"location_match\").notNull().default(0),\n  roleMatch: real(\"role_match\").notNull().default(0),\n  userFeedback: varchar(\"user_feedback\", { length: 20 }),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n}, (table) => ({\n  uniqueJobMatch: uniqueIndex(\"unique_job_match\").on(table.userId, table.jobId),\n}));\n\nexport const savedJobs = pgTable(\"saved_jobs\", {\n  id: serial(\"id\").primaryKey(),\n  jobId: integer(\"job_id\").notNull().references(() => jobs.id, { onDelete: \"cascade\" }),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  savedAt: timestamp(\"saved_at\").notNull().defaultNow(),\n}, (table) => ({\n  uniqueSavedJob: uniqueIndex(\"unique_saved_job\").on(table.jobId, table.userId),\n}));\n\nexport const jobAlerts = pgTable(\"job_alerts\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  keywords: text(\"keywords\"),\n  location: varchar(\"location\", { length: 255 }),\n  category: varchar(\"category\", { length: 100 }),\n  jobType: varchar(\"job_type\", { length: 50 }),\n  minSalary: varchar(\"min_salary\", { length: 100 }),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  frequency: varchar(\"frequency\", { length: 20 }).notNull().default(\"daily\"),\n  lastSent: timestamp(\"last_sent\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const usersRelations = relations(users, ({ many }) => ({\n  jobs: many(jobs),\n  applications: many(applications),\n  savedJobs: many(savedJobs),\n  jobAlerts: many(jobAlerts),\n  sessions: many(userSessions),\n}));\n\nexport const userSessionsRelations = relations(userSessions, ({ one }) => ({\n  user: one(users, {\n    fields: [userSessions.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const jobsRelations = relations(jobs, ({ many, one }) => ({\n  applications: many(applications),\n  savedBy: many(savedJobs),\n  employer: one(users, {\n    fields: [jobs.employerId],\n    references: [users.id],\n  }),\n}));\n\nexport const applicationsRelations = relations(applications, ({ one }) => ({\n  job: one(jobs, {\n    fields: [applications.jobId],\n    references: [jobs.id],\n  }),\n  applicant: one(users, {\n    fields: [applications.applicantId],\n    references: [users.id],\n  }),\n}));\n\nexport const savedJobsRelations = relations(savedJobs, ({ one }) => ({\n  job: one(jobs, {\n    fields: [savedJobs.jobId],\n    references: [jobs.id],\n  }),\n  user: one(users, {\n    fields: [savedJobs.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const jobAlertsRelations = relations(jobAlerts, ({ one }) => ({\n  user: one(users, {\n    fields: [jobAlerts.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const jobMatchesRelations = relations(jobMatches, ({ one }) => ({\n  user: one(users, {\n    fields: [jobMatches.userId],\n    references: [users.id],\n  }),\n  job: one(jobs, {\n    fields: [jobMatches.jobId],\n    references: [jobs.id],\n  }),\n}));\n\nexport const insertJobSchema = createInsertSchema(jobs).omit({\n  id: true,\n  applicantCount: true,\n  viewCount: true,\n  postedAt: true,\n  updatedAt: true,\n});\n\nexport const insertApplicationSchema = createInsertSchema(applications).omit({\n  id: true,\n  smsNotificationSent: true,\n  appliedAt: true,\n  updatedAt: true,\n  status: true,\n});\n\nexport const updateApplicationSchema = insertApplicationSchema.partial().extend({\n  status: z.enum([\"pending\", \"reviewed\", \"accepted\", \"rejected\"]).optional(),\n  notes: z.string().optional(),\n  smsNotificationSent: z.boolean().optional(),\n  updatedAt: z.union([z.date(), z.string()]).transform(val => \n    typeof val === 'string' ? new Date(val) : val\n  ).optional(),\n});\n\nexport const insertEmployerSchema = createInsertSchema(employers).omit({\n  id: true,\n  isVerified: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertCategorySchema = createInsertSchema(categories).omit({\n  id: true,\n  isActive: true,\n  jobCount: true,\n});\n\nexport const insertSavedJobSchema = createInsertSchema(savedJobs).omit({\n  id: true,\n  savedAt: true,\n});\n\nexport const insertJobAlertSchema = createInsertSchema(jobAlerts).omit({\n  id: true,\n  isActive: true,\n  lastSent: true,\n  createdAt: true,\n});\n\nexport const registerUserSchema = z.object({\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n  role: z.enum([\"jobseeker\", \"employer\", \"admin\"]),\n  firstName: z.string().min(1, \"First name is required\"),\n  middleName: z.string().optional(),\n  lastName: z.string().min(1, \"Last name is required\"),\n  phone: z.string().optional(),\n});\n\nexport const loginUserSchema = z.object({\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string().min(1, \"Password is required\"),\n});\n\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = typeof users.$inferInsert;\nexport type RegisterUser = z.infer<typeof registerUserSchema>;\nexport type UserSession = typeof userSessions.$inferSelect;\nexport type InsertUserSession = typeof userSessions.$inferInsert;\nexport type Job = typeof jobs.$inferSelect;\nexport type InsertJob = z.infer<typeof insertJobSchema>;\nexport type UpdateJob = Partial<InsertJob>;\nexport type Application = typeof applications.$inferSelect;\nexport type InsertApplication = z.infer<typeof insertApplicationSchema>;\nexport type UpdateApplication = z.infer<typeof updateApplicationSchema>;\nexport type Employer = typeof employers.$inferSelect;\nexport type InsertEmployer = z.infer<typeof insertEmployerSchema>;\nexport type Category = typeof categories.$inferSelect;\nexport type InsertCategory = z.infer<typeof insertCategorySchema>;\nexport type SavedJob = typeof savedJobs.$inferSelect;\nexport type InsertSavedJob = z.infer<typeof insertSavedJobSchema>;\nexport type JobAlert = typeof jobAlerts.$inferSelect;\nexport type InsertJobAlert = z.infer<typeof insertJobAlertSchema>;\n","path":null,"size_bytes":11258,"size_tokens":null},"drizzle.config.sqlite.ts":{"content":"import type { Config } from 'drizzle-kit';\n\nexport default {\n  schema: './shared/schema.ts',\n  out: './drizzle',\n  dialect: 'sqlite',\n  dbCredentials: {\n    url: './pili_jobs.db',\n  },\n} satisfies Config;","path":null,"size_bytes":204,"size_tokens":null},"client/src/components/admin/VerificationManagement.tsx":{"content":"\nimport { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { \n  Shield, \n  Eye, \n  CheckCircle, \n  XCircle, \n  Download,\n  FileText,\n  Building,\n  User,\n  Mail,\n  Phone\n} from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport function VerificationManagement() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [selectedUser, setSelectedUser] = useState<any>(null);\n  const [documentsModalOpen, setDocumentsModalOpen] = useState(false);\n  const [documents, setDocuments] = useState<any>(null);\n\n  // Fetch pending verification requests\n  const { data: verificationRequests = [] } = useQuery<any[]>({\n    queryKey: ['/api/admin/verification-requests'],\n  });\n\n  const approveVerificationMutation = useMutation({\n    mutationFn: (userId: number) => apiRequest(`/api/admin/verification/${userId}/approve`, 'POST'),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Employer verification approved!\"\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/verification-requests'] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to approve verification\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const rejectVerificationMutation = useMutation({\n    mutationFn: (userId: number) => apiRequest(`/api/admin/verification/${userId}/reject`, 'POST', { reason: \"Documents not acceptable\" }),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Employer verification rejected!\"\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/admin/verification-requests'] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to reject verification\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const fetchDocumentsMutation = useMutation({\n    mutationFn: (userId: number) => apiRequest(`/api/admin/verification/${userId}/documents`, 'GET'),\n    onSuccess: (data) => {\n      setDocuments(data);\n      setDocumentsModalOpen(true);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to fetch documents\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const handleViewDocuments = (user: any) => {\n    setSelectedUser(user);\n    fetchDocumentsMutation.mutate(user.id);\n  };\n\n  const downloadDocument = (documentData: string, filename: string) => {\n    if (documentData.startsWith('data:')) {\n      const link = document.createElement('a');\n      link.href = documentData;\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold\">Employer Verification</h2>\n          <p className=\"text-muted-foreground\">Manage employer verification requests</p>\n        </div>\n        <Badge variant=\"secondary\">\n          {verificationRequests.length} pending\n        </Badge>\n      </div>\n\n      {verificationRequests.length === 0 ? (\n        <Card>\n          <CardContent className=\"text-center py-12\">\n            <Shield className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium mb-2\">No pending verifications</h3>\n            <p className=\"text-muted-foreground\">\n              All employer verification requests have been processed\n            </p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-4\">\n          {verificationRequests.map((user: any) => (\n            <Card key={user.id} className=\"hover:shadow-md transition-shadow\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <h3 className=\"text-lg font-semibold\">\n                        {user.firstName} {user.lastName}\n                      </h3>\n                      <Badge variant=\"outline\">Pending Verification</Badge>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4 text-sm text-gray-600 mb-4\">\n                      <span className=\"flex items-center gap-1\">\n                        <Mail className=\"h-4 w-4\" />\n                        {user.email}\n                      </span>\n                      <span className=\"flex items-center gap-1\">\n                        <Phone className=\"h-4 w-4\" />\n                        {user.phone}\n                      </span>\n                      <span className=\"flex items-center gap-1\">\n                        <Building className=\"h-4 w-4\" />\n                        {user.address}\n                      </span>\n                      <span className=\"flex items-center gap-1\">\n                        <User className=\"h-4 w-4\" />\n                        Submitted: {new Date(user.updatedAt).toLocaleDateString()}\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-col gap-2 ml-4\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handleViewDocuments(user)}\n                      disabled={fetchDocumentsMutation.isPending}\n                    >\n                      <Eye className=\"h-3 w-3 mr-1\" />\n                      View Documents\n                    </Button>\n                    <Button\n                      variant=\"default\"\n                      size=\"sm\"\n                      onClick={() => approveVerificationMutation.mutate(user.id)}\n                      disabled={approveVerificationMutation.isPending}\n                    >\n                      <CheckCircle className=\"h-3 w-3 mr-1\" />\n                      Approve\n                    </Button>\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => rejectVerificationMutation.mutate(user.id)}\n                      disabled={rejectVerificationMutation.isPending}\n                    >\n                      <XCircle className=\"h-3 w-3 mr-1\" />\n                      Reject\n                    </Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {/* Documents Modal */}\n      <Dialog open={documentsModalOpen} onOpenChange={setDocumentsModalOpen}>\n        <DialogContent className=\"max-w-2xl\">\n          <DialogHeader>\n            <DialogTitle>\n              Verification Documents - {selectedUser?.firstName} {selectedUser?.lastName}\n            </DialogTitle>\n          </DialogHeader>\n          \n          {documents && (\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <h4 className=\"font-medium flex items-center gap-2\">\n                    <FileText className=\"h-4 w-4\" />\n                    Barangay Permit\n                  </h4>\n                  {documents.barangayPermit ? (\n                    <div className=\"border rounded p-3\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => downloadDocument(documents.barangayPermit, `${selectedUser?.firstName}_${selectedUser?.lastName}_barangay_permit`)}\n                      >\n                        <Download className=\"h-3 w-3 mr-1\" />\n                        Download\n                      </Button>\n                    </div>\n                  ) : (\n                    <p className=\"text-sm text-muted-foreground\">No document uploaded</p>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <h4 className=\"font-medium flex items-center gap-2\">\n                    <FileText className=\"h-4 w-4\" />\n                    Business Permit\n                  </h4>\n                  {documents.businessPermit ? (\n                    <div className=\"border rounded p-3\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => downloadDocument(documents.businessPermit, `${selectedUser?.firstName}_${selectedUser?.lastName}_business_permit`)}\n                      >\n                        <Download className=\"h-3 w-3 mr-1\" />\n                        Download\n                      </Button>\n                    </div>\n                  ) : (\n                    <p className=\"text-sm text-muted-foreground\">No document uploaded</p>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"flex justify-end gap-2 pt-4\">\n                <Button\n                  variant=\"destructive\"\n                  onClick={() => {\n                    rejectVerificationMutation.mutate(selectedUser?.id);\n                    setDocumentsModalOpen(false);\n                  }}\n                  disabled={rejectVerificationMutation.isPending}\n                >\n                  <XCircle className=\"h-4 w-4 mr-1\" />\n                  Reject\n                </Button>\n                <Button\n                  variant=\"default\"\n                  onClick={() => {\n                    approveVerificationMutation.mutate(selectedUser?.id);\n                    setDocumentsModalOpen(false);\n                  }}\n                  disabled={approveVerificationMutation.isPending}\n                >\n                  <CheckCircle className=\"h-4 w-4 mr-1\" />\n                  Approve\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","path":null,"size_bytes":10399,"size_tokens":null},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","path":null,"size_bytes":756,"size_tokens":null},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","path":null,"size_bytes":772,"size_tokens":null},"server/scripts/inspect-db.js":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"client/src/pages/EmployerDashboard.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport {\n  Briefcase,\n  Users,\n  Eye,\n  Plus,\n  Mail,\n  Phone,\n  Calendar,\n  MapPin,\n  DollarSign,\n  Upload,\n  Shield,\n  AlertTriangle,\n  FileText,\n  Download,\n  Edit,\n  Trash2,\n  Search,\n} from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { PILI_BARANGAYS } from \"@shared/barangays\";\nimport EmployerScouting from \"@/components/EmployerScouting\";\n\nexport function EmployerDashboard() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n  const [showJobModal, setShowJobModal] = useState(false);\n  const [showVerificationModal, setShowVerificationModal] = useState(false);\n  const [editingJob, setEditingJob] = useState<any>(null);\n  const [jobToDelete, setJobToDelete] = useState<number | null>(null);\n  const [verificationData, setVerificationData] = useState({\n    barangayPermit: null as File | null,\n    businessPermit: null as File | null,\n  });\n  const [newJob, setNewJob] = useState({\n    title: \"\",\n    company: \"\",\n    location: \"\",\n    type: \"\",\n    category: \"\",\n    salary: \"\",\n    description: \"\",\n    requirements: \"\",\n    requiredSkills: \"\",\n    benefits: \"\",\n  });\n\n  // Fetch employer's jobs\n  const { data: employerJobs = [] } = useQuery<any[]>({\n    queryKey: [\"/api/employer/jobs\"],\n  });\n\n  // Fetch applications for employer's jobs\n  const { data: applications = [] } = useQuery<any[]>({\n    queryKey: [\"/api/employer/applications\"],\n  });\n\n  // Fetch categories for job posting\n  const { data: categories = [] } = useQuery<any[]>({\n    queryKey: [\"/api/categories\"],\n  });\n\n  const postJobMutation = useMutation({\n    mutationFn: (jobData: any) => apiRequest(\"/api/jobs\", \"POST\", jobData),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Job posted successfully!\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/employer/jobs\"] });\n      setShowJobModal(false);\n      setNewJob({\n        title: \"\",\n        company: \"\",\n        location: \"\",\n        type: \"\",\n        category: \"\",\n        salary: \"\",\n        description: \"\",\n        requirements: \"\",\n        requiredSkills: \"\",\n        benefits: \"\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to post job\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateJobMutation = useMutation({\n    mutationFn: ({ id, jobData }: { id: number; jobData: any }) =>\n      apiRequest(`/api/jobs/${id}`, \"PATCH\", jobData),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Job updated successfully!\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/employer/jobs\"] });\n      setShowJobModal(false);\n      setEditingJob(null);\n      setNewJob({\n        title: \"\",\n        company: \"\",\n        location: \"\",\n        type: \"\",\n        category: \"\",\n        salary: \"\",\n        description: \"\",\n        requirements: \"\",\n        requiredSkills: \"\",\n        benefits: \"\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update job\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteJobMutation = useMutation({\n    mutationFn: (id: number) => apiRequest(`/api/jobs/${id}`, \"DELETE\"),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Job deleted successfully!\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/employer/jobs\"] });\n      setJobToDelete(null);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to delete job\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateApplicationMutation = useMutation({\n    mutationFn: ({ id, status }: { id: number; status: string }) =>\n      apiRequest(`/api/applications/${id}`, \"PATCH\", { status }),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Application status updated!\",\n      });\n      queryClient.invalidateQueries({\n        queryKey: [\"/api/employer/applications\"],\n      });\n    },\n  });\n\n  const submitVerificationMutation = useMutation({\n    mutationFn: async (data: {\n      barangayPermit: string;\n      businessPermit: string;\n    }) => apiRequest(\"/api/employer/verification\", \"POST\", data),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description:\n          \"Verification documents submitted! Please wait for admin approval.\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to submit verification\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleJobSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    // Check if user is verified\n    if (user?.verificationStatus !== \"approved\") {\n      setShowVerificationModal(true);\n      return;\n    }\n\n    if (editingJob) {\n      updateJobMutation.mutate({\n        id: editingJob.id,\n        jobData: newJob,\n      });\n    } else {\n      postJobMutation.mutate({\n        ...newJob,\n        employerId: user?.id,\n        email: user?.email,\n      });\n    }\n  };\n\n  const handleEditJob = (job: any) => {\n    setEditingJob(job);\n    setNewJob({\n      title: job.title,\n      company: job.company,\n      location: job.location,\n      type: job.type,\n      category: job.category,\n      salary: job.salary,\n      description: job.description,\n      requirements: job.requirements || \"\",\n      requiredSkills: job.requiredSkills || \"\",\n      benefits: job.benefits || \"\",\n    });\n    setShowJobModal(true);\n  };\n\n  const handleDeleteJob = (jobId: number) => {\n    setJobToDelete(jobId);\n  };\n\n  const confirmDelete = () => {\n    if (jobToDelete) {\n      deleteJobMutation.mutate(jobToDelete);\n    }\n  };\n\n  const handleCloseJobModal = () => {\n    setShowJobModal(false);\n    setEditingJob(null);\n    setNewJob({\n      title: \"\",\n      company: \"\",\n      location: \"\",\n      type: \"\",\n      category: \"\",\n      salary: \"\",\n      description: \"\",\n      requirements: \"\",\n      requiredSkills: \"\",\n      benefits: \"\",\n    });\n  };\n\n  const handleFileUpload = async (\n    file: File,\n    type: \"barangayPermit\" | \"businessPermit\"\n  ) => {\n    try {\n      // Check file size (5MB limit)\n      const maxSize = 5 * 1024 * 1024; // 5MB\n      if (file.size > maxSize) {\n        toast({\n          title: \"Error\",\n          description: \"File size must be less than 5MB\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Check file type\n      const allowedTypes = [\n        \"image/png\",\n        \"image/jpeg\",\n        \"image/jpg\",\n        \"application/pdf\",\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n      ];\n      if (!allowedTypes.includes(file.type)) {\n        toast({\n          title: \"Error\",\n          description: \"Please upload PNG, JPG, PDF, or DOCX files only\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      setVerificationData((prev) => ({\n        ...prev,\n        [type]: file,\n      }));\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to upload file\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const fileToBase64 = (file: File): Promise<string> => {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result as string);\n      reader.onerror = (error) => reject(error);\n    });\n  };\n\n  const handleVerificationSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!verificationData.barangayPermit || !verificationData.businessPermit) {\n      toast({\n        title: \"Error\",\n        description: \"Please upload both required documents\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    try {\n      const barangayBase64 = await fileToBase64(\n        verificationData.barangayPermit\n      );\n      const businessBase64 = await fileToBase64(\n        verificationData.businessPermit\n      );\n\n      submitVerificationMutation.mutate({\n        barangayPermit: barangayBase64,\n        businessPermit: businessBase64,\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to process documents\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"pending\":\n        return \"secondary\";\n      case \"reviewed\":\n        return \"default\";\n      case \"interviewing\":\n        return \"outline\";\n      case \"hired\":\n        return \"destructive\";\n      case \"rejected\":\n        return \"secondary\";\n      default:\n        return \"secondary\";\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      {user?.verificationStatus === \"pending\" && (\n        <Alert>\n          <Shield className=\"h-4 w-4\" />\n          <AlertDescription>\n            Your verification is pending approval. You'll be able to post jobs\n            once verified.\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {user?.verificationStatus === \"approved\" && (\n        <Alert className=\"border-green-200 bg-green-50\">\n          <Shield className=\"h-4 w-4 text-green-600\" />\n          <AlertDescription className=\"text-green-800\">\n            ✓ Your account is verified! You can now post jobs and access all\n            features.\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {user?.verificationStatus === \"rejected\" && (\n        <Alert variant=\"destructive\">\n          <AlertTriangle className=\"h-4 w-4\" />\n          <AlertDescription>\n            Your verification was rejected. Please contact support or resubmit\n            your documents.\n          </AlertDescription>\n        </Alert>\n      )}\n\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Employer Dashboard</h1>\n          <p className=\"text-muted-foreground\">\n            Manage your job postings and applications\n          </p>\n        </div>\n        <Dialog open={showJobModal} onOpenChange={setShowJobModal}>\n          <DialogTrigger asChild>\n            <Button\n              onClick={() => {\n                if (user?.verificationStatus !== \"approved\") {\n                  setShowVerificationModal(true);\n                } else {\n                  setShowJobModal(true);\n                }\n              }}\n            >\n              <Plus className=\"mr-2 h-4 w-4\" />\n              Post New Job\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>\n                {editingJob ? \"Edit Job\" : \"Post New Job\"}\n              </DialogTitle>\n            </DialogHeader>\n            <form onSubmit={handleJobSubmit} className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"title\">Job Title</Label>\n                  <Input\n                    id=\"title\"\n                    value={newJob.title}\n                    onChange={(e) =>\n                      setNewJob({ ...newJob, title: e.target.value })\n                    }\n                    placeholder=\"Software Engineer\"\n                    required\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"company\">Company</Label>\n                  <Input\n                    id=\"company\"\n                    value={newJob.company}\n                    onChange={(e) =>\n                      setNewJob({ ...newJob, company: e.target.value })\n                    }\n                    placeholder=\"Tech Corp\"\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"location\">Location</Label>\n                  <Select\n                    value={newJob.location}\n                    onValueChange={(value) =>\n                      setNewJob({ ...newJob, location: value })\n                    }\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select location\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {PILI_BARANGAYS.map((barangay) => (\n                        <SelectItem key={barangay} value={barangay}>\n                          {barangay}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"salary\">Salary</Label>\n                  <Input\n                    id=\"salary\"\n                    value={newJob.salary}\n                    onChange={(e) =>\n                      setNewJob({ ...newJob, salary: e.target.value })\n                    }\n                    placeholder=\"₱25,000 - ₱35,000\"\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"type\">Job Type</Label>\n                  <Select\n                    value={newJob.type}\n                    onValueChange={(value) =>\n                      setNewJob({ ...newJob, type: value })\n                    }\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select job type\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"Full-time\">Full-time</SelectItem>\n                      <SelectItem value=\"Part-time\">Part-time</SelectItem>\n                      <SelectItem value=\"Contract\">Contract</SelectItem>\n                      <SelectItem value=\"Internship\">Internship</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"category\">Category</Label>\n                  <Select\n                    value={newJob.category}\n                    onValueChange={(value) =>\n                      setNewJob({ ...newJob, category: value })\n                    }\n                  >\n                    <SelectTrigger>\n                      <SelectValue placeholder=\"Select category\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"Education\">Education</SelectItem>\n                      <SelectItem value=\"Healthcare\">Healthcare</SelectItem>\n                      <SelectItem value=\"Retail\">Retail</SelectItem>\n                      <SelectItem value=\"Food Service\">Food Service</SelectItem>\n                      <SelectItem value=\"Transportation\">\n                        Transportation\n                      </SelectItem>\n                      <SelectItem value=\"Construction\">Construction</SelectItem>\n                      <SelectItem value=\"Agriculture\">Agriculture</SelectItem>\n                      <SelectItem value=\"Government\">Government</SelectItem>\n                      <SelectItem value=\"Technology\">Technology</SelectItem>\n                      <SelectItem value=\"Manufacturing\">\n                        Manufacturing\n                      </SelectItem>\n                      <SelectItem value=\"Tourism\">Tourism</SelectItem>\n                      <SelectItem value=\"Banking & Finance\">\n                        Banking & Finance\n                      </SelectItem>\n                      <SelectItem value=\"Real Estate\">Real Estate</SelectItem>\n                      <SelectItem value=\"Security\">Security</SelectItem>\n                      <SelectItem value=\"Customer Service\">\n                        Customer Service\n                      </SelectItem>\n                      <SelectItem value=\"Sales & Marketing\">\n                        Sales & Marketing\n                      </SelectItem>\n                      <SelectItem value=\"Administrative\">\n                        Administrative\n                      </SelectItem>\n                      <SelectItem value=\"Engineering\">Engineering</SelectItem>\n                      <SelectItem value=\"Legal\">Legal</SelectItem>\n                      <SelectItem value=\"Beauty & Wellness\">\n                        Beauty & Wellness\n                      </SelectItem>\n                      <SelectItem value=\"Entertainment\">\n                        Entertainment\n                      </SelectItem>\n                      <SelectItem value=\"Non-Profit\">Non-Profit</SelectItem>\n                      <SelectItem value=\"Consulting\">Consulting</SelectItem>\n                      <SelectItem value=\"Media & Communications\">\n                        Media & Communications\n                      </SelectItem>\n                      <SelectItem value=\"Other\">Other</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"description\">Job Description</Label>\n                <Textarea\n                  id=\"description\"\n                  value={newJob.description}\n                  onChange={(e) =>\n                    setNewJob({ ...newJob, description: e.target.value })\n                  }\n                  placeholder=\"Describe the role, responsibilities, and what you're looking for...\"\n                  rows={4}\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"requirements\">Requirements</Label>\n                <Textarea\n                  id=\"requirements\"\n                  value={newJob.requirements}\n                  onChange={(e) =>\n                    setNewJob({ ...newJob, requirements: e.target.value })\n                  }\n                  placeholder=\"List the required skills, experience, and qualifications...\"\n                  rows={3}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"requiredSkills\">\n                  Required Skills (comma-separated)\n                </Label>\n                <Input\n                  id=\"requiredSkills\"\n                  value={newJob.requiredSkills}\n                  onChange={(e) =>\n                    setNewJob({ ...newJob, requiredSkills: e.target.value })\n                  }\n                  placeholder=\"e.g., React, PHP, Customer Service, Communication\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"benefits\">Benefits</Label>\n                <Textarea\n                  id=\"benefits\"\n                  value={newJob.benefits}\n                  onChange={(e) =>\n                    setNewJob({ ...newJob, benefits: e.target.value })\n                  }\n                  placeholder=\"Health insurance, vacation days, remote work options...\"\n                  rows={3}\n                />\n              </div>\n\n              <div className=\"flex justify-end space-x-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={handleCloseJobModal}\n                >\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={\n                    postJobMutation.isPending || updateJobMutation.isPending\n                  }\n                >\n                  {editingJob\n                    ? updateJobMutation.isPending\n                      ? \"Updating...\"\n                      : \"Update Job\"\n                    : postJobMutation.isPending\n                    ? \"Posting...\"\n                    : \"Post Job\"}\n                </Button>\n              </div>\n            </form>\n          </DialogContent>\n        </Dialog>\n\n        {/* Verification Modal */}\n        <Dialog\n          open={showVerificationModal}\n          onOpenChange={setShowVerificationModal}\n        >\n          <DialogContent className=\"max-w-md\">\n            <DialogHeader>\n              <DialogTitle>Employer Verification Required</DialogTitle>\n            </DialogHeader>\n            <form onSubmit={handleVerificationSubmit} className=\"space-y-4\">\n              <p className=\"text-sm text-muted-foreground\">\n                To post jobs, you need to verify your business by uploading the\n                required documents.\n              </p>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"barangayPermit\">Barangay Permit</Label>\n                <Input\n                  id=\"barangayPermit\"\n                  type=\"file\"\n                  accept=\".png,.jpg,.jpeg,.pdf,.docx\"\n                  onChange={(e) =>\n                    e.target.files?.[0] &&\n                    handleFileUpload(e.target.files[0], \"barangayPermit\")\n                  }\n                  required\n                />\n                {verificationData.barangayPermit && (\n                  <p className=\"text-xs text-green-600\">\n                    ✓ {verificationData.barangayPermit.name}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"businessPermit\">Business Permit</Label>\n                <Input\n                  id=\"businessPermit\"\n                  type=\"file\"\n                  accept=\".png,.jpg,.jpeg,.pdf,.docx\"\n                  onChange={(e) =>\n                    e.target.files?.[0] &&\n                    handleFileUpload(e.target.files[0], \"businessPermit\")\n                  }\n                  required\n                />\n                {verificationData.businessPermit && (\n                  <p className=\"text-xs text-green-600\">\n                    ✓ {verificationData.businessPermit.name}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"flex justify-end space-x-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setShowVerificationModal(false)}\n                >\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={submitVerificationMutation.isPending}\n                >\n                  {submitVerificationMutation.isPending\n                    ? \"Submitting...\"\n                    : \"Submit for Verification\"}\n                </Button>\n              </div>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Jobs</CardTitle>\n            <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{employerJobs.length}</div>\n            <p className=\"text-xs text-muted-foreground\">Currently hiring</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              Total Applications\n            </CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{applications.length}</div>\n            <p className=\"text-xs text-muted-foreground\">Across all jobs</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Views</CardTitle>\n            <Eye className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {employerJobs.reduce(\n                (sum: number, job: any) => sum + (job.viewCount || 0),\n                0\n              )}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Job impressions</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Tabs defaultValue=\"jobs\" className=\"space-y-4\">\n        <TabsList>\n          <TabsTrigger value=\"jobs\">My Jobs</TabsTrigger>\n          <TabsTrigger value=\"applications\">Applications</TabsTrigger>\n          <TabsTrigger value=\"scout\">\n            <Search className=\"mr-2 h-4 w-4\" />\n            Scout Candidates\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"jobs\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Your Job Postings</CardTitle>\n              <CardDescription>\n                Manage and view your active job listings\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {employerJobs.map((job: any) => (\n                  <div\n                    key={job.id}\n                    className=\"flex items-start justify-between p-4 border rounded-lg\"\n                  >\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold\">{job.title}</h3>\n                      <p className=\"text-sm text-muted-foreground flex items-center gap-4 mt-1\">\n                        <span className=\"flex items-center gap-1\">\n                          <MapPin className=\"h-3 w-3\" />\n                          {job.location}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <span className=\"text-sm font-medium text-muted-foreground\">\n                            ₱\n                          </span>\n                          {job.salary}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <Eye className=\"h-3 w-3\" />\n                          {job.viewCount || 0} views\n                        </span>\n                      </p>\n                      <p className=\"text-sm text-muted-foreground mt-2\">\n                        {job.description}\n                      </p>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Badge variant=\"outline\">{job.type}</Badge>\n                      <Badge variant=\"secondary\">{job.category}</Badge>\n                      <Badge variant={job.isActive ? \"default\" : \"secondary\"}>\n                        {job.isActive ? \"Active\" : \"Inactive\"}\n                      </Badge>\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => handleEditJob(job)}\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"destructive\"\n                        onClick={() => handleDeleteJob(job.id)}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n                {employerJobs.length === 0 && (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    No job postings yet. Click \"Post New Job\" to get started!\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"scout\">\n          <EmployerScouting />\n        </TabsContent>\n\n        <TabsContent value=\"applications\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Job Applications</CardTitle>\n              <CardDescription>\n                Review and manage applications for your jobs\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {applications.map((app: any) => (\n                  <div\n                    key={app.id}\n                    className=\"flex items-start justify-between p-4 border rounded-lg\"\n                  >\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-start justify-between\">\n                        <div>\n                          <h3 className=\"font-semibold\">\n                            {app.firstName} {app.lastName}\n                          </h3>\n                          <p className=\"text-sm text-muted-foreground\">\n                            Applied for: {app.jobTitle}\n                          </p>\n                        </div>\n                        <Badge variant={getStatusColor(app.status)}>\n                          {app.status}\n                        </Badge>\n                      </div>\n                      <div className=\"flex items-center gap-4 mt-2 text-sm text-muted-foreground\">\n                        <span className=\"flex items-center gap-1\">\n                          <Mail className=\"h-3 w-3\" />\n                          {app.email}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <Phone className=\"h-3 w-3\" />\n                          {app.phone}\n                        </span>\n                        <span className=\"flex items-center gap-1\">\n                          <Calendar className=\"h-3 w-3\" />\n                          {new Date(app.appliedAt).toLocaleDateString()}\n                        </span>\n                      </div>\n                      {app.coverLetter && (\n                        <div className=\"mt-3\">\n                          <p className=\"text-sm font-medium\">Cover Letter:</p>\n                          {app.coverLetter.startsWith(\"data:\") ||\n                          app.coverLetter.startsWith(\"uploads/\") ? (\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() =>\n                                window.open(\n                                  `/api/download/cover-letter/${app.id}`,\n                                  \"_blank\"\n                                )\n                              }\n                              className=\"mt-1\"\n                            >\n                              <Download className=\"h-3 w-3 mr-1\" />\n                              Download Cover Letter\n                            </Button>\n                          ) : (\n                            <p className=\"text-sm text-muted-foreground mt-1\">\n                              {app.coverLetter}\n                            </p>\n                          )}\n                        </div>\n                      )}\n                      {app.resume && (\n                        <div className=\"mt-3\">\n                          <p className=\"text-sm font-medium\">Resume:</p>\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() =>\n                              window.open(\n                                `/api/download/resume/${app.id}`,\n                                \"_blank\"\n                              )\n                            }\n                            className=\"mt-1\"\n                          >\n                            <Download className=\"h-3 w-3 mr-1\" />\n                            Download Resume\n                          </Button>\n                        </div>\n                      )}\n                    </div>\n                    <div className=\"flex flex-col space-y-2 ml-4\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() =>\n                          updateApplicationMutation.mutate({\n                            id: app.id,\n                            status: \"reviewed\",\n                          })\n                        }\n                        disabled={app.status === \"reviewed\"}\n                      >\n                        Mark Reviewed\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"default\"\n                        onClick={() =>\n                          updateApplicationMutation.mutate({\n                            id: app.id,\n                            status: \"interviewing\",\n                          })\n                        }\n                        disabled={\n                          app.status === \"interviewing\" ||\n                          app.status === \"hired\"\n                        }\n                      >\n                        Interview\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"destructive\"\n                        onClick={() =>\n                          updateApplicationMutation.mutate({\n                            id: app.id,\n                            status: \"hired\",\n                          })\n                        }\n                        disabled={app.status === \"hired\"}\n                      >\n                        Hire\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n                {applications.length === 0 && (\n                  <div className=\"text-center py-8 text-muted-foreground\">\n                    No applications received yet.\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      {/* Delete Confirmation Dialog */}\n      <AlertDialog\n        open={jobToDelete !== null}\n        onOpenChange={() => setJobToDelete(null)}\n      >\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Are you sure?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This action cannot be undone. This will permanently delete the job\n              posting and remove all associated applications.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={confirmDelete}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n            >\n              {deleteJobMutation.isPending ? \"Deleting...\" : \"Delete\"}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","path":null,"size_bytes":36495,"size_tokens":null},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg max-h-[90vh] translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 overflow-y-auto data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","path":null,"size_bytes":4449,"size_tokens":null},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","path":null,"size_bytes":1723,"size_tokens":null},"client/src/pages/AdminDashboard.tsx":{"content":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n  LineChart,\n  Line,\n  Area,\n  AreaChart,\n  Legend,\n} from \"recharts\";\nimport {\n  Users,\n  Briefcase,\n  FileText,\n  TrendingUp,\n  Phone,\n  Mail,\n  MapPin,\n  Calendar,\n  DollarSign,\n  Activity,\n  UserCheck,\n  MessageSquare,\n} from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { UserManagement } from \"@/components/admin/UserManagement\";\nimport { JobManagement } from \"@/components/admin/JobManagement\";\nimport { VerificationManagement } from \"@/components/admin/VerificationManagement\";\n\ninterface AdminStats {\n  totalUsers: number;\n  totalJobs: number;\n  totalApplications: number;\n  activeJobs: number;\n  pendingApplications: number;\n  featuredJobs: number;\n  totalEmployers: number;\n  totalJobSeekers: number;\n  applicationsToday: number;\n  jobsPostedToday: number;\n  usersRegisteredToday: number;\n  jobViewsToday: number;\n}\n\ninterface CategoryStats {\n  category: string;\n  jobCount: number;\n  applicationCount: number;\n  avgSalary: string;\n}\n\ninterface JobTypeStats {\n  type: string;\n  count: number;\n  percentage: number;\n}\n\ninterface ApplicationTrend {\n  date: string;\n  applications: number;\n  jobs: number;\n}\n\ninterface RecentActivity {\n  id: number;\n  type: \"application\" | \"job_posted\" | \"user_registered\";\n  message: string;\n  timestamp: string;\n}\n\nconst CHART_COLORS = [\n  \"#0088FE\",\n  \"#00C49F\",\n  \"#FFBB28\",\n  \"#FF8042\",\n  \"#8884D8\",\n  \"#82CA9D\",\n];\n\nexport function AdminDashboard() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data: stats, isLoading: statsLoading } = useQuery<AdminStats>({\n    queryKey: [\"/api/admin/stats\"],\n    refetchInterval: 5000, // Refresh every 5 seconds for more real-time feel\n    refetchIntervalInBackground: true,\n    refetchOnWindowFocus: true,\n    staleTime: 0, // Consider data stale immediately\n    gcTime: 0, // Don't cache old data\n  });\n\n  const { data: categoryStats = [] } = useQuery<CategoryStats[]>({\n    queryKey: [\"/api/admin/category-stats\"],\n    refetchInterval: 10000,\n    staleTime: 0,\n    gcTime: 0,\n  });\n\n  const { data: jobTypeStats = [] } = useQuery<JobTypeStats[]>({\n    queryKey: [\"/api/admin/job-type-stats\"],\n    refetchInterval: 10000,\n    staleTime: 0,\n    gcTime: 0,\n  });\n\n  const { data: trends = [] } = useQuery<ApplicationTrend[]>({\n    queryKey: [\"/api/admin/trends\"],\n    refetchInterval: 15000,\n    staleTime: 0,\n    gcTime: 0,\n  });\n\n  const { data: recentActivity = [] } = useQuery<RecentActivity[]>({\n    queryKey: [\"/api/admin/recent-activity\"],\n    refetchInterval: 5000,\n    staleTime: 0,\n    gcTime: 0,\n  });\n\n  const { data: users = [] } = useQuery<any[]>({\n    queryKey: [\"/api/admin/users\"],\n    refetchInterval: 10000,\n    staleTime: 0,\n    gcTime: 0,\n  });\n\n  const { data: jobs = [] } = useQuery<any[]>({\n    queryKey: [\"/api/admin/jobs\"],\n    refetchInterval: 10000,\n    staleTime: 0,\n    gcTime: 0,\n  });\n\n  const { data: applications = [] } = useQuery<any[]>({\n    queryKey: [\"/api/admin/applications\"],\n    refetchInterval: 10000,\n    staleTime: 0,\n    gcTime: 0,\n  });\n\n  const seedDatabaseMutation = useMutation({\n    mutationFn: () => apiRequest(\"/api/seed\", \"POST\", {}),\n    onSuccess: () => {\n      toast({\n        title: \"Database Seeded\",\n        description: \"Sample data has been added successfully\",\n      });\n      queryClient.invalidateQueries();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Seeding Failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const clearDatabaseMutation = useMutation({\n    mutationFn: () => apiRequest(\"/api/admin/clear-data\", \"POST\", {}),\n    onSuccess: () => {\n      toast({\n        title: \"Database Cleared\",\n        description: \"All data has been removed\",\n      });\n      queryClient.invalidateQueries();\n    },\n    onError: (error) => {\n      toast({\n        title: \"Clear Failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  if (statsLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        Loading admin dashboard...\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">Admin Dashboard</h1>\n          <p className=\"text-muted-foreground\">\n            Pili Jobs Analytics & Management\n          </p>\n        </div>\n        <div className=\"space-x-2 z-30 relative\">\n          <Button\n            variant=\"default\"\n            onClick={async () => {\n              try {\n                toast({\n                  title: \"Exporting Analytics\",\n                  description: \"Generating your Excel file...\",\n                });\n                \n                const response = await fetch('/api/admin/export-analytics', {\n                  credentials: 'include',\n                });\n                \n                if (!response.ok) {\n                  const error = await response.json();\n                  throw new Error(error.message || 'Export failed');\n                }\n                \n                const blob = await response.blob();\n                const url = window.URL.createObjectURL(blob);\n                const a = document.createElement('a');\n                a.href = url;\n                a.download = `pili-jobs-analytics-${new Date().toISOString().split('T')[0]}.xlsx`;\n                document.body.appendChild(a);\n                a.click();\n                window.URL.revokeObjectURL(url);\n                document.body.removeChild(a);\n                \n                toast({\n                  title: \"Export Successful\",\n                  description: \"Your Excel file has been downloaded\",\n                });\n              } catch (error) {\n                toast({\n                  title: \"Export Failed\",\n                  description: error instanceof Error ? error.message : \"Failed to export analytics\",\n                  variant: \"destructive\",\n                });\n              }\n            }}\n          >\n            Export to Excel\n          </Button>\n          <Button\n            variant=\"outline\"\n            onClick={() => seedDatabaseMutation.mutate()}\n            disabled={seedDatabaseMutation.isPending}\n          >\n            Seed Database\n          </Button>\n          <Button\n            variant=\"destructive\"\n            onClick={() => clearDatabaseMutation.mutate()}\n            disabled={clearDatabaseMutation.isPending}\n          >\n            Clear Data\n          </Button>\n        </div>\n      </div>\n\n      {/* Key Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Users</CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats?.totalUsers || 0}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              <span className=\"text-green-600\">\n                +{stats?.usersRegisteredToday || 0}\n              </span>{\" \"}\n              registered today\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Jobs</CardTitle>\n            <Briefcase className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats?.activeJobs || 0}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              <span className=\"text-blue-600\">\n                +{stats?.jobsPostedToday || 0}\n              </span>{\" \"}\n              posted today\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Applications</CardTitle>\n            <FileText className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {stats?.totalApplications || 0}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              <span className=\"text-purple-600\">\n                +{stats?.applicationsToday || 0}\n              </span>{\" \"}\n              applications today\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Job Views</CardTitle>\n            <Activity className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {stats?.jobViewsToday || 0}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              <span className=\"text-orange-600\">\n                +{stats?.jobViewsToday || 0}\n              </span>{\" \"}\n              views today\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Featured Jobs</CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{stats?.featuredJobs || 0}</div>\n            <p className=\"text-xs text-muted-foreground\">Premium listings</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Tabs defaultValue=\"analytics\" className=\"space-y-4\">\n        <TabsList className=\"grid w-full grid-cols-5\">\n          <TabsTrigger value=\"analytics\">Analytics</TabsTrigger>\n          <TabsTrigger value=\"users\">Users</TabsTrigger>\n          <TabsTrigger value=\"jobs\">Jobs</TabsTrigger>\n          <TabsTrigger value=\"verification\">Verification</TabsTrigger>\n          <TabsTrigger value=\"database\">Database</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"analytics\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n            {/* Category Distribution */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Jobs by Category</CardTitle>\n                <CardDescription>\n                  Distribution of job postings by category\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <BarChart data={categoryStats}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"category\" />\n                    <YAxis />\n                    <Tooltip />\n                    <Bar dataKey=\"jobCount\" fill=\"#8884d8\" />\n                  </BarChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            {/* Job Type Distribution */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Job Types</CardTitle>\n                <CardDescription>\n                  Distribution by employment type\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <PieChart>\n                    <Pie\n                      data={jobTypeStats}\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      labelLine={false}\n                      label={({ name, percentage }) =>\n                        `${name}: ${percentage}%`\n                      }\n                      outerRadius={80}\n                      fill=\"#8884d8\"\n                      dataKey=\"count\"\n                    >\n                      {jobTypeStats?.map((entry, index) => (\n                        <Cell\n                          key={`cell-${index}`}\n                          fill={CHART_COLORS[index % CHART_COLORS.length]}\n                        />\n                      ))}\n                    </Pie>\n                    <Tooltip />\n                  </PieChart>\n                </ResponsiveContainer>\n              </CardContent>\n            </Card>\n\n            Application Trends\n            <Card className=\"lg:col-span-2\">\n              <CardHeader>\n                <CardTitle>Activity Trends</CardTitle>\n                <CardDescription>\n                  Jobs posted, Applications received, and User registrations over time (Last 30 days)\n                  - Job views are tracked in real-time\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <AreaChart data={trends && trends.length > 0 ? trends : [{ date: 'No Data', applications: 0, jobs: 0, users: 0 }]}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis\n                      dataKey=\"date\"\n                      tick={{ fontSize: 12 }}\n                      angle={-45}\n                      textAnchor=\"end\"\n                      height={80}\n                      label={{ value: 'Date', position: 'insideBottom', offset: -5 }}\n                    />\n                    <YAxis\n                      label={{ value: 'Count', angle: -90, position: 'insideLeft', offset: 10 }}\n                    />\n                    <Tooltip\n                      labelStyle={{ color: \"#333\" }}\n                      contentStyle={{\n                        backgroundColor: \"#fff\",\n                        border: \"1px solid #ccc\",\n                        borderRadius: \"4px\",\n                      }}\n                      formatter={(value, name) => {\n                        const labels = {\n                          'applications': 'Applications',\n                          'jobs': 'Jobs Posted',\n                          'users': 'User Registrations'\n                        };\n                        return [value, labels[name as keyof typeof labels] || name];\n                      }}\n                    />\n                    <Legend verticalAlign=\"top\" height={36} />\n                    <Area\n                      type=\"monotone\"\n                      dataKey=\"applications\"\n                      stackId=\"1\"\n                      stroke=\"#8884d8\"\n                      fill=\"#8884d8\"\n                      fillOpacity={0.6}\n                      name=\"Applications\"\n                    />\n                    <Area\n                      type=\"monotone\"\n                      dataKey=\"jobs\"\n                      stackId=\"2\"\n                      stroke=\"#82ca9d\"\n                      fill=\"#82ca9d\"\n                      fillOpacity={0.6}\n                      name=\"Jobs Posted\"\n                    />\n                    <Area\n                      type=\"monotone\"\n                      dataKey=\"users\"\n                      stackId=\"3\"\n                      stroke=\"#ffc658\"\n                      fill=\"#ffc658\"\n                      fillOpacity={0.6}\n                      name=\"User Registrations\"\n                    />\n                  </AreaChart>\n                </ResponsiveContainer>\n                {(!trends || trends.length === 0) && (\n                  <div className=\"flex items-center justify-center h-[300px] text-muted-foreground absolute inset-0\">\n                    \n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Recent Activity */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Recent Activity</CardTitle>\n              <CardDescription>Latest actions on the platform</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {recentActivity?.slice(0, 10).map((activity) => (\n                  <div key={activity.id} className=\"flex items-start space-x-3\">\n                    <div className=\"flex-shrink-0\">\n                      {activity.type === \"application\" && (\n                        <FileText className=\"h-5 w-5 text-blue-500\" />\n                      )}\n                      {activity.type === \"job_posted\" && (\n                        <Briefcase className=\"h-5 w-5 text-green-500\" />\n                      )}\n                      {activity.type === \"user_registered\" && (\n                        <UserCheck className=\"h-5 w-5 text-purple-500\" />\n                      )}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm text-gray-900\">\n                        {activity.message}\n                      </p>\n                      <p className=\"text-xs text-gray-500\">\n                        {new Date(activity.timestamp).toLocaleString()}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"users\">\n          <Card>\n            <CardHeader>\n              <CardTitle>User Management</CardTitle>\n              <CardDescription>\n                Edit users, update roles, and manage access permissions\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <UserManagement users={users || []} />\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"jobs\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Job Management</CardTitle>\n              <CardDescription>\n                Edit job postings, update details, and manage featured listings\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <JobManagement jobs={jobs || []} />\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"verification\" className=\"space-y-4\">\n          <VerificationManagement />\n        </TabsContent>\n\n        <TabsContent value=\"database\" className=\"space-y-4\">\n          {/* Database Management Section (Placeholder for now) */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Database Management</CardTitle>\n              <CardDescription>\n                Manage database seeding and clearing operations.\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex items-center justify-center space-x-4\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => seedDatabaseMutation.mutate()}\n                  disabled={seedDatabaseMutation.isPending}\n                >\n                  Seed Database\n                </Button>\n                <Button\n                  variant=\"destructive\"\n                  onClick={() => clearDatabaseMutation.mutate()}\n                  disabled={clearDatabaseMutation.isPending}\n                >\n                  Clear Data\n                </Button>\n              </div>\n              <p className=\"text-center text-muted-foreground mt-4\">\n                Use with caution. Seeding adds sample data, clearing removes all\n                data.\n              </p>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"applications\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Application Management</CardTitle>\n              <CardDescription>All job applications</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {applications?.map((app: any) => (\n                  <div\n                    key={app.id}\n                    className=\"flex items-center justify-between p-4 border rounded-lg\"\n                  >\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-medium\">\n                        {app.firstName} {app.lastName}\n                      </h3>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {app.email} • {app.phone}\n                      </p>\n                      <p className=\"text-sm text-blue-600\">\n                        Applied for: {app.jobTitle}\n                      </p>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <Badge\n                        variant={\n                          app.status === \"accepted\"\n                            ? \"default\"\n                            : app.status === \"rejected\"\n                            ? \"destructive\"\n                            : app.status === \"reviewed\"\n                            ? \"secondary\"\n                            : \"outline\"\n                        }\n                      >\n                        {app.status}\n                      </Badge>\n                      {app.smsNotificationSent && (\n                        <MessageSquare className=\"h-4 w-4 text-green-500\" />\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","path":null,"size_bytes":22082,"size_tokens":null},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","path":null,"size_bytes":1584,"size_tokens":null},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","path":null,"size_bytes":6210,"size_tokens":null},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","path":null,"size_bytes":329,"size_tokens":null},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","path":null,"size_bytes":10481,"size_tokens":null},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","path":null,"size_bytes":80,"size_tokens":null},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","path":null,"size_bytes":166,"size_tokens":null},"README.md":{"content":"# Pili Jobs - Local Job Board Platform\n\nA modern web-based platform connecting job seekers and employers in Pili, Camarines Sur. Built with React, TypeScript, and Express.js.\n\n## Features\n\n- **Job Search & Filtering**: Search jobs by keywords, location, category, and salary range\n- **Application System**: Easy job application with contact details and cover letters\n- **Employer Portal**: Post job openings with detailed information\n- **Local Focus**: Specifically designed for Pili, Camarines Sur job market\n- **Responsive Design**: Works on desktop, tablet, and mobile devices\n- **Real-time Stats**: Live dashboard showing job market activity\n\n## Technology Stack\n\n### Frontend\n- React 18 with TypeScript\n- Tailwind CSS for styling\n- shadcn/ui component library\n- TanStack React Query for data management\n- Wouter for routing\n\n### Backend\n- Express.js with TypeScript\n- In-memory storage (easily replaceable with database)\n- RESTful API design\n- Zod for data validation\n\n### Development Tools\n- Vite for fast development and building\n- ESBuild for production bundling\n- TypeScript for type safety\n\n## Quick Start\n\n### Prerequisites\n- Node.js 18 or higher\n- npm or yarn package manager\n\n### Installation\n\n1. **Download the project files** to your computer\n2. **Open terminal/command prompt** and navigate to the project folder\n3. **Install dependencies**:\n   ```bash\n   npm install\n   ```\n\n### Running the Application\n\n1. **Start the development server**:\n   ```bash\n   npm run dev\n   ```\n   \n   **Windows Users**: If you get a \"operation not supported on socket\" error, try one of these solutions:\n   \n   **Option A**: Use the provided Windows batch file:\n   ```bash\n   start-windows.bat\n   ```\n   \n   **Option B**: Set a different port:\n   ```bash\n   set PORT=5000\n   npm run dev\n   ```\n   \n   **Option C**: Run without cross-env:\n   ```bash\n   npx tsx server/index.ts\n   ```\n\n2. **Open your web browser** and go to:\n   ```\n   http://localhost:5000\n   ```\n   (or the port number shown in your terminal)\n\nThe application will automatically open and you can start using it immediately!\n\n## Usage Guide\n\n### For Job Seekers\n1. **Search Jobs**: Use the search bar on the homepage to find jobs by keywords\n2. **Filter Results**: Use the sidebar filters to narrow down by job type, category, or salary\n3. **Apply for Jobs**: Click \"Apply Now\" on any job listing to submit your application\n4. **Save Jobs**: Click the heart icon to save jobs for later\n\n### For Employers\n1. **Switch to Employer Mode**: Use the toggle in the top navigation\n2. **Post a Job**: Fill out the job posting form in the \"For Employers\" section\n3. **Manage Applications**: Applications are sent directly to your provided email\n\n## Project Structure\n\n```\n├── client/                 # React frontend application\n│   ├── src/\n│   │   ├── components/     # Reusable UI components\n│   │   ├── pages/          # Page components\n│   │   ├── hooks/          # Custom React hooks\n│   │   └── lib/            # Utility functions\n├── server/                 # Express backend\n│   ├── index.ts           # Server entry point\n│   ├── routes.ts          # API route definitions\n│   └── storage.ts         # Data storage layer\n├── shared/                 # Shared TypeScript types\n│   └── schema.ts          # Database schema and validation\n└── package.json           # Project dependencies\n```\n\n## Available Scripts\n\n- `npm run dev` - Start development server\n- `npm run build` - Build for production\n- `npm run start` - Start production server\n- `npm run type-check` - Check TypeScript types\n\n## Configuration\n\nThe application works out of the box with no additional configuration needed. It uses in-memory storage, so data will reset when you restart the server.\n\n### Adding Real Database (Optional)\nTo use a persistent database like PostgreSQL:\n1. Set up a database (recommended: Neon serverless PostgreSQL)\n2. Add your `DATABASE_URL` environment variable\n3. The application will automatically switch to database storage\n\n## Local Development\n\n1. The application runs on `http://localhost:5000`\n2. Frontend and backend are served together for simplicity\n3. Hot reload is enabled - changes will update automatically\n4. TypeScript provides full type safety across the entire application\n\n## Deployment\n\nThe application is ready for deployment to platforms like:\n- Vercel\n- Netlify\n- Heroku\n- Any Node.js hosting service\n\n## Support\n\nThis application is specifically designed for the Pili, Camarines Sur job market. All location options and categories are tailored to the local area.\n\n\n","path":null,"size_bytes":4649,"size_tokens":null},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","path":null,"size_bytes":1527,"size_tokens":null},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","path":null,"size_bytes":1419,"size_tokens":null},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","path":null,"size_bytes":1753,"size_tokens":null},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","path":null,"size_bytes":711,"size_tokens":null},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","path":null,"size_bytes":565,"size_tokens":null},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  url: string,\n  method: string = \"GET\",\n  data?: unknown | undefined,\n): Promise<any> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return await res.json();\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","path":null,"size_bytes":1399,"size_tokens":null},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","path":null,"size_bytes":791,"size_tokens":null},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","path":null,"size_bytes":1209,"size_tokens":null},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","path":null,"size_bytes":4120,"size_tokens":null},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\n// Load environment variables\nimport * as dotenv from \"dotenv\";\ndotenv.config();\n\nconst app = express();\napp.use(express.json({ limit: \"10mb\" }));\napp.use(express.urlencoded({ extended: false, limit: \"10mb\" }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  server.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n    },\n    () => {\n      log(`serving on port ${port}`);\n    }\n  );\n})();\n","path":null,"size_bytes":2181,"size_tokens":null},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","path":null,"size_bytes":1077,"size_tokens":null},"server/db.ts":{"content":"import { drizzle } from 'drizzle-orm/neon-serverless';\nimport { neonConfig, Pool } from '@neondatabase/serverless';\nimport * as schema from \"@shared/schema\";\nimport ws from 'ws';\n\nconst databaseUrl = process.env.DATABASE_URL;\n\nif (!databaseUrl) {\n  throw new Error('DATABASE_URL environment variable is not set');\n}\n\nneonConfig.webSocketConstructor = ws;\n\nexport const pool = new Pool({ connectionString: databaseUrl });\nexport const db = drizzle(pool, { schema });\n","path":null,"size_bytes":466,"size_tokens":null},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":2263,"size_tokens":null},"check_db.js":{"content":"const fs = require('fs');\nconst Database = require('better-sqlite3');\nconst dbPath = './pili_jobs.db';\n\nif (!fs.existsSync(dbPath)) {\n  console.log('DB_FILE_NOT_FOUND');\n  process.exit(0);\n}\n\ntry {\n  const db = new Database(dbPath, { readonly: true });\n  const tables = db.prepare(\"SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%';\").all();\n  if (!tables || tables.length === 0) {\n    console.log('NO_TABLES_FOUND');\n  } else {\n    console.log('TABLE_COUNTS');\n    for (const t of tables) {\n      try {\n        const r = db.prepare(`SELECT COUNT(*) AS c FROM \"${t.name}\"`).get();\n        console.log(`${t.name}: ${r.c}`);\n      } catch (err) {\n        console.log(`${t.name}: ERROR (${err.message})`);\n      }\n    }\n  }\n  db.close();\n} catch (err) {\n  console.error('ERROR_OPENING_DB', err.message);\n}\n","path":null,"size_bytes":832,"size_tokens":null},"client/src/pages/DatabaseViewer.tsx":{"content":"\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '../components/ui/card';\nimport { Button } from '../components/ui/button';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '../components/ui/table';\nimport { Badge } from '../components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../components/ui/tabs';\n\ninterface TableData {\n  name: string;\n  rows: any[];\n  columns: string[];\n}\n\nexport default function DatabaseViewer() {\n  const [tables, setTables] = useState<TableData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedTable, setSelectedTable] = useState<string>('');\n\n  useEffect(() => {\n    fetchAllTables();\n  }, []);\n\n  const fetchAllTables = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch('/api/admin/database/tables');\n      const data = await response.json();\n      setTables(data);\n      if (data.length > 0) {\n        setSelectedTable(data[0].name);\n      }\n    } catch (error) {\n      console.error('Error fetching tables:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const refreshTable = async (tableName: string) => {\n    try {\n      const response = await fetch(`/api/admin/database/table/${tableName}`);\n      const data = await response.json();\n      setTables(prev => prev.map(table => \n        table.name === tableName ? data : table\n      ));\n    } catch (error) {\n      console.error('Error refreshing table:', error);\n    }\n  };\n\n  const formatCellValue = (value: any) => {\n    if (value === null) return <Badge variant=\"secondary\">NULL</Badge>;\n    if (typeof value === 'boolean') return <Badge variant={value ? \"default\" : \"destructive\"}>{String(value)}</Badge>;\n    if (typeof value === 'object') return <pre className=\"text-xs\">{JSON.stringify(value, null, 2)}</pre>;\n    if (String(value).length > 100) return <span className=\"text-xs\">{String(value).substring(0, 100)}...</span>;\n    return String(value);\n  };\n\n  if (loading) {\n    return <div className=\"flex justify-center items-center h-64\">Loading database tables...</div>;\n  }\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold\">Database Viewer</h1>\n        <p className=\"text-gray-600\">View raw data from your SQLite database</p>\n      </div>\n\n      <Tabs value={selectedTable} onValueChange={setSelectedTable}>\n        <TabsList className=\"mb-4\">\n          {tables.map((table) => (\n            <TabsTrigger key={table.name} value={table.name}>\n              {table.name} ({table.rows.length})\n            </TabsTrigger>\n          ))}\n        </TabsList>\n\n        {tables.map((table) => (\n          <TabsContent key={table.name} value={table.name}>\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between\">\n                <CardTitle>Table: {table.name}</CardTitle>\n                <Button \n                  onClick={() => refreshTable(table.name)}\n                  variant=\"outline\"\n                  size=\"sm\"\n                >\n                  Refresh\n                </Button>\n              </CardHeader>\n              <CardContent>\n                <div className=\"mb-4\">\n                  <Badge variant=\"outline\">Rows: {table.rows.length}</Badge>\n                  <Badge variant=\"outline\" className=\"ml-2\">Columns: {table.columns.length}</Badge>\n                </div>\n                \n                {table.rows.length === 0 ? (\n                  <p className=\"text-gray-500 text-center py-8\">No data in this table</p>\n                ) : (\n                  <div className=\"overflow-x-auto\">\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          {table.columns.map((column) => (\n                            <TableHead key={column} className=\"font-medium\">\n                              {column}\n                            </TableHead>\n                          ))}\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {table.rows.map((row, index) => (\n                          <TableRow key={index}>\n                            {table.columns.map((column) => (\n                              <TableCell key={column} className=\"max-w-xs\">\n                                {formatCellValue(row[column])}\n                              </TableCell>\n                            ))}\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n        ))}\n      </Tabs>\n    </div>\n  );\n}\n","path":null,"size_bytes":4832,"size_tokens":null},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","path":null,"size_bytes":5128,"size_tokens":null},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","path":null,"size_bytes":1056,"size_tokens":null},"client/src/pages/home.tsx":{"content":"import Header from \"@/components/Header\";\nimport HeroSection from \"@/components/HeroSection\";\nimport JobListings from \"@/components/JobListings\";\nimport EmployerSection from \"@/components/EmployerSection\";\nimport PostJobSection from \"@/components/PostJobSection\";\nimport Footer from \"@/components/Footer\";\nimport { AdminDashboard } from \"@/pages/AdminDashboard\";\nimport { EmployerDashboard } from \"@/pages/EmployerDashboard\";\nimport { JobSeekerApplications } from \"@/components/JobSeekerApplications\";\nimport JobSeekerDashboard from \"@/components/JobSeekerDashboard\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useState } from \"react\";\nimport PiliBackground from \"@assets/Pili.jpeg\";\n\nexport default function Home() {\n  const [userType, setUserType] = useState<\"seeker\" | \"employer\">(\"seeker\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [locationFilter, setLocationFilter] = useState(\"Pili (All Areas)\");\n  const { user, isAuthenticated, isLoading } = useAuth();\n\n  // Show loading state while checking authentication\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Show role-based dashboards for authenticated users\n  if (isAuthenticated && user) {\n    // Admin Dashboard\n    if (user.role === \"admin\") {\n      return (\n        <div className=\"min-h-screen bg-gray-50\">\n          <Header userType={userType} setUserType={setUserType} />\n          <AdminDashboard />\n          <Footer />\n        </div>\n      );\n    }\n    \n    // Employer Dashboard\n    if (user.role === \"employer\") {\n      return (\n        <div className=\"min-h-screen bg-gray-50\">\n          <Header userType={userType} setUserType={setUserType} />\n          <EmployerDashboard />\n          <Footer />\n        </div>\n      );\n    }\n    \n    // Job Seeker - Show regular job listings with navigation to applications\n    return (\n      <div \n        className=\"min-h-screen relative\"\n        style={{\n          backgroundImage: `linear-gradient(rgba(249, 250, 251, 0.95), rgba(249, 250, 251, 0.95)), url(${PiliBackground})`,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat',\n          backgroundAttachment: 'fixed'\n        }}\n      >\n        <Header userType={userType} setUserType={setUserType} />\n        <JobSeekerDashboard \n          searchQuery={searchQuery}\n          setSearchQuery={setSearchQuery}\n          locationFilter={locationFilter}\n          setLocationFilter={setLocationFilter}\n        />\n        <Footer />\n      </div>\n    );\n  }\n\n  // Show different content based on user type for logged out users\n  if (userType === \"employer\") {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <Header userType={userType} setUserType={setUserType} />\n        <div \n          className=\"text-white py-16 relative\"\n          style={{\n            backgroundImage: `linear-gradient(rgba(37, 99, 235, 0.8), rgba(29, 78, 216, 0.8)), url(${PiliBackground})`,\n            backgroundSize: 'cover',\n            backgroundPosition: 'center',\n            backgroundRepeat: 'no-repeat'\n          }}\n        >\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n            <h2 className=\"text-4xl font-bold mb-4\">Post Jobs & Find Talent</h2>\n            <p className=\"text-xl text-blue-100 mb-8\">\n              Connect with qualified job seekers in Pili, Camarines Sur\n            </p>\n          </div>\n        </div>\n        <PostJobSection />\n        <Footer />\n      </div>\n    );\n  }\n\n  // Regular job board interface for job seekers\n  return (\n    <div \n      className=\"min-h-screen relative\"\n      style={{\n        backgroundImage: `linear-gradient(rgba(249, 250, 251, 0.95), rgba(249, 250, 251, 0.95)), url(${PiliBackground})`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat',\n        backgroundAttachment: 'fixed'\n      }}\n    >\n      <Header userType={userType} setUserType={setUserType} />\n      <HeroSection \n        searchQuery={searchQuery}\n        setSearchQuery={setSearchQuery}\n        locationFilter={locationFilter}\n        setLocationFilter={setLocationFilter}\n      />\n      <JobListings \n        searchQuery={searchQuery}\n        locationFilter={locationFilter}\n      />\n      <PostJobSection />\n      <Footer />\n    </div>\n  );\n}\n","path":null,"size_bytes":4625,"size_tokens":null},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","path":null,"size_bytes":140,"size_tokens":null},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg max-h-[90vh] translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 overflow-y-auto data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","path":null,"size_bytes":3877,"size_tokens":null},"client/src/components/admin/ActivityTrends.tsx":{"content":"\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, LineChart, Line } from 'recharts';\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface ActivityData {\n  date: string;\n  jobsPosted: number;\n  applications: number;\n  newUsers: number;\n}\n\nexport default function ActivityTrends() {\n  const { data: activityData, isLoading } = useQuery({\n    queryKey: [\"/api/admin/activity-trends\"],\n    queryFn: () => apiRequest(\"/api/admin/activity-trends\", \"GET\"),\n  });\n\n  if (isLoading) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>Activity Trends</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"h-80 flex items-center justify-center\">\n            Loading activity data...\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!activityData || activityData.length === 0) {\n    return (\n      <Card>\n        <CardHeader>\n          <CardTitle>Activity Trends</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"h-80 flex items-center justify-center text-gray-500\">\n            No activity data available\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Activity Trends</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"h-80\">\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <LineChart data={activityData}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis \n                dataKey=\"date\" \n                tick={{ fontSize: 12 }}\n                tickFormatter={(value) => new Date(value).toLocaleDateString()}\n              />\n              <YAxis tick={{ fontSize: 12 }} />\n              <Tooltip \n                labelFormatter={(value) => new Date(value).toLocaleDateString()}\n                formatter={(value, name) => [value, name === 'jobsPosted' ? 'Jobs Posted' : name === 'applications' ? 'Applications' : 'New Users']}\n              />\n              <Line \n                type=\"monotone\" \n                dataKey=\"jobsPosted\" \n                stroke=\"#3b82f6\" \n                strokeWidth={2}\n                name=\"Jobs Posted\"\n              />\n              <Line \n                type=\"monotone\" \n                dataKey=\"applications\" \n                stroke=\"#10b981\" \n                strokeWidth={2}\n                name=\"Applications\"\n              />\n              <Line \n                type=\"monotone\" \n                dataKey=\"newUsers\" \n                stroke=\"#f59e0b\" \n                strokeWidth={2}\n                name=\"New Users\"\n              />\n            </LineChart>\n          </ResponsiveContainer>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","path":null,"size_bytes":2901,"size_tokens":null},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","path":null,"size_bytes":791,"size_tokens":null},"client/src/hooks/useAuth.ts":{"content":"import { useState, useEffect } from \"react\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport interface User {\n  id: number;\n  username: string;\n  email: string;\n  role: \"jobseeker\" | \"employer\" | \"admin\";\n  firstName?: string;\n  lastName?: string;\n  phone?: string;\n}\n\nexport function useAuth() {\n  const [user, setUser] = useState<User | null>(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [canPostJobs, setCanPostJobs] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchUser() {\n      try {\n        const response = await apiRequest(\"/api/auth/me\", \"GET\");\n        setUser(response.user);\n        setIsAuthenticated(true);\n        setCanPostJobs(response.user.role === \"employer\" || response.user.role === \"admin\");\n      } catch {\n        setIsAuthenticated(false);\n        setUser(null);\n        setCanPostJobs(false);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    fetchUser();\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    try {\n      const response = await apiRequest(\"/api/auth/login\", \"POST\", {\n        email,\n        password,\n      });\n      setUser(response.user);\n      setIsAuthenticated(true);\n      setCanPostJobs(response.user.role === \"employer\" || response.user.role === \"admin\");\n      setIsLoading(false);\n      return { success: true };\n    } catch (error: any) {\n      return { success: false, error: error.message || \"Login failed\" };\n    }\n  };\n\n  const register = async (userData: {\n    username: string;\n    email: string;\n    password: string;\n    role: \"jobseeker\" | \"employer\";\n    firstName?: string;\n    lastName?: string;\n    phone?: string;\n  }) => {\n    try {\n      const response = await apiRequest(\"/api/auth/register\", \"POST\", userData);\n      setUser(response.user);\n      setIsAuthenticated(true);\n      setCanPostJobs(response.user.role === \"employer\" || response.user.role === \"admin\");\n      setIsLoading(false);\n      return { success: true };\n    } catch (error: any) {\n      return { success: false, error: error.message || \"Registration failed\" };\n    }\n  };\n\n  const logout = async () => {\n    try {\n      await apiRequest(\"/api/auth/logout\", \"POST\");\n    } catch {\n      // Continue with logout even if API call fails\n    } finally {\n      // Clear all user state immediately\n      setUser(null);\n      setIsAuthenticated(false);\n      setCanPostJobs(false);\n      setIsLoading(false);\n      \n      // Force page reload to ensure clean state\n      window.location.reload();\n    }\n  };\n\n  const refreshUser = async () => {\n    try {\n      const response = await apiRequest(\"/api/auth/me\", \"GET\");\n      setUser(response.user);\n      setIsAuthenticated(true);\n      setCanPostJobs(response.user.role === \"employer\" || response.user.role === \"admin\");\n    } catch {\n      setIsAuthenticated(false);\n      setUser(null);\n      setCanPostJobs(false);\n    }\n  };\n\n  return {\n    user,\n    isAuthenticated,\n    canPostJobs,\n    isLoading,\n    login,\n    register,\n    logout,\n    refreshUser,\n  };\n}","path":null,"size_bytes":3097,"size_tokens":null},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","path":null,"size_bytes":1901,"size_tokens":null},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Home from \"@/pages/home\";\nimport NotFound from \"@/pages/not-found\";\nimport { AdminDashboard } from \"@/pages/AdminDashboard\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Home} />\n      <Route path=\"/admin\" component={AdminDashboard} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","path":null,"size_bytes":813,"size_tokens":null},"server/db.local.ts":{"content":"import { drizzle } from 'drizzle-orm/better-sqlite3';\nimport Database from 'better-sqlite3';\nimport * as schema from \"@shared/schema\";\n\n// Use SQLite for local development\nconst sqlite = new Database('pili_jobs.db');\nexport const db = drizzle(sqlite, { schema });\nexport const pool = null; // Not used for SQLite","path":null,"size_bytes":312,"size_tokens":null},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto max-h-[90vh] flex-col rounded-t-[10px] border bg-background overflow-y-auto\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","path":null,"size_bytes":3050,"size_tokens":null},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport {\n  sendApplicationConfirmationSMS,\n  sendEmployerNotificationSMS,\n  sendApplicationStatusUpdateSMS,\n  sendEmployerVerificationApprovalSMS,\n  sendEmployerVerificationRejectionSMS,\n} from \"./textbee\";\nimport cookieParser from \"cookie-parser\";\nimport { storage } from \"./storage\";\nimport {\n  hashPassword,\n  verifyPassword,\n  createSession,\n  validateSession,\n  destroySession,\n  requireAuth,\n  requireEmployer,\n  requireAdmin,\n  type AuthenticatedRequest,\n} from \"./auth\";\nimport {\n  insertJobSchema,\n  insertApplicationSchema,\n  insertEmployerSchema,\n  insertCategorySchema,\n  insertSavedJobSchema,\n  insertJobAlertSchema,\n  updateApplicationSchema,\n  registerUserSchema,\n  loginUserSchema,\n  type Job,\n} from \"@shared/schema\";\nimport { z } from \"zod\";\nimport * as XLSX from 'xlsx';\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Middleware\n  app.use(cookieParser());\n\n  // Authentication routes\n  app.post(\"/api/auth/register\", async (req, res) => {\n    try {\n      const validatedData = registerUserSchema.parse(req.body);\n\n      // Check if user already exists\n      const existingUser = await storage.getUserByEmail(validatedData.email);\n      if (existingUser) {\n        return res\n          .status(400)\n          .json({ message: \"An account with this email already exists\" });\n      }\n\n      // Hash password and create user\n      const hashedPassword = await hashPassword(validatedData.password);\n      const user = await storage.createUser({\n        email: validatedData.email,\n        passwordHash: hashedPassword,\n        role: validatedData.role,\n        firstName: validatedData.firstName,\n        middleName: validatedData.middleName,\n        lastName: validatedData.lastName,\n        phone: validatedData.phone,\n      });\n\n      // Create session\n      const sessionToken = await createSession(user.id);\n      res.cookie(\"session\", sessionToken, {\n        httpOnly: true,\n        secure: process.env.NODE_ENV === \"production\",\n        maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days\n      });\n\n      // Return user without password\n      const { passwordHash, ...userResponse } = user;\n      res.status(201).json({ user: userResponse });\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          message: \"Invalid registration data\",\n          errors: error.errors,\n        });\n      }\n\n      // Handle SQLite constraint errors\n      if (error && typeof error === 'object' && 'message' in error) {\n        const errorMessage = (error as Error).message;\n        if (errorMessage && errorMessage.includes(\"UNIQUE constraint failed\")) {\n          if (errorMessage.includes(\"users.email\")) {\n            return res\n              .status(400)\n              .json({ message: \"An account with this email already exists\" });\n          }\n          if (errorMessage.includes(\"users.phone\")) {\n            return res.status(400).json({\n              message: \"An account with this phone number already exists\",\n            });\n          }\n        }\n      }\n\n      console.error(\"Registration error:\", error);\n      res\n        .status(500)\n        .json({ message: \"Failed to register user. Please try again.\" });\n    }\n  });\n\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const validatedData = loginUserSchema.parse(req.body);\n\n      const user = await storage.getUserByEmail(validatedData.email);\n      if (!user) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      const isValidPassword = await verifyPassword(\n        validatedData.password,\n        user.passwordHash\n      );\n      if (!isValidPassword) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      // Create session\n      const sessionToken = await createSession(user.id);\n      res.cookie(\"session\", sessionToken, {\n        httpOnly: true,\n        secure: process.env.NODE_ENV === \"production\",\n        maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days\n      });\n\n      // Return user without password\n      const { passwordHash, ...userResponse } = user;\n      res.json({ user: userResponse });\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          message: \"Invalid login data\",\n          errors: error.errors,\n        });\n      }\n      console.error(\"Login error:\", error);\n      res.status(500).json({ message: \"Failed to login\" });\n    }\n  });\n\n  app.post(\n    \"/api/auth/logout\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const sessionToken = req.cookies.session;\n        if (sessionToken) {\n          await destroySession(sessionToken);\n        }\n        res.clearCookie(\"session\");\n        res.json({ message: \"Logged out successfully\" });\n      } catch (error) {\n        console.error(\"Logout error:\", error);\n        res.status(500).json({ message: \"Failed to logout\" });\n      }\n    }\n  );\n\n  app.get(\n    \"/api/auth/me\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        const { passwordHash, ...userResponse } = user;\n        res.json({ user: userResponse });\n      } catch (error) {\n        console.error(\"Get user error:\", error);\n        res.status(500).json({ message: \"Failed to get user\" });\n      }\n    }\n  );\n\n  app.put(\n    \"/api/auth/profile\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const { \n          firstName, \n          lastName, \n          email, \n          phone, \n          address,\n          skills,\n          desiredRoles,\n          experienceLevel,\n          preferredLocation\n        } = req.body;\n\n        // Check if email is being changed and if it's already taken by another user\n        if (email) {\n          const existingUser = await storage.getUserByEmail(email);\n          if (existingUser && existingUser.id !== req.user!) {\n            return res.status(400).json({ message: \"Email already in use\" });\n          }\n        }\n\n        const updatedUser = await storage.updateUser(req.user!, {\n          firstName,\n          lastName,\n          email,\n          phone,\n          address,\n          skills,\n          desiredRoles,\n          experienceLevel,\n          preferredLocation,\n          updatedAt: new Date(),\n        });\n\n        if (!updatedUser) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        const { passwordHash, ...userResponse } = updatedUser;\n        res.json({ user: userResponse });\n      } catch (error) {\n        console.error(\"Update profile error:\", error);\n        res.status(500).json({ message: \"Failed to update profile\" });\n      }\n    }\n  );\n\n  // Get applications for current job seeker\n  app.get(\n    \"/api/jobseeker/applications\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role === \"employer\" || user.role === \"admin\") {\n          return res\n            .status(403)\n            .json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        const applications = await storage.getApplicationsByApplicant(\n          user.email\n        );\n        res.json(applications);\n      } catch (error) {\n        console.error(\"Get job seeker applications error:\", error);\n        res.status(500).json({ message: \"Failed to fetch applications\" });\n      }\n    }\n  );\n\n  // Get all jobs with optional search, filters, and pagination\n  app.get(\"/api/jobs\", async (req, res) => {\n    try {\n      const { q, location, type, category, salary, page, limit, jobTypes } =\n        req.query;\n\n      // Parse pagination parameters\n      const currentPage = parseInt(page as string) || 1;\n      const pageSize = parseInt(limit as string) || 10;\n      const offset = (currentPage - 1) * pageSize;\n\n      // Parse jobTypes from comma-separated string\n      const jobTypeArray = jobTypes\n        ? (jobTypes as string).split(\",\").filter((t) => t.trim())\n        : [];\n\n      // Debug logging\n      console.log(\"Search parameters:\", {\n        q: q,\n        location: location,\n        type: type,\n        category: category,\n        salary: salary,\n        jobTypes: jobTypeArray,\n      });\n\n      let jobs;\n      let totalCount;\n\n      // Check if any filter is applied\n      const searchQuery = q ? q.toString().trim() : \"\";\n      const hasFilters =\n        searchQuery ||\n        (location &&\n          location !== \"Pili (All Areas)\" &&\n          location.toString().trim()) ||\n        (type && type.toString().trim()) ||\n        (category &&\n          category !== \"All Categories\" &&\n          category.toString().trim()) ||\n        (salary && salary !== \"Any Salary\" && salary.toString().trim()) ||\n        jobTypeArray.length > 0;\n\n      if (hasFilters) {\n        // Get total count for search results (without pagination)\n        const allSearchResults = await storage.searchJobs(searchQuery, {\n          location: location as string,\n          type: type as string,\n          category: category as string,\n          salary: salary as string,\n          jobTypes: jobTypeArray,\n        });\n        totalCount = allSearchResults.length;\n\n        // Get paginated search results\n        jobs = await storage.searchJobs(\n          searchQuery,\n          {\n            location: location as string,\n            type: type as string,\n            category: category as string,\n            salary: salary as string,\n            jobTypes: jobTypeArray,\n          },\n          {\n            limit: pageSize,\n            offset: offset,\n          }\n        );\n      } else {\n        // Get all jobs with pagination\n        const allJobs = await storage.getAllJobs();\n        totalCount = allJobs.length;\n\n        // Apply pagination to all jobs\n        jobs = allJobs.slice(offset, offset + pageSize);\n      }\n\n      // Check if user is authenticated and is a job seeker\n      const sessionToken = req.cookies?.session;\n      let userId: number | null = null;\n      if (sessionToken) {\n        try {\n          const userObject = await validateSession(sessionToken);\n          if (userObject) {\n            userId = userObject.id;\n          }\n        } catch (error) {\n          // Session invalid, continue without user context\n        }\n      }\n\n      // If authenticated job seeker with complete profile, add match scores and sort\n      if (userId) {\n        const user = await storage.getUserById(userId);\n        if (user && user.role === 'jobseeker') {\n          const hasCompleteProfile = user.skills && user.desiredRoles && user.experienceLevel && user.preferredLocation;\n\n          if (hasCompleteProfile) {\n            // Calculate match scores for all jobs\n            const jobsWithScores = await Promise.all(\n              jobs.map(async (job) => {\n                const scores = await storage.calculateJobMatch(userId, job.id);\n                return {\n                  ...job,\n                  matchScore: scores.matchScore,\n                  skillMatch: scores.skillMatch,\n                  locationMatch: scores.locationMatch,\n                  roleMatch: scores.roleMatch\n                };\n              })\n            );\n\n            // Sort by match score (highest first), then by date for 0% matches\n            jobs = jobsWithScores.sort((a, b) => {\n              if (b.matchScore !== a.matchScore) {\n                return b.matchScore - a.matchScore;\n              }\n              // For equal match scores (including 0), sort by newest first\n              return new Date(b.postedAt).getTime() - new Date(a.postedAt).getTime();\n            });\n          }\n        }\n      }\n\n      // Disable caching for authenticated users to ensure match scores are always fresh\n      if (userId) {\n        res.setHeader('Cache-Control', 'no-cache, no-store, must-revalidate');\n        res.setHeader('Pragma', 'no-cache');\n        res.setHeader('Expires', '0');\n      }\n\n      res.json({\n        jobs,\n        pagination: {\n          currentPage,\n          pageSize,\n          totalCount,\n          totalPages: Math.ceil(totalCount / pageSize),\n          hasNext: currentPage < Math.ceil(totalCount / pageSize),\n          hasPrevious: currentPage > 1,\n        },\n      });\n    } catch (error) {\n      console.error(\"Error fetching jobs:\", error);\n      res.status(500).json({ message: \"Failed to fetch jobs\" });\n    }\n  });\n\n  // Get a specific job\n  app.get(\"/api/jobs/:id\", async (req, res) => {\n    try {\n      const jobId = parseInt(req.params.id);\n      const job = await storage.getJob(jobId);\n\n      if (!job) {\n        return res.status(404).json({ message: \"Job not found\" });\n      }\n\n      res.json(job);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch job\" });\n    }\n  });\n\n  // Create a new job (employers and admins only)\n  app.post(\n    \"/api/jobs\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const validatedData = insertJobSchema.parse(req.body);\n\n        // Set the employerId to the current user if not provided (for admins)\n        if (!validatedData.employerId) {\n          validatedData.employerId = req.user!;\n        }\n\n        const job = await storage.createJob(validatedData);\n        res.status(201).json(job);\n      } catch (error) {\n        if (error instanceof z.ZodError) {\n          return res.status(400).json({\n            message: \"Invalid job data\",\n            errors: error.errors,\n          });\n        }\n        console.error(\"Create job error:\", error);\n        res.status(500).json({ message: \"Failed to create job\" });\n      }\n    }\n  );\n\n  // Apply for a job\n  app.post(\"/api/jobs/:id/apply\", async (req, res) => {\n    try {\n      const jobId = parseInt(req.params.id);\n      const job = await storage.getJob(jobId);\n\n      if (!job) {\n        return res.status(404).json({ message: \"Job not found\" });\n      }\n\n      const applicationData = {\n        ...req.body,\n        jobId: jobId,\n      };\n\n      const validatedData = insertApplicationSchema.parse(applicationData);\n      const application = await storage.createApplication(validatedData);\n\n      // Send SMS confirmation to applicant\n      try {\n        const smsSuccess = await sendApplicationConfirmationSMS(\n          validatedData.phone,\n          `${validatedData.firstName} ${validatedData.lastName}`,\n          job.title,\n          job.company\n        );\n\n        if (smsSuccess) {\n          // Update application to mark SMS as sent\n          await storage.updateApplication(application.id, {\n            smsNotificationSent: true,\n          });\n        }\n\n        // Send notification to employer if phone number is available\n        let employerPhone = job.phone;\n\n        // If job doesn't have phone, try to get employer's registered phone\n        if (!employerPhone && job.employerId) {\n          const employer = await storage.getUserById(job.employerId);\n          employerPhone = employer?.phone || null;\n        }\n\n        if (employerPhone) {\n          await sendEmployerNotificationSMS(\n            employerPhone,\n            `${validatedData.firstName} ${validatedData.lastName}`,\n            job.title\n          );\n        }\n      } catch (smsError) {\n        console.error(\"SMS notification error:\", smsError);\n        // Don't fail the application submission if SMS fails\n      }\n\n      res.status(201).json(application);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          message: \"Invalid application data\",\n          errors: error.errors,\n        });\n      }\n      res.status(500).json({ message: \"Failed to submit application\" });\n    }\n  });\n\n  // Get applications for a job\n  app.get(\"/api/jobs/:id/applications\", async (req, res) => {\n    try {\n      const jobId = parseInt(req.params.id);\n      const applications = await storage.getApplicationsForJob(jobId);\n      res.json(applications);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch applications\" });\n    }\n  });\n\n  // Get enhanced stats for dashboard\n  app.get(\"/api/stats\", async (req, res) => {\n    try {\n      const stats = await storage.getJobStats();\n\n      // Convert to expected format with real data\n      const formattedStats = {\n        activeJobs: stats.activeJobs,\n        employers: stats.totalEmployers,\n        hiredThisMonth: stats.applicationsToday, // Use real daily applications as proxy\n        jobSeekers: stats.totalJobSeekers, // Use real job seeker count\n        totalJobs: stats.totalJobs,\n        totalApplications: stats.totalApplications,\n        categoriesWithCounts: stats.categoriesWithCounts,\n        recentJobs: stats.recentJobs.slice(0, 3), // Only show 3 recent jobs\n      };\n\n      res.json(formattedStats);\n    } catch (error) {\n      console.error(\"Error fetching stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch stats\" });\n    }\n  });\n\n  // Increment job view count\n  app.post(\"/api/jobs/:id/view\", async (req, res) => {\n    try {\n      const jobId = parseInt(req.params.id);\n      await storage.incrementJobViews(jobId);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error incrementing job views:\", error);\n      res.status(500).json({ message: \"Failed to update view count\" });\n    }\n  });\n\n  // Get featured jobs\n  app.get(\"/api/jobs/featured\", async (req, res) => {\n    try {\n      const featuredJobs = await storage.getFeaturedJobs();\n      res.json(featuredJobs);\n    } catch (error) {\n      console.error(\"Error fetching featured jobs:\", error);\n      res.status(500).json({ message: \"Failed to fetch featured jobs\" });\n    }\n  });\n\n  // Seed database (admin only)\n  app.post(\"/api/admin/seed-database\", requireAdmin, async (req, res) => {\n    try {\n      const { seedDatabase } = await import(\"./seed\");\n      const result = await seedDatabase();\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error seeding database:\", error);\n      res.status(500).json({ message: \"Failed to seed database\" });\n    }\n  });\n\n  // Get activity trends (admin only)\n  app.get(\"/api/admin/activity-trends\", requireAdmin, async (req, res) => {\n    try {\n      const activityData = await storage.getActivityTrends();\n      res.json(activityData);\n    } catch (error) {\n      console.error(\"Error fetching activity trends:\", error);\n      res.status(500).json({ message: \"Failed to fetch activity trends\" });\n    }\n  });\n\n  // File upload for resumes with validation\n  app.post(\"/api/upload/resume\", async (req, res) => {\n    try {\n      // Handle JSON with base64 data\n      const resumeData = req.body;\n\n      if (!resumeData || typeof resumeData.content !== \"string\") {\n        return res\n          .status(400)\n          .json({ message: \"Invalid resume data - content field required\" });\n      }\n\n      // Validate file type from base64 header\n      const allowedTypes = [\n        \"data:application/pdf\",\n        \"data:application/msword\",\n        \"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n        \"data:text/plain\",\n      ];\n      const hasValidType = allowedTypes.some((type) =>\n        resumeData.content.startsWith(type)\n      );\n\n      if (!hasValidType) {\n        return res.status(400).json({\n          message:\n            \"Invalid file type. Only PDF, Word documents, and text files are allowed.\",\n        });\n      }\n\n      // Check file size (approximate from base64)\n      const base64Data = resumeData.content.split(\",\")[1] || resumeData.content;\n      const sizeInBytes = (base64Data.length * 3) / 4;\n      const maxSize = 5 * 1024 * 1024; // 5MB\n\n      if (sizeInBytes > maxSize) {\n        return res\n          .status(400)\n          .json({ message: \"File too large. Maximum size is 5MB.\" });\n      }\n\n      // Store the complete base64 data URL for later download\n      const uniqueId = `resume_${Date.now()}_${Math.random()\n        .toString(36)\n        .substr(2, 9)}`;\n\n      res.json({\n        success: true,\n        filePath: resumeData.content, // Store the complete base64 data URL\n        fileId: uniqueId,\n        message: \"Resume uploaded successfully\",\n      });\n    } catch (error) {\n      console.error(\"Error uploading resume:\", error);\n      res.status(500).json({ message: \"Failed to upload resume\" });\n    }\n  });\n\n  // File upload for cover letters with validation\n  app.post(\"/api/upload/cover-letter\", async (req, res) => {\n    try {\n      // Handle JSON with base64 data\n      const coverLetterData = req.body;\n\n      if (!coverLetterData || typeof coverLetterData.content !== \"string\") {\n        return res\n          .status(400)\n          .json({ message: \"Invalid cover letter data - content field required\" });\n      }\n\n      // Validate file type from base64 header\n      const allowedTypes = [\n        \"data:application/pdf\",\n        \"data:application/msword\",\n        \"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n        \"data:text/plain\",\n      ];\n      const hasValidType = allowedTypes.some((type) =>\n        coverLetterData.content.startsWith(type)\n      );\n\n      if (!hasValidType) {\n        return res.status(400).json({\n          message:\n            \"Invalid file type. Only PDF, Word documents, and text files are allowed.\",\n        });\n      }\n\n      // Check file size (approximate from base64)\n      const base64Data = coverLetterData.content.split(\",\")[1] || coverLetterData.content;\n      const sizeInBytes = (base64Data.length * 3) / 4;\n      const maxSize = 2 * 1024 * 1024; // 2MB\n\n      if (sizeInBytes > maxSize) {\n        return res\n          .status(400)\n          .json({ message: \"File too large. Maximum size is 2MB.\" });\n      }\n\n      // Store the complete base64 data URL for later download\n      const uniqueId = `cover_letter_${Date.now()}_${Math.random()\n        .toString(36)\n        .substr(2, 9)}`;\n\n      res.json({\n        success: true,\n        filePath: coverLetterData.content, // Store the complete base64 data URL\n        fileId: uniqueId,\n        message: \"Cover letter uploaded successfully\",\n      });\n    } catch (error) {\n      console.error(\"Error uploading cover letter:\", error);\n      res.status(500).json({ message: \"Failed to upload cover letter\" });\n    }\n  });\n\n  // Download resume endpoint\n  app.get(\"/api/download/resume/:applicationId\", async (req, res) => {\n    try {\n      const applicationId = parseInt(req.params.applicationId);\n      const application = await storage.getApplicationById(applicationId);\n\n      if (!application || !application.resume) {\n        return res.status(404).json({ message: \"Resume not found\" });\n      }\n\n      // Check if resume is a base64 data URL\n      if (application.resume.startsWith(\"data:\")) {\n        const mimeMatch = application.resume.match(/data:([^;]+);base64,(.+)/);\n        if (mimeMatch) {\n          const mimeType = mimeMatch[1];\n          const base64Data = mimeMatch[2];\n          const buffer = Buffer.from(base64Data, \"base64\");\n\n          // Set appropriate headers\n          let extension = \".pdf\";\n          if (mimeType === \"application/msword\") {\n            extension = \".doc\";\n          } else if (\n            mimeType ===\n            \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n          ) {\n            extension = \".docx\";\n          } else if (mimeType === \"text/plain\") {\n            extension = \".txt\";\n          }\n\n          const fileName = `${application.firstName}_${application.lastName}_resume${extension}`;\n\n          res.setHeader(\"Content-Type\", mimeType);\n          res.setHeader(\n            \"Content-Disposition\",\n            `attachment; filename=\"${fileName}\"`\n          );\n          res.setHeader(\"Content-Length\", buffer.length);\n\n          return res.send(buffer);\n        }\n      }\n\n      // Fallback for old text-based resume storage\n      res.setHeader(\"Content-Type\", \"text/plain\");\n      res.setHeader(\n        \"Content-Disposition\",\n        `attachment; filename=\"${application.firstName}_${application.lastName}_resume.txt\"`\n      );\n      res.send(application.resume);\n    } catch (error) {\n      console.error(\"Error downloading resume:\", error);\n      res.status(500).json({ message: \"Failed to download resume\" });\n    }\n  });\n\n  // Download cover letter endpoint\n  app.get(\"/api/download/cover-letter/:applicationId\", async (req, res) => {\n    try {\n      const applicationId = parseInt(req.params.applicationId);\n      const application = await storage.getApplicationById(applicationId);\n\n      if (!application || !application.coverLetter) {\n        return res.status(404).json({ message: \"Cover letter not found\" });\n      }\n\n      // Check if cover letter is a base64 data URL (file upload)\n      if (application.coverLetter.startsWith(\"data:\")) {\n        const mimeMatch = application.coverLetter.match(/data:([^;]+);base64,(.+)/);\n        if (mimeMatch) {\n          const mimeType = mimeMatch[1];\n          const base64Data = mimeMatch[2];\n          const buffer = Buffer.from(base64Data, \"base64\");\n\n          // Set appropriate headers\n          let extension = \".pdf\";\n          if (mimeType === \"application/msword\") {\n            extension = \".doc\";\n          } else if (\n            mimeType ===\n            \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n          ) {\n            extension = \".docx\";\n          } else if (mimeType === \"text/plain\") {\n            extension = \".txt\";\n          }\n\n          const fileName = `${application.firstName}_${application.lastName}_cover_letter${extension}`;\n\n          res.setHeader(\"Content-Type\", mimeType);\n          res.setHeader(\n            \"Content-Disposition\",\n            `attachment; filename=\"${fileName}\"`\n          );\n          res.setHeader(\"Content-Length\", buffer.length);\n\n          return res.send(buffer);\n        }\n      }\n\n      // Fallback for text-based cover letter storage\n      res.setHeader(\"Content-Type\", \"text/plain\");\n      res.setHeader(\n        \"Content-Disposition\",\n        `attachment; filename=\"${application.firstName}_${application.lastName}_cover_letter.txt\"`\n      );\n      res.send(application.coverLetter);\n    } catch (error) {\n      console.error(\"Error downloading cover letter:\", error);\n      res.status(500).json({ message: \"Failed to download cover letter\" });\n    }\n  });\n\n  // Get job seeker applications - properly filtered by authenticated user\n  app.get(\n    \"/api/jobseeker/applications\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role !== \"jobseeker\") {\n          return res\n            .status(403)\n            .json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        const applications = await storage.getApplicationsByApplicant(\n          user.email\n        );\n        res.json(applications);\n      } catch (error) {\n        console.error(\"Error fetching job seeker applications:\", error);\n        res.status(500).json({ message: \"Failed to fetch applications\" });\n      }\n    }\n  );\n\n  // Update application status (for employers)\n  app.patch(\"/api/applications/:id\", async (req, res) => {\n    try {\n      const applicationId = parseInt(req.params.id);\n      const { status, notes } = req.body;\n\n      // Get the current application to access applicant and job details\n      const currentApplication = await storage.getApplicationById(\n        applicationId\n      );\n      if (!currentApplication) {\n        return res.status(404).json({ message: \"Application not found\" });\n      }\n\n      // Get job details for the notification\n      const job = await storage.getJob(currentApplication.jobId);\n      if (!job) {\n        return res.status(404).json({ message: \"Job not found\" });\n      }\n\n      const updatedApplication = await storage.updateApplication(\n        applicationId,\n        {\n          status,\n          notes,\n          updatedAt: new Date(),\n        }\n      );\n\n      // Send SMS notification to job seeker about status change\n      if (updatedApplication && currentApplication.phone) {\n        try {\n          await sendApplicationStatusUpdateSMS(\n            currentApplication.phone,\n            `${currentApplication.firstName} ${currentApplication.lastName}`,\n            job.title,\n            job.company,\n            status\n          );\n        } catch (smsError) {\n          console.error(\"SMS notification error:\", smsError);\n          // Don't fail the status update if SMS fails\n        }\n      }\n\n      res.json(updatedApplication);\n    } catch (error) {\n      console.error(\"Error updating application:\", error);\n      res.status(500).json({ message: \"Failed to update application\" });\n    }\n  });\n\n  // Update job posting (for employers)\n  app.patch(\n    \"/api/jobs/:id\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const jobId = parseInt(req.params.id);\n        const jobData = req.body;\n\n        // Verify the job belongs to the current employer\n        const existingJob = await storage.getJob(jobId);\n        if (!existingJob) {\n          return res.status(404).json({ message: \"Job not found\" });\n        }\n\n        const user = await storage.getUserById(req.user!);\n        if (existingJob.employerId !== req.user! && user?.role !== \"admin\") {\n          return res\n            .status(403)\n            .json({ message: \"Not authorized to update this job\" });\n        }\n\n        const updatedJob = await storage.updateJob(jobId, {\n          ...jobData,\n          updatedAt: new Date(),\n        });\n\n        res.json(updatedJob);\n      } catch (error) {\n        console.error(\"Error updating job:\", error);\n        res.status(500).json({ message: \"Failed to update job\" });\n      }\n    }\n  );\n\n  // Delete a job posting (for employers)\n  app.delete(\n    \"/api/jobs/:id\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const jobId = parseInt(req.params.id);\n\n        // Verify the job belongs to the current employer\n        const existingJob = await storage.getJob(jobId);\n        if (!existingJob) {\n          return res.status(404).json({ message: \"Job not found\" });\n        }\n\n        const user = await storage.getUserById(req.user!);\n        if (existingJob.employerId !== req.user! && user?.role !== \"admin\") {\n          return res\n            .status(403)\n            .json({ message: \"Not authorized to delete this job\" });\n        }\n\n        const success = await storage.deleteJob(jobId);\n        if (!success) {\n          return res.status(500).json({ message: \"Failed to delete job\" });\n        }\n\n        res.json({ message: \"Job deleted successfully\" });\n      } catch (error) {\n        console.error(\"Error deleting job:\", error);\n        res.status(500).json({ message: \"Failed to delete job\" });\n      }\n    }\n  );\n\n  // Job Matching Routes\n  app.post(\n    \"/api/jobseeker/match-feedback\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const { jobId, feedback } = req.body;\n\n        if (!jobId || !feedback || !['thumbs_up', 'thumbs_down'].includes(feedback)) {\n          return res.status(400).json({ message: \"Invalid request\" });\n        }\n\n        await storage.updateMatchFeedback(req.user!, jobId, feedback);\n        res.json({ message: \"Feedback recorded\" });\n      } catch (error) {\n        console.error(\"Error recording feedback:\", error);\n        res.status(500).json({ message: \"Failed to record feedback\" });\n      }\n    }\n  );\n\n  // Get job recommendations for job seekers\n  app.get(\n    \"/api/jobseeker/recommendations\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role !== \"jobseeker\") {\n          return res.status(403).json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        console.log(\"Fetching recommendations for user:\", user.id, user.email);\n        console.log(\"User profile:\", {\n          skills: user.skills,\n          desiredRoles: user.desiredRoles,\n          experienceLevel: user.experienceLevel,\n          preferredLocation: user.preferredLocation\n        });\n\n        // Check if user has required profile data\n        if (!user.skills || !user.desiredRoles || !user.experienceLevel || !user.preferredLocation) {\n          console.log(\"User profile incomplete, returning empty recommendations\");\n          return res.json([]);\n        }\n\n        const recommendations = await storage.getJobRecommendations(user.id);\n        console.log(`Returning ${recommendations.length} recommendations`);\n        res.json(recommendations);\n      } catch (error) {\n        console.error(\"Error fetching job recommendations:\", error);\n        res.status(500).json({ message: \"Failed to fetch recommendations\" });\n      }\n    }\n  );\n\n  // Employer scouting - find job seekers by skills\n  app.post(\n    \"/api/employer/scout-candidates\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const { skills, experienceLevel, location } = req.body;\n\n        if (!skills || !Array.isArray(skills) || skills.length === 0) {\n          return res.status(400).json({ message: \"At least one skill is required\" });\n        }\n\n        const candidates = await storage.scoutCandidates({\n          skills,\n          experienceLevel,\n          location,\n        });\n\n        res.json(candidates);\n      } catch (error) {\n        console.error(\"Error scouting candidates:\", error);\n        res.status(500).json({ message: \"Failed to scout candidates\" });\n      }\n    }\n  );\n\n  // Employer-specific routes\n  app.get(\n    \"/api/employer/jobs\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const employerJobs = await storage.getJobsByEmployer(req.user!);\n        res.json(employerJobs);\n      } catch (error) {\n        console.error(\"Error fetching employer jobs:\", error);\n        res.status(500).json({ message: \"Failed to fetch employer jobs\" });\n      }\n    }\n  );\n\n  app.get(\n    \"/api/employer/applications\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const applications = await storage.getApplicationsByEmployer(req.user!);\n        res.json(applications);\n      } catch (error) {\n        console.error(\"Error fetching employer applications:\", error);\n        res.status(500).json({ message: \"Failed to fetch applications\" });\n      }\n    }\n  );\n\n  // Get jobs by category\n  app.get(\"/api/jobs/category/:category\", async (req, res) => {\n    try {\n      const category = req.params.category;\n      const jobs = await storage.getJobsByCategory(category);\n      res.json(jobs);\n    } catch (error) {\n      console.error(\"Error fetching jobs by category:\", error);\n      res.status(500).json({ message: \"Failed to fetch jobs by category\" });\n    }\n  });\n\n  // Categories routes\n  app.get(\"/api/categories\", async (req, res) => {\n    try {\n      const categories = await storage.getAllCategories();\n      res.json(categories);\n    } catch (error) {\n      console.error(\"Error fetching categories:\", error);\n      res.status(500).json({ message: \"Failed to fetch categories\" });\n    }\n  });\n\n  // Admin routes (requires admin role)\n  app.get(\n    \"/api/admin/stats\",\n    requireAdmin,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const stats = await storage.getAdminStats();\n        res.json(stats);\n      } catch (error) {\n        console.error(\"Error fetching admin stats:\", error);\n        res.status(500).json({ message: \"Failed to fetch admin stats\" });\n      }\n    }\n  );\n\n  app.get(\n    \"/api/admin/export-analytics\",\n    requireAdmin,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        console.log(\"Starting analytics export...\");\n        \n        // Fetch all analytics data with error handling\n        const stats = await storage.getAdminStats();\n        const categoryStats = await storage.getCategoryStats();\n        const jobTypeStats = await storage.getJobTypeStats();\n        const trends = await storage.getTrends();\n        const users = await storage.getAllUsers();\n        const jobs = await storage.getAllJobs({ includeInactive: true });\n        const applications = await storage.getAllApplicationsAdmin();\n\n        console.log(\"Data fetched successfully\");\n\n        // Create workbook\n        const workbook = XLSX.utils.book_new();\n\n        // Overview sheet\n        const overviewData = [\n          ['Metric', 'Value'],\n          ['Total Users', stats?.totalUsers || 0],\n          ['Total Employers', stats?.totalEmployers || 0],\n          ['Total Job Seekers', stats?.totalJobSeekers || 0],\n          ['Total Jobs', stats?.totalJobs || 0],\n          ['Active Jobs', stats?.activeJobs || 0],\n          ['Featured Jobs', stats?.featuredJobs || 0],\n          ['Total Applications', stats?.totalApplications || 0],\n          ['Pending Applications', stats?.pendingApplications || 0],\n          ['Applications Today', stats?.applicationsToday || 0],\n          ['Jobs Posted Today', stats?.jobsPostedToday || 0],\n          ['Users Registered Today', stats?.usersRegisteredToday || 0],\n          ['Job Views Today', stats?.jobViewsToday || 0],\n        ];\n        const overviewSheet = XLSX.utils.aoa_to_sheet(overviewData);\n        XLSX.utils.book_append_sheet(workbook, overviewSheet, 'Overview');\n\n        // Category stats sheet\n        const categoryData = [\n          ['Category', 'Job Count', 'Application Count', 'Avg Salary'],\n          ...(categoryStats || []).map(c => [c.category, c.jobCount, c.applicationCount, c.avgSalary])\n        ];\n        const categorySheet = XLSX.utils.aoa_to_sheet(categoryData);\n        XLSX.utils.book_append_sheet(workbook, categorySheet, 'Category Stats');\n\n        // Job type stats sheet\n        const jobTypeData = [\n          ['Type', 'Count', 'Percentage'],\n          ...(jobTypeStats || []).map(t => [t.type, t.count, `${t.percentage}%`])\n        ];\n        const jobTypeSheet = XLSX.utils.aoa_to_sheet(jobTypeData);\n        XLSX.utils.book_append_sheet(workbook, jobTypeSheet, 'Job Type Stats');\n\n        // Trends sheet\n        const trendsData = [\n          ['Date', 'Applications', 'Jobs', 'Users'],\n          ...(trends || []).filter(t => t.date !== 'No Data').map(t => [t.date, t.applications, t.jobs, t.users || 0])\n        ];\n        const trendsSheet = XLSX.utils.aoa_to_sheet(trendsData);\n        XLSX.utils.book_append_sheet(workbook, trendsSheet, 'Trends');\n\n        // Detailed Users sheet with all fields\n        const detailedUsersData = [\n          ['ID', 'First Name', 'Last Name', 'Email', 'Phone', 'Role', 'Address', 'Skills', 'Desired Roles', 'Experience Level', 'Preferred Location', 'Verification Status', 'Status', 'Created Date', 'Updated Date'],\n          ...(users || []).map(u => [\n            u.id,\n            u.firstName || 'N/A',\n            u.lastName || 'N/A',\n            u.email,\n            u.phone || 'N/A',\n            u.role,\n            u.address || 'N/A',\n            u.skills || 'N/A',\n            u.desiredRoles || 'N/A',\n            u.experienceLevel || 'N/A',\n            u.preferredLocation || 'N/A',\n            u.verificationStatus || 'N/A',\n            u.isActive ? 'Active' : 'Inactive',\n            new Date(u.createdAt).toLocaleString(),\n            new Date(u.updatedAt).toLocaleString()\n          ])\n        ];\n        const detailedUsersSheet = XLSX.utils.aoa_to_sheet(detailedUsersData);\n        XLSX.utils.book_append_sheet(workbook, detailedUsersSheet, 'Detailed Users');\n\n        // Detailed Jobs sheet with all fields\n        const detailedJobsData = [\n          ['ID', 'Title', 'Company', 'Category', 'Type', 'Location', 'Salary', 'Description', 'Requirements', 'Required Skills', 'Benefits', 'Email', 'Phone', 'Employer ID', 'Applications', 'Views', 'Featured', 'Status', 'Posted Date', 'Updated Date', 'Expires At'],\n          ...(jobs || []).map(j => [\n            j.id,\n            j.title,\n            j.company,\n            j.category,\n            j.type,\n            j.location,\n            j.salary,\n            (j.description || '').substring(0, 200) + '...',\n            (j.requirements || '').substring(0, 200) + '...',\n            j.requiredSkills || 'N/A',\n            (j.benefits || '').substring(0, 200) + '...',\n            j.email || 'N/A',\n            j.phone || 'N/A',\n            j.employerId,\n            j.applicantCount || 0,\n            j.viewCount || 0,\n            j.isFeatured ? 'Yes' : 'No',\n            j.isActive ? 'Active' : 'Inactive',\n            new Date(j.postedAt).toLocaleString(),\n            new Date(j.updatedAt).toLocaleString(),\n            j.expiresAt ? new Date(j.expiresAt).toLocaleString() : 'N/A'\n          ])\n        ];\n        const detailedJobsSheet = XLSX.utils.aoa_to_sheet(detailedJobsData);\n        XLSX.utils.book_append_sheet(workbook, detailedJobsSheet, 'Detailed Jobs');\n\n        // Detailed Applications sheet with all fields\n        const detailedApplicationsData = [\n          ['ID', 'Job ID', 'Job Title', 'Applicant ID', 'First Name', 'Last Name', 'Email', 'Phone', 'Address', 'Status', 'Notes', 'SMS Sent', 'Applied Date', 'Updated Date'],\n          ...(applications || []).map(a => [\n            a.id,\n            a.jobId,\n            a.jobTitle || 'N/A',\n            a.applicantId || 'N/A',\n            a.firstName,\n            a.lastName,\n            a.email,\n            a.phone,\n            a.address || 'N/A',\n            a.status,\n            a.notes || 'N/A',\n            a.smsNotificationSent ? 'Yes' : 'No',\n            new Date(a.appliedAt).toLocaleString(),\n            new Date(a.updatedAt).toLocaleString()\n          ])\n        ];\n        const detailedApplicationsSheet = XLSX.utils.aoa_to_sheet(detailedApplicationsData);\n        XLSX.utils.book_append_sheet(workbook, detailedApplicationsSheet, 'Detailed Applications');\n\n        // Job Seekers Only sheet\n        const jobSeekers = users.filter(u => u.role === 'jobseeker');\n        const jobSeekersData = [\n          ['ID', 'Name', 'Email', 'Phone', 'Address', 'Skills', 'Desired Roles', 'Experience', 'Location Preference', 'Status', 'Registered'],\n          ...jobSeekers.map(u => [\n            u.id,\n            `${u.firstName || ''} ${u.lastName || ''}`.trim(),\n            u.email,\n            u.phone || 'N/A',\n            u.address || 'N/A',\n            u.skills || 'N/A',\n            u.desiredRoles || 'N/A',\n            u.experienceLevel || 'N/A',\n            u.preferredLocation || 'N/A',\n            u.isActive ? 'Active' : 'Inactive',\n            new Date(u.createdAt).toLocaleDateString()\n          ])\n        ];\n        const jobSeekersSheet = XLSX.utils.aoa_to_sheet(jobSeekersData);\n        XLSX.utils.book_append_sheet(workbook, jobSeekersSheet, 'Job Seekers');\n\n        // Employers Only sheet\n        const employers = users.filter(u => u.role === 'employer');\n        const employersData = [\n          ['ID', 'Name', 'Email', 'Phone', 'Verification Status', 'Jobs Posted', 'Status', 'Registered'],\n          ...employers.map(u => {\n            const employerJobs = jobs.filter(j => j.employerId === u.id);\n            return [\n              u.id,\n              `${u.firstName || ''} ${u.lastName || ''}`.trim() || 'N/A',\n              u.email,\n              u.phone || 'N/A',\n              u.verificationStatus || 'N/A',\n              employerJobs.length,\n              u.isActive ? 'Active' : 'Inactive',\n              new Date(u.createdAt).toLocaleDateString()\n            ];\n          })\n        ];\n        const employersSheet = XLSX.utils.aoa_to_sheet(employersData);\n        XLSX.utils.book_append_sheet(workbook, employersSheet, 'Employers');\n\n        // Application Status Summary\n        const statusCounts = applications.reduce((acc, app) => {\n          acc[app.status] = (acc[app.status] || 0) + 1;\n          return acc;\n        }, {} as Record<string, number>);\n        const statusData = [\n          ['Status', 'Count'],\n          ...Object.entries(statusCounts).map(([status, count]) => [status, count])\n        ];\n        const statusSheet = XLSX.utils.aoa_to_sheet(statusData);\n        XLSX.utils.book_append_sheet(workbook, statusSheet, 'Application Status');\n\n        // Active Jobs by Employer\n        const activeJobsByEmployer = jobs\n          .filter(j => j.isActive)\n          .reduce((acc, job) => {\n            const employer = users.find(u => u.id === job.employerId);\n            const employerName = employer ? `${employer.firstName || ''} ${employer.lastName || ''}`.trim() || employer.email : 'Unknown';\n            if (!acc[employerName]) {\n              acc[employerName] = { count: 0, applications: 0, views: 0 };\n            }\n            acc[employerName].count++;\n            acc[employerName].applications += job.applicantCount || 0;\n            acc[employerName].views += job.viewCount || 0;\n            return acc;\n          }, {} as Record<string, { count: number; applications: number; views: number }>);\n        \n        const employerJobsData = [\n          ['Employer', 'Active Jobs', 'Total Applications', 'Total Views'],\n          ...Object.entries(activeJobsByEmployer).map(([employer, data]) => [\n            employer,\n            data.count,\n            data.applications,\n            data.views\n          ])\n        ];\n        const employerJobsSheet = XLSX.utils.aoa_to_sheet(employerJobsData);\n        XLSX.utils.book_append_sheet(workbook, employerJobsSheet, 'Jobs by Employer');\n\n        console.log(\"Generating Excel file...\");\n        \n        // Generate buffer\n        const excelBuffer = XLSX.write(workbook, { type: 'buffer', bookType: 'xlsx' });\n\n        console.log(\"Excel file generated successfully\");\n\n        // Set headers for download\n        res.setHeader('Content-Type', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n        res.setHeader('Content-Disposition', `attachment; filename=pili-jobs-analytics-${new Date().toISOString().split('T')[0]}.xlsx`);\n\n        res.send(excelBuffer);\n      } catch (error) {\n        console.error(\"Error exporting analytics:\", error);\n        res.status(500).json({ message: \"Failed to export analytics\", error: error instanceof Error ? error.message : 'Unknown error' });\n      }\n    }\n  );\n\n  app.get(\"/api/admin/category-stats\", requireAdmin, async (req, res) => {\n    try {\n      const stats = await storage.getCategoryStats();\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Error fetching category stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch category stats\" });\n    }\n  });\n\n  app.get(\"/api/admin/job-type-stats\", requireAdmin, async (req, res) => {\n    try {\n      const stats = await storage.getJobTypeStats();\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Error fetching job type stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch job type stats\" });\n    }\n  });\n\n  app.get(\"/api/admin/trends\", requireAdmin, async (req, res) => {\n    try {\n      const trends = await storage.getTrends();\n      res.json(trends);\n    } catch (error) {\n      console.error(\"Error fetching trends:\", error);\n      res.status(500).json({ message: \"Failed to fetch trends\" });\n    }\n  });\n\n  app.get(\"/api/admin/recent-activity\", requireAdmin, async (req, res) => {\n    try {\n      const activity = await storage.getRecentActivity();\n      res.json(activity);\n    } catch (error) {\n      console.error(\"Error fetching recent activity:\", error);\n      res.status(500).json({ message: \"Failed to fetch recent activity\" });\n    }\n  });\n\n  // Database viewer endpoints\n  app.get(\"/api/admin/database/tables\", requireAdmin, async (req, res) => {\n    try {\n      const tables = await storage.getAllTablesData();\n      res.json(tables);\n    } catch (error) {\n      console.error(\"Error fetching all tables:\", error);\n      res.status(500).json({ message: \"Failed to fetch tables data\" });\n    }\n  });\n\n  app.get(\n    \"/api/admin/database/table/:tableName\",\n    requireAdmin,\n    async (req, res) => {\n      try {\n        const { tableName } = req.params;\n        const tableData = await storage.getTableData(tableName);\n        res.json(tableData);\n      } catch (error) {\n        console.error(\"Error fetching table data:\", error);\n        res.status(500).json({ message: \"Failed to fetch table data\" });\n      }\n    }\n  );\n\n  app.get(\"/api/admin/users\", requireAdmin, async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      res.json(users);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n      res.status(500).json({ message: \"Failed to fetch users\" });\n    }\n  });\n\n  app.get(\"/api/admin/jobs\", requireAdmin, async (req, res) => {\n    try {\n      const jobs = await storage.getAllJobs({ includeInactive: true });\n      res.json(jobs);\n    } catch (error) {\n      console.error(\"Error fetching all jobs:\", error);\n      res.status(500).json({ message: \"Failed to fetch jobs\" });\n    }\n  });\n\n  app.get(\"/api/admin/applications\", requireAdmin, async (req, res) => {\n    try {\n      const applications = await storage.getAllApplicationsAdmin();\n      res.json(applications);\n    } catch (error) {\n      console.error(\"Error fetching all applications:\", error);\n      res.status(500).json({ message: \"Failed to fetch applications\" });\n    }\n  });\n\n  app.post(\"/api/admin/clear-data\", requireAdmin, async (req, res) => {\n    try {\n      await storage.clearAllData();\n      res.json({ message: \"All data cleared successfully\" });\n    } catch (error) {\n      console.error(\"Error clearing data:\", error);\n      res.status(500).json({ message: \"Failed to clear data\" });\n    }\n  });\n\n  // Admin CRUD for Users\n  app.put(\"/api/admin/users/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const userData = req.body;\n      const updatedUser = await storage.updateUser(id, userData);\n      if (!updatedUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      const { passwordHash, ...userResponse } = updatedUser;\n      res.json(userResponse);\n    } catch (error) {\n      console.error(\"Update user error:\", error);\n      res.status(500).json({ message: \"Failed to update user\" });\n    }\n  });\n\n  app.delete(\"/api/admin/users/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const success = await storage.deleteUser(id);\n      if (!success) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      res.json({ message: \"User deleted successfully\" });\n    } catch (error) {\n      console.error(\"Delete user error:\", error);\n      res.status(500).json({ message: \"Failed to delete user\" });\n    }\n  });\n\n  // Admin CRUD for Jobs\n  app.put(\"/api/admin/jobs/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const jobData = req.body;\n      const updatedJob = await storage.updateJob(id, jobData);\n      if (!updatedJob) {\n        return res.status(404).json({ message: \"Job not found\" });\n      }\n      res.json(updatedJob);\n    } catch (error) {\n      console.error(\"Update job error:\", error);\n      res.status(500).json({ message: \"Failed to update job\" });\n    }\n  });\n\n  app.delete(\"/api/admin/jobs/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const success = await storage.deleteJob(id);\n      if (!success) {\n        return res.status(404).json({ message: \"Job not found\" });\n      }\n      res.json({ message: \"Job deleted successfully\" });\n    } catch (error) {\n      console.error(\"Delete job error:\", error);\n      res.status(500).json({ message: \"Failed to delete job\" });\n    }\n  });\n\n  // Employer verification submission\n  app.post(\n    \"/api/employer/verification\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        // Handle both JSON and multipart form data\n        let barangayPermit, businessPermit;\n\n        if (req.headers[\"content-type\"]?.includes(\"multipart/form-data\")) {\n          // Handle multipart form data (files)\n          barangayPermit = req.body.barangayPermit;\n          businessPermit = req.body.businessPermit;\n        } else {\n          // Handle JSON with base64 data\n          barangayPermit = req.body.barangayPermit;\n          businessPermit = req.body.businessPermit;\n        }\n\n        if (!barangayPermit || !businessPermit) {\n          return res.status(400).json({ message: \"Both permits are required\" });\n        }\n\n        const updatedUser = await storage.updateUser(req.user!, {\n          barangayPermit,\n          businessPermit,\n          verificationStatus: \"pending\",\n          updatedAt: new Date(),\n        });\n\n        if (!updatedUser) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        res.json({ message: \"Verification documents submitted successfully\" });\n      } catch (error) {\n        console.error(\"Error submitting verification:\", error);\n        res.status(500).json({ message: \"Failed to submit verification\" });\n      }\n    }\n  );\n\n  // Admin verification management routes\n  app.get(\n    \"/api/admin/verification-requests\",\n    requireAdmin,\n    async (req, res) => {\n      try {\n        const pendingVerifications = await storage.getPendingVerifications();\n        res.json(pendingVerifications);\n      } catch (error) {\n        console.error(\"Error fetching verification requests:\", error);\n        res\n          .status(500)\n          .json({ message: \"Failed to fetch verification requests\" });\n      }\n    }\n  );\n\n  app.post(\n    \"/api/admin/verification/:userId/approve\",\n    requireAdmin,\n    async (req, res) => {\n      try {\n        const userId = parseInt(req.params.userId);\n        const updatedUser = await storage.updateUser(userId, {\n          verificationStatus: \"approved\",\n          updatedAt: new Date(),\n        });\n\n        if (!updatedUser) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        // Send SMS notification to employer\n        if (updatedUser.phone) {\n          const employerName = `${updatedUser.firstName || ''} ${updatedUser.lastName || ''}`.trim() || updatedUser.email;\n          await sendEmployerVerificationApprovalSMS(updatedUser.phone, employerName);\n          console.log(`Verification approval SMS sent to ${updatedUser.email} at ${updatedUser.phone}`);\n        } else {\n          console.log(`No phone number found for user ${updatedUser.email}, skipping SMS notification`);\n        }\n\n        res.json({ message: \"Employer verification approved\" });\n      } catch (error) {\n        console.error(\"Error approving verification:\", error);\n        res.status(500).json({ message: \"Failed to approve verification\" });\n      }\n    }\n  );\n\n  app.post(\n    \"/api/admin/verification/:userId/reject\",\n    requireAdmin,\n    async (req, res) => {\n      try {\n        const userId = parseInt(req.params.userId);\n        const { reason } = req.body;\n\n        const updatedUser = await storage.updateUser(userId, {\n          verificationStatus: \"rejected\",\n          updatedAt: new Date(),\n        });\n\n        if (!updatedUser) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        // Send SMS notification to employer\n        if (updatedUser.phone) {\n          const employerName = `${updatedUser.firstName || ''} ${updatedUser.lastName || ''}`.trim() || updatedUser.email;\n          await sendEmployerVerificationRejectionSMS(updatedUser.phone, employerName, reason);\n          console.log(`Verification rejection SMS sent to ${updatedUser.email} at ${updatedUser.phone}`);\n        } else {\n          console.log(`No phone number found for user ${updatedUser.email}, skipping SMS notification`);\n        }\n\n        res.json({ message: \"Employer verification rejected\" });\n      } catch (error) {\n        console.error(\"Error rejecting verification:\", error);\n        res.status(500).json({ message: \"Failed to reject verification\" });\n      }\n    }\n  );\n\n  app.get(\n    \"/api/admin/verification/:userId/documents\",\n    requireAdmin,\n    async (req, res) => {\n      try {\n        const userId = parseInt(req.params.userId);\n        const user = await storage.getUserById(userId);\n\n        if (!user) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        res.json({\n          barangayPermit: user.barangayPermit,\n          businessPermit: user.businessPermit,\n        });\n      } catch (error) {\n        console.error(\"Error fetching verification documents:\", error);\n        res.status(500).json({ message: \"Failed to fetch documents\" });\n      }\n    }\n  );\n\n  // Saved jobs routes\n  app.get(\n    \"/api/jobseeker/saved-jobs\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role !== \"jobseeker\") {\n          return res\n            .status(403)\n            .json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        const savedJobs = await storage.getSavedJobs(user.id);\n        res.json(savedJobs);\n      } catch (error) {\n        console.error(\"Error fetching saved jobs:\", error);\n        res.status(500).json({ message: \"Failed to fetch saved jobs\" });\n      }\n    }\n  );\n\n  app.post(\n    \"/api/jobseeker/saved-jobs/:jobId\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role !== \"jobseeker\") {\n          return res\n            .status(403)\n            .json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        const jobId = parseInt(req.params.jobId);\n        const savedJob = await storage.saveJob(user.id, jobId);\n        res.json(savedJob);\n      } catch (error) {\n        console.error(\"Error saving job:\", error);\n        res.status(500).json({ message: \"Failed to save job\" });\n      }\n    }\n  );\n\n  app.delete(\n    \"/api/jobseeker/saved-jobs/:jobId\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role !== \"jobseeker\") {\n          return res\n            .status(403)\n            .json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        const jobId = parseInt(req.params.jobId);\n        const success = await storage.unsaveJob(user.id, jobId);\n        res.json({ success });\n      } catch (error) {\n        console.error(\"Error removing saved job:\", error);\n        res.status(500).json({ message: \"Failed to remove saved job\" });\n      }\n    }\n  );\n\n  // Seed database route (development only)\n  app.post(\"/api/seed\", async (req, res) => {\n    try {\n      if (process.env.NODE_ENV === \"production\") {\n        return res\n          .status(403)\n          .json({ message: \"Seeding not allowed in production\" });\n      }\n\n      // Import and run seeder\n      const { seedDatabase } = await import(\"./seed\");\n      await seedDatabase();\n\n      res.json({ message: \"Database seeded successfully\" });\n    } catch (error) {\n      console.error(\"Error seeding database:\", error);\n      res.status(500).json({ message: \"Failed to seed database\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}","path":null,"size_bytes":59686,"size_tokens":null},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","path":null,"size_bytes":2695,"size_tokens":null},"client/src/components/JobSeekerApplications.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { \n  Briefcase, \n  MapPin, \n  Calendar, \n  Clock,\n  FileText,\n  Download\n} from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface Application {\n  id: number;\n  jobId: number;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  address?: string;\n  coverLetter?: string;\n  resume?: string;\n  status: string;\n  appliedAt: string;\n  job: {\n    title: string;\n    company: string;\n    location: string;\n    type: string;\n    salary: string;\n  };\n}\n\nexport function JobSeekerApplications() {\n  const { user } = useAuth();\n\n  const { data: applications = [], isLoading } = useQuery<Application[]>({\n    queryKey: ['/api/jobseeker/applications'],\n    enabled: !!user && user.role === 'jobseeker',\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      case 'reviewed': return 'bg-blue-100 text-blue-800';\n      case 'interviewing': return 'bg-purple-100 text-purple-800';\n      case 'hired': return 'bg-green-100 text-green-800';\n      case 'rejected': return 'bg-red-100 text-red-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const downloadResume = (applicationId: number, firstName: string, lastName: string) => {\n    const link = document.createElement('a');\n    link.href = `/api/download/resume/${applicationId}`;\n    link.download = `${firstName}_${lastName}_resume`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-3xl font-bold\">My Applications</h1>\n          <p className=\"text-muted-foreground\">Track your job applications</p>\n        </div>\n        <div className=\"text-sm text-gray-600\">\n          {applications.length} application{applications.length !== 1 ? 's' : ''}\n        </div>\n      </div>\n\n      {applications.length === 0 ? (\n        <Card>\n          <CardContent className=\"p-8 text-center\">\n            <Briefcase className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">No Applications Yet</h3>\n            <p className=\"text-gray-600\">Start applying for jobs to see your applications here.</p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid gap-4\">\n          {applications.map((application) => (\n            <Card key={application.id} className=\"hover:shadow-md transition-shadow\">\n              <CardHeader>\n                <div className=\"flex justify-between items-start\">\n                  <div>\n                    <CardTitle className=\"text-lg\">{application.job.title}</CardTitle>\n                    <CardDescription className=\"flex items-center gap-4 mt-1\">\n                      <span className=\"flex items-center\">\n                        <Briefcase className=\"mr-1 h-4 w-4\" />\n                        {application.job.company}\n                      </span>\n                      <span className=\"flex items-center\">\n                        <MapPin className=\"mr-1 h-4 w-4\" />\n                        {application.job.location}\n                      </span>\n                      <span className=\"flex items-center\">\n                        <Clock className=\"mr-1 h-4 w-4\" />\n                        {application.job.type}\n                      </span>\n                    </CardDescription>\n                  </div>\n                  <Badge className={getStatusColor(application.status)}>\n                    {application.status.charAt(0).toUpperCase() + application.status.slice(1)}\n                  </Badge>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <p className=\"text-sm text-gray-600 mb-1\">\n                      <Calendar className=\"inline mr-1 h-3 w-3\" />\n                      Applied: {new Date(application.appliedAt).toLocaleDateString()}\n                    </p>\n                    <p className=\"text-sm text-gray-600\">\n                      Salary: {application.job.salary}\n                    </p>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    {application.resume && (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => downloadResume(application.id, application.firstName, application.lastName)}\n                      >\n                        <Download className=\"mr-1 h-3 w-3\" />\n                        Resume\n                      </Button>\n                    )}\n                    {application.coverLetter && (\n                      <Button \n                        variant=\"outline\" \n                        size=\"sm\"\n                        onClick={() => {\n                          if (application.coverLetter?.startsWith(\"data:\")) {\n                            // It's a file - download it\n                            window.open(`/api/download/cover-letter/${application.id}`, \"_blank\");\n                          } else {\n                            // It's text - show in alert (or you could create a modal)\n                            alert(application.coverLetter);\n                          }\n                        }}\n                      >\n                        <FileText className=\"mr-1 h-3 w-3\" />\n                        {application.coverLetter?.startsWith(\"data:\") ? \"Download\" : \"View\"} Cover Letter\n                      </Button>\n                    )}\n                  </div>\n                </div>\n                {application.coverLetter && !application.coverLetter.startsWith(\"data:\") && (\n                  <div className=\"mt-3 pt-3 border-t\">\n                    <p className=\"text-sm font-medium text-gray-700 mb-1\">Cover Letter:</p>\n                    <p className=\"text-sm text-gray-600 line-clamp-3\">\n                      {application.coverLetter}\n                    </p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}","path":null,"size_bytes":6805,"size_tokens":null},"TEXTBEE_SETUP.md":{"content":"# TextBee SMS Integration Setup\n\nThis project now uses TextBee instead of Twilio for SMS notifications. TextBee is a cost-effective, open-source SMS gateway that turns any Android device into a powerful SMS messaging system.\n\n## Why TextBee?\n\n- **Cost-effective**: Uses your existing mobile plan, no per-message fees\n- **Open source**: Full control and transparency\n- **Simple integration**: RESTful API with standard HTTP\n- **Free tier**: 50 messages/day, 300/month with 1 device\n- **No registration fees**: Unlike Twilio's paid verification system\n\n## Quick Setup Guide\n\n### 1. Create TextBee Account\n\n1. Go to [textbee.dev](https://textbee.dev)\n2. Sign up for a free account\n3. Access your dashboard at [textbee.dev/dashboard](https://textbee.dev/dashboard)\n\n### 2. Install TextBee Android App\n\n1. Download the TextBee app from Google Play Store or from their website\n2. Install it on an Android device (phone or tablet)\n3. Log in with your TextBee account credentials\n\n### 3. Register Your Device\n\n1. Open the TextBee app on your Android device\n2. Register your device with the service\n3. Note down your **Device ID** from the app (you'll need this)\n\n### 4. Get Your API Key\n\n1. In your TextBee dashboard, go to API settings\n2. Copy your **API Key** \n\n### 5. Configure Environment Variables\n\nCreate a `.env` file in your project root with:\n\n```env\n# TextBee SMS Configuration\nTEXTBEE_API_KEY=your-api-key-from-dashboard\nTEXTBEE_DEVICE_ID=your-device-id-from-app\n\n# Other existing variables...\nDATABASE_URL=file:./pili_jobs.db\nJWT_SECRET=your-jwt-secret\n```\n\n## How It Works\n\n### Job Application Flow with SMS\n\n1. **Job Seeker Applies**: When someone applies for a job\n   - Applicant receives confirmation SMS with job details\n   - Employer receives notification SMS about new application\n\n2. **Status Updates**: When employers update application status\n   - Applicant receives SMS notification about status changes\n   - Different messages for: reviewed, accepted, rejected, interview, etc.\n\n### Sample SMS Messages\n\n**Application Confirmation (to job seeker):**\n```\nHi John! Your application for \"Marketing Assistant\" at ABC Company has been received. We'll contact you soon. - Pili Jobs\n```\n\n**New Application (to employer):**\n```\nNew job application received! John Doe has applied for \"Marketing Assistant\". Check your employer dashboard for details. - Pili Jobs\n```\n\n**Status Update (to job seeker):**\n```\nCongratulations John! Your application for \"Marketing Assistant\" at ABC Company has been accepted. They will contact you soon. - Pili Jobs\n```\n\n## Features\n\n- ✅ Application confirmations\n- ✅ Employer notifications  \n- ✅ Status update notifications\n- ✅ Retry mechanism for failed SMS\n- ✅ Graceful fallback when SMS is unavailable\n- ✅ Detailed logging for debugging\n\n## Troubleshooting\n\n### SMS Not Sending?\n\n1. **Check Environment Variables**: Ensure `TEXTBEE_API_KEY` and `TEXTBEE_DEVICE_ID` are set\n2. **Verify Device Connection**: Make sure your Android device is online and the TextBee app is running\n3. **Check API Limits**: Free accounts have daily/monthly limits\n4. **Phone Number Format**: Ensure phone numbers include country code (e.g., +63 for Philippines)\n\n### Common Issues\n\n**\"TextBee not initialized\"**: \n- Check your `.env` file has the correct variables\n- Restart the server after adding environment variables\n\n**\"SMS sending failed\"**:\n- Verify your Android device has internet connection\n- Check if TextBee app is running and logged in\n- Ensure you haven't exceeded your daily SMS limit\n\n### Logs\n\nThe application provides detailed logging:\n```\nTextBee Environment Check: { apiKey: 'Set', deviceId: 'Set' }\nTextBee client initialized successfully\nApplication confirmation SMS sent to +639123456789\n```\n\n## Cost Comparison\n\n| Service | Setup Cost | Monthly Cost | Per Message |\n|---------|------------|--------------|-------------|\n| Twilio | Free | $0+ | $0.0075+ |\n| TextBee | Free | $0-20+ | $0 (uses your plan) |\n\n## Security Notes\n\n- Keep your API key secure and never commit it to version control\n- Use environment variables for all sensitive configuration\n- TextBee uses HTTPS for all API communications\n- Your SMS data stays on your device until sent\n\n## Support\n\n- TextBee Documentation: [textbee.dev/docs](https://textbee.dev/docs)\n- GitHub Issues: [github.com/vernu/textbee](https://github.com/vernu/textbee)\n- Dashboard: [textbee.dev/dashboard](https://textbee.dev/dashboard)\n\n---\n\nThe SMS integration is now ready! Job seekers and employers will receive notifications via TextBee when you configure the service.","path":null,"size_bytes":4566,"size_tokens":null},"client/src/components/EmployerPreviewSection.tsx":{"content":"import { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Users, Clock, TrendingUp, Shield, AlertTriangle, Plus, Briefcase, MapPin, DollarSign } from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport AuthModal from \"@/components/auth/AuthModal\";\nimport { PILI_BARANGAYS } from \"@shared/barangays\";\n\ninterface EmployerPreviewSectionProps {\n  onLoginRequired: () => void;\n}\n\nexport default function EmployerPreviewSection({ onLoginRequired }: EmployerPreviewSectionProps) {\n  const { isAuthenticated } = useAuth();\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  \n  const [previewJob, setPreviewJob] = useState({\n    title: \"Sales Associate\",\n    company: \"Sample Store\",\n    location: \"Pili Centro\",\n    type: \"Full-time\",\n    category: \"Retail\",\n    salary: \"₱15,000 - ₱20,000\",\n    description: \"We are looking for a friendly and enthusiastic Sales Associate to join our team in Pili Centro.\",\n  });\n\n  const handlePostJob = () => {\n    if (!isAuthenticated) {\n      setShowAuthModal(true);\n    }\n  };\n\n  return (\n    <>\n      {/* Hero Section for Employers */}\n      <section className=\"bg-gradient-to-br from-green-600 to-green-700 text-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\n          <div className=\"text-center max-w-3xl mx-auto\">\n            <h2 className=\"text-4xl sm:text-5xl font-bold mb-6\">\n              Find the Perfect Candidate in{\" \"}\n              <span className=\"text-green-200\">Pili</span>\n            </h2>\n            <p className=\"text-xl text-green-100 mb-8\">\n              Connect with talented job seekers in Camarines Sur and grow your business with the right people\n            </p>\n\n            {/* Stats for Employers */}\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6 mt-12\">\n              <div className=\"text-center\">\n                <div className=\"text-3xl font-bold text-white\">50+</div>\n                <p className=\"text-green-200\">Job Seekers</p>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-3xl font-bold text-white\">25+</div>\n                <p className=\"text-green-200\">Applications Daily</p>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-3xl font-bold text-white\">90%</div>\n                <p className=\"text-green-200\">Response Rate</p>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-3xl font-bold text-white\">24hrs</div>\n                <p className=\"text-green-200\">Average Response</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Job Posting Preview Section */}\n      <section className=\"py-16 bg-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h3 className=\"text-3xl font-bold text-gray-900 mb-4\">\n              Post Your Job in Minutes\n            </h3>\n            <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n              Reach qualified candidates in Pili, Camarines Sur with our easy-to-use job posting platform\n            </p>\n          </div>\n\n          <div className=\"grid lg:grid-cols-2 gap-12 items-start\">\n            {/* Job Posting Form Preview */}\n            <div>\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Plus className=\"h-5 w-5 text-green-600\" />\n                    Create Job Posting\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-6\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"preview-title\">Job Title</Label>\n                      <Input\n                        id=\"preview-title\"\n                        value={previewJob.title}\n                        onChange={(e) => setPreviewJob({...previewJob, title: e.target.value})}\n                        placeholder=\"e.g. Sales Associate\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"preview-company\">Company Name</Label>\n                      <Input\n                        id=\"preview-company\"\n                        value={previewJob.company}\n                        onChange={(e) => setPreviewJob({...previewJob, company: e.target.value})}\n                        placeholder=\"Your Company\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"preview-location\">Location</Label>\n                      <Select value={previewJob.location} onValueChange={(value) => setPreviewJob({...previewJob, location: value})}>\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {PILI_BARANGAYS.map((barangay) => (\n                            <SelectItem key={barangay} value={barangay}>\n                              {barangay}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div>\n                      <Label htmlFor=\"preview-type\">Job Type</Label>\n                      <Select value={previewJob.type} onValueChange={(value) => setPreviewJob({...previewJob, type: value})}>\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"Full-time\">Full-time</SelectItem>\n                          <SelectItem value=\"Part-time\">Part-time</SelectItem>\n                          <SelectItem value=\"Contract\">Contract</SelectItem>\n                          <SelectItem value=\"Freelance\">Freelance</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"preview-category\">Category</Label>\n                      <Select value={previewJob.category} onValueChange={(value) => setPreviewJob({...previewJob, category: value})}>\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"Retail\">Retail</SelectItem>\n                          <SelectItem value=\"Education\">Education</SelectItem>\n                          <SelectItem value=\"Healthcare\">Healthcare</SelectItem>\n                          <SelectItem value=\"Food Service\">Food Service</SelectItem>\n                          <SelectItem value=\"Construction\">Construction</SelectItem>\n                          <SelectItem value=\"Agriculture\">Agriculture</SelectItem>\n                          <SelectItem value=\"Government\">Government</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div>\n                      <Label htmlFor=\"preview-salary\">Salary Range</Label>\n                      <Select value={previewJob.salary} onValueChange={(value) => setPreviewJob({...previewJob, salary: value})}>\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"₱15,000 - ₱20,000\">₱15,000 - ₱20,000</SelectItem>\n                          <SelectItem value=\"₱20,000 - ₱30,000\">₱20,000 - ₱30,000</SelectItem>\n                          <SelectItem value=\"₱30,000 - ₱50,000\">₱30,000 - ₱50,000</SelectItem>\n                          <SelectItem value=\"₱50,000+\">₱50,000+</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                  </div>\n\n                  <div>\n                    <Label htmlFor=\"preview-description\">Job Description</Label>\n                    <Textarea\n                      id=\"preview-description\"\n                      value={previewJob.description}\n                      onChange={(e) => setPreviewJob({...previewJob, description: e.target.value})}\n                      rows={4}\n                      placeholder=\"Describe the job requirements and responsibilities...\"\n                    />\n                  </div>\n\n                  <Alert>\n                    <AlertTriangle className=\"h-4 w-4\" />\n                    <AlertDescription>\n                      This is a preview. To post a real job, please log in as an employer.\n                    </AlertDescription>\n                  </Alert>\n\n                  <Button \n                    onClick={handlePostJob}\n                    className=\"w-full bg-green-600 hover:bg-green-700\"\n                    size=\"lg\"\n                  >\n                    Post Job Now\n                  </Button>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Live Preview */}\n            <div>\n              <h4 className=\"text-lg font-semibold text-gray-900 mb-4\">Live Preview</h4>\n              <Card className=\"hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-start gap-4\">\n                        <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                          <Briefcase className=\"text-green-600 h-6 w-6\" />\n                        </div>\n                        <div className=\"flex-1\">\n                          <h4 className=\"text-lg font-semibold text-gray-900 hover:text-green-600 cursor-pointer\">\n                            {previewJob.title}\n                          </h4>\n                          <p className=\"text-gray-600 mb-2\">{previewJob.company}</p>\n                          <div className=\"flex flex-wrap items-center gap-4 text-sm text-gray-500\">\n                            <span className=\"flex items-center\">\n                              <MapPin className=\"mr-1 h-4 w-4\" />\n                              {previewJob.location}\n                            </span>\n                            <span className=\"flex items-center\">\n                              <Clock className=\"mr-1 h-4 w-4\" />\n                              {previewJob.type}\n                            </span>\n                            <span className=\"flex items-center\">\n                              <DollarSign className=\"mr-1 h-4 w-4\" />\n                              {previewJob.salary}\n                            </span>\n                          </div>\n                          <div className=\"flex flex-wrap gap-2 mt-3\">\n                            <span className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                              {previewJob.category}\n                            </span>\n                            <span className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                              {previewJob.type}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"flex flex-col sm:flex-row gap-2\">\n                      <Button variant=\"outline\" disabled>\n                        Save\n                      </Button>\n                      <Button disabled>\n                        Apply Now\n                      </Button>\n                    </div>\n                  </div>\n                  <div className=\"mt-4 pt-4 border-t border-gray-100\">\n                    <p className=\"text-gray-600 text-sm\">{previewJob.description}</p>\n                    <div className=\"flex justify-between items-center mt-3\">\n                      <span className=\"text-xs text-gray-500\">Preview - Posted just now</span>\n                      <span className=\"text-xs text-green-600 font-medium flex items-center\">\n                        <Users className=\"mr-1 h-3 w-3\" />\n                        0 applicants\n                      </span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Benefits Section */}\n      <section className=\"py-16 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h3 className=\"text-3xl font-bold text-gray-900 mb-4\">\n              Why Choose Pili Jobs for Hiring?\n            </h3>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-8\">\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Users className=\"h-8 w-8 text-green-600\" />\n              </div>\n              <h4 className=\"text-xl font-semibold text-gray-900 mb-2\">Local Talent Pool</h4>\n              <p className=\"text-gray-600\">\n                Access qualified candidates from Pili and surrounding areas in Camarines Sur\n              </p>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Clock className=\"h-8 w-8 text-green-600\" />\n              </div>\n              <h4 className=\"text-xl font-semibold text-gray-900 mb-2\">Quick Responses</h4>\n              <p className=\"text-gray-600\">\n                Get applications within hours and hire faster with our streamlined process\n              </p>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <Shield className=\"h-8 w-8 text-green-600\" />\n              </div>\n              <h4 className=\"text-xl font-semibold text-gray-900 mb-2\">SMS Notifications</h4>\n              <p className=\"text-gray-600\">\n                Get instant SMS alerts when candidates apply to your job postings\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <AuthModal \n        isOpen={showAuthModal}\n        onClose={() => setShowAuthModal(false)}\n        onSuccess={() => setShowAuthModal(false)}\n      />\n    </>\n  );\n}","path":null,"size_bytes":15385,"size_tokens":null},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer()\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist\"),\n  },\n  server: {\n    host: \"0.0.0.0\",\n    port: 5173,\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","path":null,"size_bytes":977,"size_tokens":null},"client/src/components/UserProfileModal.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { PILI_BARANGAYS } from \"@shared/barangays\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { z } from \"zod\";\n\nconst profileSchema = z.object({\n  firstName: z.string().min(1, \"First name is required\"),\n  lastName: z.string().min(1, \"Last name is required\"),\n  email: z.string().email(\"Invalid email address\"),\n  phone: z.string().optional(),\n  address: z.string().optional(),\n});\n\ninterface UserProfileModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function UserProfileModal({\n  isOpen,\n  onClose,\n}: UserProfileModalProps) {\n  const { user, refreshUser } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const [profileData, setProfileData] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n    phone: \"\",\n    address: \"\",\n    skills: \"\",\n    desiredRoles: \"\",\n    experienceLevel: \"\",\n    preferredLocation: \"\",\n  });\n\n  const [errors, setErrors] = useState<any>({});\n\n  useEffect(() => {\n    if (user && isOpen) {\n      setProfileData({\n        firstName: user.firstName || \"\",\n        lastName: user.lastName || \"\",\n        email: user.email || \"\",\n        phone: user.phone || \"\",\n        address: user.address || \"\",\n        skills: user.skills || \"\",\n        desiredRoles: user.desiredRoles || \"\",\n        experienceLevel: user.experienceLevel || \"\",\n        preferredLocation: user.preferredLocation || \"\",\n      });\n    }\n  }, [user, isOpen]);\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return await apiRequest(\"/api/auth/profile\", \"PUT\", data);\n    },\n    onSuccess: async () => {\n      await refreshUser();\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\n      queryClient.invalidateQueries({\n        queryKey: [\"/api/jobseeker/recommendations\"],\n      });\n\n      toast({\n        title: \"Success\",\n        description:\n          \"Profile updated successfully! Your job recommendations will be updated.\",\n      });\n\n      onClose();\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Update Failed\",\n        description: error.message || \"Failed to update profile\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    setErrors({});\n\n    try {\n      const validatedData = profileSchema.parse(profileData);\n\n      // Only validate job preference fields for job seekers\n      const jobPreferenceErrors: any = {};\n      if (user?.role === \"jobseeker\") {\n        if (!profileData.skills || profileData.skills.trim() === \"\") {\n          jobPreferenceErrors.skills =\n            \"Skills are required for job recommendations\";\n        }\n        if (\n          !profileData.desiredRoles ||\n          profileData.desiredRoles.trim() === \"\"\n        ) {\n          jobPreferenceErrors.desiredRoles =\n            \"Desired roles are required for job recommendations\";\n        }\n        if (\n          !profileData.experienceLevel ||\n          profileData.experienceLevel === \"\"\n        ) {\n          jobPreferenceErrors.experienceLevel =\n            \"Experience level is required for job recommendations\";\n        }\n        if (\n          !profileData.preferredLocation ||\n          profileData.preferredLocation === \"\"\n        ) {\n          jobPreferenceErrors.preferredLocation =\n            \"Preferred location is required for job recommendations\";\n        }\n\n        if (Object.keys(jobPreferenceErrors).length > 0) {\n          setErrors(jobPreferenceErrors);\n          return;\n        }\n      }\n\n      // Include job preference fields only for job seekers\n      const completeData =\n        user?.role === \"jobseeker\"\n          ? {\n              ...validatedData,\n              skills: profileData.skills,\n              desiredRoles: profileData.desiredRoles,\n              experienceLevel: profileData.experienceLevel,\n              preferredLocation: profileData.preferredLocation,\n            }\n          : validatedData;\n\n      updateProfileMutation.mutate(completeData);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        const fieldErrors: any = {};\n        error.errors.forEach((err) => {\n          if (err.path[0]) {\n            fieldErrors[err.path[0]] = err.message;\n          }\n        });\n        setErrors(fieldErrors);\n      }\n    }\n  };\n\n  const handleInputChange = (field: string, value: string) => {\n    setProfileData((prev) => ({ ...prev, [field]: value }));\n    if (errors[field]) {\n      setErrors((prev: any) => ({ ...prev, [field]: \"\" }));\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Edit Profile</DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"firstName\">First Name</Label>\n              <Input\n                id=\"firstName\"\n                value={profileData.firstName}\n                onChange={(e) => handleInputChange(\"firstName\", e.target.value)}\n                className={errors.firstName ? \"border-red-500\" : \"\"}\n              />\n              {errors.firstName && (\n                <p className=\"text-sm text-red-500\">{errors.firstName}</p>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"lastName\">Last Name</Label>\n              <Input\n                id=\"lastName\"\n                value={profileData.lastName}\n                onChange={(e) => handleInputChange(\"lastName\", e.target.value)}\n                className={errors.lastName ? \"border-red-500\" : \"\"}\n              />\n              {errors.lastName && (\n                <p className=\"text-sm text-red-500\">{errors.lastName}</p>\n              )}\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\">Email</Label>\n            <Input\n              id=\"email\"\n              type=\"email\"\n              value={profileData.email}\n              onChange={(e) => handleInputChange(\"email\", e.target.value)}\n              className={errors.email ? \"border-red-500\" : \"\"}\n            />\n            {errors.email && (\n              <p className=\"text-sm text-red-500\">{errors.email}</p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"phone\">Phone Number</Label>\n            <div className=\"flex\">\n              <span className=\"inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border border-r-0 border-gray-300 rounded-l-md\">\n                +63\n              </span>\n              <Input\n                id=\"phone\"\n                value={profileData.phone}\n                onChange={(e) =>\n                  handleInputChange(\"phone\", e.target.value.replace(/\\s+/g, \"\"))\n                }\n                placeholder=\"9171234567\"\n                className=\"rounded-l-none\"\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"address\">Address</Label>\n            <Select\n              value={profileData.address || \"\"}\n              onValueChange={(value) => handleInputChange(\"address\", value)}\n            >\n              <SelectTrigger>\n                <SelectValue placeholder=\"Select your barangay\" />\n              </SelectTrigger>\n              <SelectContent>\n                {PILI_BARANGAYS.map((barangay) => (\n                  <SelectItem key={barangay} value={barangay}>\n                    {barangay}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {user?.role === \"jobseeker\" && (\n            <>\n              <div className=\"border-t pt-4 mt-4\">\n                <h3 className=\"text-lg font-semibold mb-3\">Job Preferences</h3>\n                <p className=\"text-sm text-gray-600 mb-4\">\n                  Complete your profile to get personalized job recommendations\n                </p>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"skills\">\n                  Skills <span className=\"text-red-500\">*</span>\n                </Label>\n                <Input\n                  id=\"skills\"\n                  value={profileData.skills}\n                  onChange={(e) => handleInputChange(\"skills\", e.target.value)}\n                  placeholder=\"e.g., React, PHP, Customer Service, Data Entry\"\n                  className={errors.skills ? \"border-red-500\" : \"\"}\n                />\n                {errors.skills && (\n                  <p className=\"text-sm text-red-500\">{errors.skills}</p>\n                )}\n                <p className=\"text-xs text-gray-500\">\n                  Enter your skills separated by commas. Be specific!\n                </p>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"desiredRoles\">\n                  Desired Job Roles <span className=\"text-red-500\">*</span>\n                </Label>\n                <Input\n                  id=\"desiredRoles\"\n                  value={profileData.desiredRoles}\n                  onChange={(e) =>\n                    handleInputChange(\"desiredRoles\", e.target.value)\n                  }\n                  placeholder=\"e.g., Web Developer, Marketing Assistant, Sales Associate\"\n                  className={errors.desiredRoles ? \"border-red-500\" : \"\"}\n                />\n                {errors.desiredRoles && (\n                  <p className=\"text-sm text-red-500\">{errors.desiredRoles}</p>\n                )}\n                <p className=\"text-xs text-gray-500\">\n                  What positions are you looking for? Separate multiple roles\n                  with commas\n                </p>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"experienceLevel\">\n                  Experience Level <span className=\"text-red-500\">*</span>\n                </Label>\n                <Select\n                  value={profileData.experienceLevel || \"\"}\n                  onValueChange={(value) =>\n                    handleInputChange(\"experienceLevel\", value)\n                  }\n                >\n                  <SelectTrigger\n                    className={errors.experienceLevel ? \"border-red-500\" : \"\"}\n                  >\n                    <SelectValue placeholder=\"Select your experience level\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Entry\">\n                      Entry Level (0-2 years)\n                    </SelectItem>\n                    <SelectItem value=\"Mid\">Mid Level (3-5 years)</SelectItem>\n                    <SelectItem value=\"Senior\">\n                      Senior Level (6+ years)\n                    </SelectItem>\n                  </SelectContent>\n                </Select>\n                {errors.experienceLevel && (\n                  <p className=\"text-sm text-red-500\">\n                    {errors.experienceLevel}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"preferredLocation\">\n                  Preferred Work Location{\" \"}\n                  <span className=\"text-red-500\">*</span>\n                </Label>\n                <Select\n                  value={profileData.preferredLocation || \"\"}\n                  onValueChange={(value) =>\n                    handleInputChange(\"preferredLocation\", value)\n                  }\n                >\n                  <SelectTrigger\n                    className={errors.preferredLocation ? \"border-red-500\" : \"\"}\n                  >\n                    <SelectValue placeholder=\"Select your preferred barangay\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Any Location\">\n                      Any Location in Pili\n                    </SelectItem>\n                    {PILI_BARANGAYS.map((barangay) => (\n                      <SelectItem key={barangay} value={barangay}>\n                        {barangay}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n                {errors.preferredLocation && (\n                  <p className=\"text-sm text-red-500\">\n                    {errors.preferredLocation}\n                  </p>\n                )}\n                <p className=\"text-xs text-gray-500\">\n                  This helps us recommend jobs near you\n                </p>\n              </div>\n            </>\n          )}\n\n          <div className=\"flex justify-end space-x-2 pt-4\">\n            <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={updateProfileMutation.isPending}>\n              {updateProfileMutation.isPending\n                ? \"Updating...\"\n                : \"Update Profile\"}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","path":null,"size_bytes":13744,"size_tokens":null},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","path":null,"size_bytes":4885,"size_tokens":null},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","path":null,"size_bytes":8605,"size_tokens":null},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(0, 0%, 100%);\n  --foreground: hsl(20, 14.3%, 4.1%);\n  --muted: hsl(60, 4.8%, 95.9%);\n  --muted-foreground: hsl(25, 5.3%, 44.7%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(20, 14.3%, 4.1%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(20, 14.3%, 4.1%);\n  --border: hsl(20, 5.9%, 90%);\n  --input: hsl(20, 5.9%, 90%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --primary-100: hsl(207, 90%, 94%);\n  --primary-600: hsl(207, 90%, 46%);\n  --primary-700: hsl(207, 90%, 38%);\n  --secondary: hsl(60, 4.8%, 95.9%);\n  --secondary-foreground: hsl(24, 9.8%, 10%);\n  --accent: hsl(60, 4.8%, 95.9%);\n  --accent-foreground: hsl(24, 9.8%, 10%);\n  --destructive: hsl(0, 84.2%, 60.2%);\n  --destructive-foreground: hsl(60, 9.1%, 97.8%);\n  --ring: hsl(20, 14.3%, 4.1%);\n  --radius: 0.5rem;\n}\n\n.dark {\n  --background: hsl(240, 10%, 3.9%);\n  --foreground: hsl(0, 0%, 98%);\n  --muted: hsl(240, 3.7%, 15.9%);\n  --muted-foreground: hsl(240, 5%, 64.9%);\n  --popover: hsl(240, 10%, 3.9%);\n  --popover-foreground: hsl(0, 0%, 98%);\n  --card: hsl(240, 10%, 3.9%);\n  --card-foreground: hsl(0, 0%, 98%);\n  --border: hsl(240, 3.7%, 15.9%);\n  --input: hsl(240, 3.7%, 15.9%);\n  --primary: hsl(207, 90%, 54%);\n  --primary-foreground: hsl(211, 100%, 99%);\n  --primary-100: hsl(207, 90%, 20%);\n  --primary-600: hsl(207, 90%, 46%);\n  --primary-700: hsl(207, 90%, 38%);\n  --secondary: hsl(240, 3.7%, 15.9%);\n  --secondary-foreground: hsl(0, 0%, 98%);\n  --accent: hsl(240, 3.7%, 15.9%);\n  --accent-foreground: hsl(0, 0%, 98%);\n  --destructive: hsl(0, 62.8%, 30.6%);\n  --destructive-foreground: hsl(0, 0%, 98%);\n  --ring: hsl(240, 4.9%, 83.9%);\n  --radius: 0.5rem;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n@layer utilities {\n  .text-primary-400 {\n    color: hsl(207, 90%, 74%);\n  }\n  .bg-primary-100 {\n    background-color: var(--primary-100);\n  }\n  .text-primary {\n    color: var(--primary);\n  }\n  .bg-primary {\n    background-color: var(--primary);\n  }\n  .hover\\:bg-primary-600:hover {\n    background-color: var(--primary-600);\n  }\n  .from-primary {\n    --tw-gradient-from: var(--primary) var(--tw-gradient-from-position);\n    --tw-gradient-to: hsl(from var(--primary) h s l / 0) var(--tw-gradient-to-position);\n    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n  }\n  .to-primary-700 {\n    --tw-gradient-to: var(--primary-700) var(--tw-gradient-to-position);\n  }\n}\n","path":null,"size_bytes":2589,"size_tokens":null},"shared/barangays.ts":{"content":"export const PILI_BARANGAYS = [\n  \"Anayan\",\n  \"Bagong Sirang\",\n  \"Binanwaanan\",\n  \"Binobong\",\n  \"Cadlan\",\n  \"Caroyroyan\",\n  \"Curry\",\n  \"Del Rosario\",\n  \"Himaao\",\n  \"La Purisima\",\n  \"New San Roque\",\n  \"Old San Roque\",\n  \"Palestina\",\n  \"Pawili\",\n  \"Sagrada\",\n  \"Sagurong\",\n  \"San Agustin\",\n  \"San Antonio\",\n  \"San Isidro\",\n  \"San Jose\",\n  \"San Juan\",\n  \"San Vicente\",\n  \"Santiago\",\n  \"Santo Niño\",\n  \"Tagbong\",\n  \"Tinangis\",\n];\n\nexport const LOCATION_OPTIONS = [\n  \"Pili (All Areas)\",\n  ...PILI_BARANGAYS.map((barangay) => `${barangay}, Pili`),\n];\n","path":null,"size_bytes":547,"size_tokens":null},"start-local.js":{"content":"// Simple script to start locally with SQLite\nimport fs from 'fs';\n\n// Create a simple .env for local development\nconst envContent = `DATABASE_URL=sqlite:./pili_jobs.db\nNODE_ENV=development\nPORT=5000`;\n\nif (!fs.existsSync('.env')) {\n  fs.writeFileSync('.env', envContent);\n  console.log('Created .env file for local development');\n}\n\n// Switch to local database configuration\nif (fs.existsSync('server/db.local.ts')) {\n  fs.copyFileSync('server/db.ts', 'server/db.backup.ts');\n  fs.copyFileSync('server/db.local.ts', 'server/db.ts');\n  console.log('Switched to SQLite database for local development');\n}\n\nconsole.log('Local development setup complete!');\nconsole.log('Run: npm run dev');","path":null,"size_bytes":687,"size_tokens":null},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","path":null,"size_bytes":1883,"size_tokens":null},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","path":null,"size_bytes":689,"size_tokens":null},"client/src/components/RecommendedJobs.tsx":{"content":"\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { MapPin, Briefcase, ThumbsUp, ThumbsDown, TrendingUp, FileText } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useState } from \"react\";\nimport ApplicationModal from \"./ApplicationModal\";\nimport type { Job } from \"@shared/schema\";\n\ninterface JobWithMatch extends Job {\n  matchScore: number;\n  skillMatch: number;\n  locationMatch: number;\n  roleMatch: number;\n}\n\nexport default function RecommendedJobs() {\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const [selectedJob, setSelectedJob] = useState<Job | null>(null);\n  const [isApplicationModalOpen, setIsApplicationModalOpen] = useState(false);\n\n  const { data: recommendations = [], isLoading } = useQuery<JobWithMatch[]>({\n    queryKey: [\"/api/jobseeker/recommendations\"],\n    enabled: !!user && user.role === \"jobseeker\",\n  });\n\n  const feedbackMutation = useMutation({\n    mutationFn: ({ jobId, feedback }: { jobId: number; feedback: string }) =>\n      apiRequest(\"/api/jobseeker/match-feedback\", \"POST\", { jobId, feedback }),\n    onSuccess: () => {\n      toast({\n        title: \"Feedback recorded\",\n        description: \"Thank you for helping us improve recommendations!\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/jobseeker/recommendations\"] });\n    },\n  });\n\n  const getMatchColor = (score: number) => {\n    if (score >= 70) return \"text-green-600 bg-green-100\";\n    if (score >= 50) return \"text-blue-600 bg-blue-100\";\n    return \"text-yellow-600 bg-yellow-100\";\n  };\n\n  const isProfileComplete = user?.skills && user?.desiredRoles && user?.experienceLevel && user?.preferredLocation;\n\n  if (isLoading) {\n    return <div>Loading recommendations...</div>;\n  }\n\n  if (!isProfileComplete) {\n    return (\n      <Card className=\"p-8 text-center\">\n        <div className=\"max-w-md mx-auto\">\n          <div className=\"bg-blue-100 rounded-full p-4 w-16 h-16 mx-auto mb-4\">\n            <FileText className=\"h-8 w-8 text-blue-600\" />\n          </div>\n          <h3 className=\"text-xl font-semibold mb-2\">Complete Your Profile</h3>\n          <p className=\"text-gray-600 mb-4\">\n            To get personalized job recommendations, please complete your profile with:\n          </p>\n          <ul className=\"text-left text-sm text-gray-600 mb-6 space-y-2\">\n            {!user?.skills && (\n              <li className=\"flex items-center gap-2\">\n                <span className=\"text-red-500\">✗</span> Your skills\n              </li>\n            )}\n            {!user?.desiredRoles && (\n              <li className=\"flex items-center gap-2\">\n                <span className=\"text-red-500\">✗</span> Desired job roles\n              </li>\n            )}\n            {!user?.experienceLevel && (\n              <li className=\"flex items-center gap-2\">\n                <span className=\"text-red-500\">✗</span> Experience level\n              </li>\n            )}\n            {!user?.preferredLocation && (\n              <li className=\"flex items-center gap-2\">\n                <span className=\"text-red-500\">✗</span> Preferred work location\n              </li>\n            )}\n          </ul>\n          <Button \n            onClick={() => {\n              const editButton = document.querySelector('[data-profile-edit]') as HTMLElement;\n              if (editButton) editButton.click();\n            }}\n          >\n            Complete Profile Now\n          </Button>\n        </div>\n      </Card>\n    );\n  }\n\n  if (recommendations.length === 0) {\n    return (\n      <Card>\n        <CardContent className=\"p-6 text-center\">\n          <p className=\"text-gray-500\">\n            Complete your profile with skills and preferences to get personalized job recommendations!\n          </p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center gap-2\">\n          <TrendingUp className=\"h-5 w-5 text-green-600\" />\n          <h2 className=\"text-xl font-semibold\">Recommended for You</h2>\n        </div>\n\n        {recommendations.map((job) => (\n          <Card key={job.id} className=\"hover:shadow-md transition-shadow\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-start justify-between gap-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <h3 className=\"text-lg font-semibold\">{job.title}</h3>\n                    <Badge className={getMatchColor(job.matchScore)}>\n                      {job.matchScore}% Match\n                    </Badge>\n                  </div>\n                  <p className=\"text-gray-600 mb-2\">{job.company}</p>\n                  <div className=\"flex items-center gap-4 text-sm text-gray-500 mb-3\">\n                    <span className=\"flex items-center\">\n                      <MapPin className=\"mr-1 h-4 w-4\" />\n                      {job.location}\n                    </span>\n                    <span className=\"flex items-center\">\n                      <Briefcase className=\"mr-1 h-4 w-4\" />\n                      {job.type}\n                    </span>\n                    <span>{job.salary}</span>\n                  </div>\n                  <div className=\"flex gap-2 text-xs text-gray-500\">\n                    <span>Skills: {job.skillMatch}%</span>\n                    <span>Location: {job.locationMatch}%</span>\n                    <span>Role: {job.roleMatch}%</span>\n                  </div>\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                  <Button onClick={() => {\n                    setSelectedJob(job);\n                    setIsApplicationModalOpen(true);\n                  }}>\n                    Apply Now\n                  </Button>\n                  <div className=\"flex gap-1\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => feedbackMutation.mutate({ jobId: job.id, feedback: \"thumbs_up\" })}\n                    >\n                      <ThumbsUp className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => feedbackMutation.mutate({ jobId: job.id, feedback: \"thumbs_down\" })}\n                    >\n                      <ThumbsDown className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      <ApplicationModal\n        job={selectedJob}\n        isOpen={isApplicationModalOpen}\n        onClose={() => {\n          setIsApplicationModalOpen(false);\n          setSelectedJob(null);\n        }}\n      />\n    </>\n  );\n}\n","path":null,"size_bytes":7161,"size_tokens":null},"client/src/components/JobListings.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  MapPin,\n  Clock,\n  Briefcase,\n  Search,\n  Filter,\n  ChevronLeft,\n  ChevronRight,\n  Building2,\n  Calendar,\n  Eye,\n  Users,\n  Heart\n} from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Label } from \"@/components/ui/label\";\nimport { Pagination, PaginationContent, PaginationItem, PaginationLink, PaginationNext, PaginationPrevious } from \"@/components/ui/pagination\";\nimport { Building } from \"lucide-react\";\nimport ApplicationModal from \"./ApplicationModal\";\nimport JobViewModal from \"./JobViewModal\";\nimport AuthModal from \"./auth/AuthModal\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport type { Job } from \"@shared/schema\";\n\ninterface JobListingsProps {\n  searchQuery: string;\n  locationFilter: string;\n}\n\ninterface PaginationInfo {\n  currentPage: number;\n  pageSize: number;\n  totalCount: number;\n  totalPages: number;\n  hasNext: boolean;\n  hasPrevious: boolean;\n}\n\ninterface JobsResponse {\n  jobs: Job[];\n  pagination: PaginationInfo;\n}\n\nexport default function JobListings({ searchQuery, locationFilter }: JobListingsProps) {\n  const [selectedJobTypes, setSelectedJobTypes] = useState<string[]>([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"All Categories\");\n  const [selectedSalary, setSelectedSalary] = useState(\"Any Salary\");\n  const [sortOrder, setSortOrder] = useState(\"Newest First\");\n  const [selectedJob, setSelectedJob] = useState<Job | null>(null);\n  const [isApplicationModalOpen, setIsApplicationModalOpen] = useState(false);\n  const [isAuthModalOpen, setIsAuthModalOpen] = useState(false);\n  const [isJobViewModalOpen, setIsJobViewModalOpen] = useState(false);\n  const [jobForApplication, setJobForApplication] = useState<Job | null>(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const { isAuthenticated, user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const { data, isLoading } = useQuery<JobsResponse>({\n    queryKey: [\"/api/jobs\", searchQuery, locationFilter, selectedCategory, selectedSalary, selectedJobTypes, currentPage],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (searchQuery && searchQuery.trim()) params.append('q', searchQuery.trim());\n      if (locationFilter && locationFilter !== 'Pili (All Areas)') params.append('location', locationFilter);\n      if (selectedCategory && selectedCategory !== 'All Categories') params.append('category', selectedCategory);\n      if (selectedSalary && selectedSalary !== 'Any Salary') params.append('salary', selectedSalary);\n      if (selectedJobTypes.length > 0) params.append('jobTypes', selectedJobTypes.join(','));\n      params.append('page', currentPage.toString());\n      params.append('limit', '7'); // Show 7 jobs per page\n\n      const response = await fetch(`/api/jobs?${params}`);\n      if (!response.ok) throw new Error('Failed to fetch jobs');\n      return response.json();\n    },\n  });\n\n  // Fetch saved jobs for the current user\n  const { data: savedJobsData = [] } = useQuery<Job[]>({\n    queryKey: ['/api/jobseeker/saved-jobs'],\n    enabled: isAuthenticated && user?.role === 'jobseeker',\n  });\n\n  // Create a Set of saved job IDs for quick lookup\n  const savedJobIds = new Set(savedJobsData.map(job => job.id));\n\n  // Save job mutation\n  const saveJobMutation = useMutation({\n    mutationFn: (jobId: number) => apiRequest(`/api/jobseeker/saved-jobs/${jobId}`, 'POST'),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Job saved successfully!\"\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/jobseeker/saved-jobs'] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to save job\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  // Remove saved job mutation\n  const removeSavedJobMutation = useMutation({\n    mutationFn: (jobId: number) => apiRequest(`/api/jobseeker/saved-jobs/${jobId}`, 'DELETE'),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Job removed from saved list!\"\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/jobseeker/saved-jobs'] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to remove saved job\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const jobs = data?.jobs || [];\n  const pagination = data?.pagination;\n\n  const handleJobTypeChange = (jobType: string, checked: boolean) => {\n    let newJobTypes;\n    if (checked) {\n      newJobTypes = [...selectedJobTypes, jobType];\n    } else {\n      newJobTypes = selectedJobTypes.filter(type => type !== jobType);\n    }\n    setSelectedJobTypes(newJobTypes);\n    setCurrentPage(1);\n  };\n\n  const handleSaveJob = (jobId: number) => {\n    if (!isAuthenticated) {\n      setIsAuthModalOpen(true);\n      return;\n    }\n\n    if (user?.role !== 'jobseeker') {\n      toast({\n        title: \"Error\",\n        description: \"Only job seekers can save jobs\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (savedJobIds.has(jobId)) {\n      removeSavedJobMutation.mutate(jobId);\n    } else {\n      saveJobMutation.mutate(jobId);\n    }\n  };\n\n  const handleViewJob = (job: Job) => {\n    setSelectedJob(job);\n    setIsJobViewModalOpen(true);\n  };\n\n  const handleApplyClick = (job: Job) => {\n    if (!isAuthenticated) {\n      setIsAuthModalOpen(true);\n      return;\n    }\n    setSelectedJob(job);\n    setJobForApplication(job);\n    setIsApplicationModalOpen(true);\n  };\n\n  const handleApplyFromModal = () => {\n    console.log(\"handleApplyFromModal called\");\n    console.log(\"selectedJob:\", selectedJob);\n    console.log(\"selectedJob.id:\", selectedJob?.id);\n\n    setIsJobViewModalOpen(false);\n    if (!isAuthenticated) {\n      setIsAuthModalOpen(true);\n      return;\n    }\n    // Ensure selectedJob is set before opening application modal\n    if (selectedJob && selectedJob.id) {\n      console.log(\"Opening application modal with job:\", selectedJob);\n      setJobForApplication(selectedJob);\n      setIsApplicationModalOpen(true);\n    } else {\n      console.error(\"No selectedJob or job.id found when trying to apply!\");\n      toast({\n        title: \"Error\",\n        description: \"Job information is missing. Please try again.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const clearFilters = () => {\n    setSelectedJobTypes([]);\n    setSelectedCategory(\"All Categories\");\n    setSelectedSalary(\"Any Salary\");\n    setSortOrder(\"Newest First\");\n    setCurrentPage(1);\n  };\n\n  // Reset to first page when filters change\n  const handleFilterChange = (setter: Function, value: any) => {\n    setter(value);\n    setCurrentPage(1);\n  };\n\n  const sortedJobs = [...jobs].sort((a, b) => {\n    switch (sortOrder) {\n      case \"Salary: High to Low\":\n        return b.salary.localeCompare(a.salary);\n      case \"Salary: Low to High\":\n        return a.salary.localeCompare(b.salary);\n      case \"Company A-Z\":\n        return a.company.localeCompare(b.company);\n      default: // Newest First\n        return new Date(b.postedAt).getTime() - new Date(a.postedAt).getTime();\n    }\n  });\n\n  const getRelativeTime = (date: Date) => {\n    const now = new Date();\n    const diffInHours = Math.floor((now.getTime() - new Date(date).getTime()) / (1000 * 60 * 60));\n\n    if (diffInHours < 24) {\n      return `Posted ${diffInHours} hours ago`;\n    } else {\n      const diffInDays = Math.floor(diffInHours / 24);\n      return `Posted ${diffInDays} day${diffInDays > 1 ? 's' : ''} ago`;\n    }\n  };\n\n  const getCategoryColor = (category: string) => {\n    const colors: Record<string, string> = {\n      \"Education\": \"bg-blue-100 text-blue-800\",\n      \"Healthcare\": \"bg-green-100 text-green-800\",\n      \"Retail\": \"bg-purple-100 text-purple-800\",\n      \"Food Service\": \"bg-orange-100 text-orange-800\",\n      \"Transportation\": \"bg-orange-100 text-orange-800\",\n      \"Construction\": \"bg-yellow-100 text-yellow-800\",\n      \"Agriculture\": \"bg-green-100 text-green-800\",\n      \"Government\": \"bg-blue-100 text-blue-800\",\n    };\n    return colors[category] || \"bg-gray-100 text-gray-800\";\n  };\n\n  const getTypeColor = (type: string) => {\n    const colors: Record<string, string> = {\n      \"Full-time\": \"bg-green-100 text-green-800\",\n      \"Part-time\": \"bg-yellow-100 text-yellow-800\",\n      \"Contract\": \"bg-blue-100 text-blue-800\",\n      \"Freelance\": \"bg-purple-100 text-purple-800\",\n    };\n    return colors[type] || \"bg-gray-100 text-gray-800\";\n  };\n\n  const formatDate = (dateString: string | Date): string => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <section id=\"jobs\" className=\"py-16\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center\">Loading jobs...</div>\n        </div>\n      </section>\n    );\n  }\n\n  return (\n    <>\n      <section id=\"jobs\" className=\"py-16\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col lg:flex-row gap-8\">\n            {/* Filters Sidebar */}\n            <div className=\"lg:w-80\">\n              <Card className=\"sticky top-4\">\n                <CardContent className=\"p-6\">\n                  <h3 className=\"text-lg font-semibold mb-6\">Filter Jobs</h3>\n\n                  {/* Job Type Filter */}\n                  <div className=\"mb-6\">\n                    <Label className=\"block text-sm font-medium text-gray-700 mb-3\">Job Type</Label>\n                    <div className=\"space-y-2\">\n                      {[\"Full-time\", \"Part-time\", \"Contract\", \"Freelance\"].map((type) => (\n                        <div key={type} className=\"flex items-center space-x-2\">\n                          <Checkbox\n                            id={type}\n                            checked={selectedJobTypes.includes(type)}\n                            onCheckedChange={(checked) => {\n                              handleJobTypeChange(type, checked as boolean);\n                              setCurrentPage(1);\n                            }}\n                          />\n                          <Label htmlFor={type} className=\"text-sm\">{type}</Label>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Category Filter */}\n                  <div className=\"mb-6\">\n                    <Label className=\"block text-sm font-medium text-gray-700 mb-3\">Category</Label>\n                    <Select value={selectedCategory} onValueChange={(value) => handleFilterChange(setSelectedCategory, value)}>\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"All Categories\">All Categories</SelectItem>\n                        <SelectItem value=\"Education\">Education</SelectItem>\n                        <SelectItem value=\"Healthcare\">Healthcare</SelectItem>\n                        <SelectItem value=\"Retail\">Retail</SelectItem>\n                        <SelectItem value=\"Food Service\">Food Service</SelectItem>\n                        <SelectItem value=\"Transportation\">Transportation</SelectItem>\n                        <SelectItem value=\"Construction\">Construction</SelectItem>\n                        <SelectItem value=\"Agriculture\">Agriculture</SelectItem>\n                        <SelectItem value=\"Government\">Government</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  {/* Salary Range */}\n                  <div className=\"mb-6\">\n                    <Label className=\"block text-sm font-medium text-gray-700 mb-3\">Salary Range (Monthly)</Label>\n                    <Select value={selectedSalary} onValueChange={(value) => handleFilterChange(setSelectedSalary, value)}>\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"Any Salary\">Any Salary</SelectItem>\n                        <SelectItem value=\"₱15,000 - ₱20,000\">₱15,000 - ₱20,000</SelectItem>\n                        <SelectItem value=\"₱20,000 - ₱30,000\">₱20,000 - ₱30,000</SelectItem>\n                        <SelectItem value=\"₱30,000 - ₱50,000\">₱30,000 - ₱50,000</SelectItem>\n                        <SelectItem value=\"₱50,000+\">₱50,000+</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <Button onClick={clearFilters} variant=\"outline\" className=\"w-full\">\n                    Clear Filters\n                  </Button>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Job Listings */}\n            <div className=\"flex-1\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <div>\n                  <h3 className=\"text-2xl font-bold text-gray-900\">Available Jobs</h3>\n                  <p className=\"text-gray-600\">\n                    {pagination ? (\n                      <>Showing {((pagination.currentPage - 1) * pagination.pageSize) + 1}-{Math.min(pagination.currentPage * pagination.pageSize, pagination.totalCount)} of {pagination.totalCount} jobs</>\n                    ) : (\n                      <>Showing {sortedJobs.length} jobs</>\n                    )}\n                    {pagination && pagination.totalPages > 1 && (\n                      <span> - Page {pagination.currentPage} of {pagination.totalPages}</span>\n                    )}\n                  </p>\n                </div>\n                <Select value={sortOrder} onValueChange={setSortOrder}>\n                  <SelectTrigger className=\"w-48\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Newest First\">Newest First</SelectItem>\n                    <SelectItem value=\"Salary: High to Low\">Salary: High to Low</SelectItem>\n                    <SelectItem value=\"Salary: Low to High\">Salary: Low to High</SelectItem>\n                    <SelectItem value=\"Company A-Z\">Company A-Z</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-4\">\n                {sortedJobs.map((job) => (\n                  <Card key={job.id} className=\"hover:shadow-md transition-shadow\">\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-start gap-4\">\n                            <div className=\"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                              <Building className=\"text-primary h-6 w-6\" />\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <h4\n                                className=\"text-lg font-semibold text-gray-900 hover:text-green-600 cursor-pointer\"\n                                onClick={() => handleViewJob(job)}\n                              >\n                                {job.title}\n                              </h4>\n                              <p className=\"text-gray-600 mb-2\">{job.company}</p>\n                              <div className=\"flex flex-wrap items-center gap-4 text-sm text-gray-500\">\n                                <span className=\"flex items-center\">\n                                  <MapPin className=\"mr-1 h-4 w-4\" />\n                                  {job.location}\n                                </span>\n                                <span className=\"flex items-center\">\n                                  <Clock className=\"mr-1 h-4 w-4\" />\n                                  {job.type}\n                                </span>\n                                <span className=\"flex items-center\">\n                                  {job.salary}\n                                </span>\n                              </div>\n                              <div className=\"flex flex-wrap gap-2 mt-3\">\n                                <Badge className={getCategoryColor(job.category)}>\n                                  {job.category}\n                                </Badge>\n                                <Badge className={getTypeColor(job.type)}>\n                                  {job.type}\n                                </Badge>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"flex flex-col sm:flex-row gap-2\">\n                          {isAuthenticated && user?.role === 'jobseeker' && (\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => handleSaveJob(job.id)}\n                              disabled={saveJobMutation.isPending || removeSavedJobMutation.isPending}\n                              className={`flex items-center gap-1 ${\n                                savedJobIds.has(job.id) \n                                  ? 'text-red-600 border-red-600 hover:bg-red-50' \n                                  : 'text-gray-600 hover:text-red-600 hover:border-red-600'\n                              }`}\n                            >\n                              <Heart \n                                className={`h-4 w-4 ${\n                                  savedJobIds.has(job.id) ? 'fill-current' : ''\n                                }`} \n                              />\n                              {savedJobIds.has(job.id) ? 'Saved' : 'Save'}\n                            </Button>\n                          )}\n                          <Button\n                            variant=\"outline\"\n                            onClick={() => handleViewJob(job)}\n                            className=\"flex-1 sm:flex-none\"\n                          >\n                            View Details\n                          </Button>\n                          <Button\n                            onClick={() => handleApplyClick(job)}\n                            className=\"bg-green-600 hover:bg-green-700 flex-1 sm:flex-none\"\n                          >\n                            Apply Now\n                          </Button>\n                        </div>\n                      </div>\n                      <div className=\"mt-4 pt-4 border-t border-gray-100\">\n                        <p className=\"text-gray-600 text-sm\">{job.description}</p>\n                        <div className=\"flex justify-between items-center mt-3\">\n                          <span className=\"text-xs text-gray-500\">{getRelativeTime(job.postedAt)}</span>\n                          <span className=\"text-xs text-green-600 font-medium flex items-center\">\n                            <Users className=\"mr-1 h-3 w-3\" />\n                            {job.applicantCount} applicant{job.applicantCount !== 1 ? 's' : ''}\n                          </span>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n\n              {sortedJobs.length === 0 && (\n                <div className=\"text-center py-12\">\n                  <p className=\"text-gray-500\">No jobs found matching your criteria.</p>\n                </div>\n              )}\n\n              {/* Pagination Controls */}\n              {pagination && pagination.totalPages > 1 && (\n                <div className=\"mt-8\">\n                  <Pagination>\n                    <PaginationContent>\n                      <PaginationItem>\n                        <PaginationPrevious\n                          onClick={() => pagination.hasPrevious && setCurrentPage(pagination.currentPage - 1)}\n                          className={pagination.hasPrevious ? \"cursor-pointer\" : \"cursor-not-allowed opacity-50\"}\n                        />\n                      </PaginationItem>\n\n                      {/* Page numbers */}\n                      {Array.from({ length: pagination.totalPages }, (_, i) => i + 1).map((page) => (\n                        <PaginationItem key={page}>\n                          <PaginationLink\n                            onClick={() => setCurrentPage(page)}\n                            isActive={page === pagination.currentPage}\n                            className=\"cursor-pointer\"\n                          >\n                            {page}\n                          </PaginationLink>\n                        </PaginationItem>\n                      ))}\n\n                      <PaginationItem>\n                        <PaginationNext\n                          onClick={() => pagination.hasNext && setCurrentPage(pagination.currentPage + 1)}\n                          className={pagination.hasNext ? \"cursor-pointer\" : \"cursor-not-allowed opacity-50\"}\n                        />\n                      </PaginationItem>\n                    </PaginationContent>\n                  </Pagination>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <ApplicationModal\n        job={jobForApplication}\n        isOpen={isApplicationModalOpen}\n        onClose={() => {\n          console.log(\"Closing application modal\");\n          setIsApplicationModalOpen(false);\n          setJobForApplication(null);\n        }}\n      />\n\n      <JobViewModal\n        job={selectedJob}\n        isOpen={isJobViewModalOpen}\n        onClose={() => setIsJobViewModalOpen(false)}\n        onApply={handleApplyFromModal}\n      />\n\n      <AuthModal\n        isOpen={isAuthModalOpen}\n        onClose={() => setIsAuthModalOpen(false)}\n        onSuccess={() => setIsAuthModalOpen(false)}\n      />\n    </>\n  );\n}","path":null,"size_bytes":22709,"size_tokens":null},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","path":null,"size_bytes":2751,"size_tokens":null},"server/textbee.ts":{"content":"import fetch from \"node-fetch\";\nimport * as dotenv from \"dotenv\";\ndotenv.config();\n\nconst TEXTBEE_API_URL = \"https://api.textbee.dev\";\nconst TEXTBEE_API_KEY = process.env.TEXTBEE_API_KEY;\nconst TEXTBEE_DEVICE_ID = process.env.TEXTBEE_DEVICE_ID;\n\nexport async function sendApplicationConfirmationSMS(\n  phone: string,\n  applicantName: string,\n  jobTitle: string,\n  company: string\n): Promise<boolean> {\n  if (!TEXTBEE_API_KEY || !TEXTBEE_DEVICE_ID) {\n    console.warn(\n      \"TEXTBEE_API_KEY or TEXTBEE_DEVICE_ID not configured, skipping SMS\"\n    );\n    return false;\n  }\n\n  try {\n    const message = `Hi ${applicantName}! Your application for ${jobTitle} at ${company} has been received. We'll be in touch soon!`;\n\n    const response = await fetch(\n      `${TEXTBEE_API_URL}/api/v1/gateway/devices/${TEXTBEE_DEVICE_ID}/send-sms`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": TEXTBEE_API_KEY,\n        },\n        body: JSON.stringify({\n          recipients: [phone],\n          message: message,\n        }),\n      }\n    );\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      console.error(\"Failed to send SMS:\", result);\n      return false;\n    }\n\n    console.log(\"SMS sent successfully:\", result);\n    return true;\n  } catch (error) {\n    console.error(\"Error sending SMS:\", error);\n    return false;\n  }\n}\n\nexport async function sendEmployerNotificationSMS(\n  phone: string,\n  applicantName: string,\n  jobTitle: string\n): Promise<boolean> {\n  if (!TEXTBEE_API_KEY || !TEXTBEE_DEVICE_ID) {\n    console.warn(\n      \"TEXTBEE_API_KEY or TEXTBEE_DEVICE_ID not configured, skipping SMS\"\n    );\n    return false;\n  }\n\n  try {\n    const message = `New application received from ${applicantName} for ${jobTitle}. Check your dashboard to review.`;\n\n    const response = await fetch(\n      `${TEXTBEE_API_URL}/api/v1/gateway/devices/${TEXTBEE_DEVICE_ID}/send-sms`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": TEXTBEE_API_KEY,\n        },\n        body: JSON.stringify({\n          recipients: [phone],\n          message: message,\n        }),\n      }\n    );\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      console.error(\"Failed to send SMS:\", result);\n      return false;\n    }\n\n    console.log(\"SMS sent successfully:\", result);\n    return true;\n  } catch (error) {\n    console.error(\"Error sending SMS:\", error);\n    return false;\n  }\n}\n\nexport async function sendApplicationStatusUpdateSMS(\n  phone: string,\n  applicantName: string,\n  jobTitle: string,\n  company: string,\n  status: string\n): Promise<boolean> {\n  if (!TEXTBEE_API_KEY || !TEXTBEE_DEVICE_ID) {\n    console.warn(\n      \"TEXTBEE_API_KEY or TEXTBEE_DEVICE_ID not configured, skipping SMS\"\n    );\n    return false;\n  }\n\n  try {\n    let statusMessage = \"\";\n    switch (status) {\n      case \"reviewed\":\n        statusMessage = \"Your application has been reviewed\";\n        break;\n      case \"interviewing\":\n        statusMessage = \"You have been selected for an interview\";\n        break;\n      case \"hired\":\n        statusMessage = \"Congratulations! You have been hired\";\n        break;\n      case \"rejected\":\n        statusMessage =\n          \"Thank you for your interest. Unfortunately, your application was not selected\";\n        break;\n      default:\n        statusMessage = `Your application status has been updated to: ${status}`;\n    }\n\n    const message = `Hi ${applicantName}! ${statusMessage} for ${jobTitle} at ${company}.`;\n\n    const response = await fetch(\n      `${TEXTBEE_API_URL}/api/v1/gateway/devices/${TEXTBEE_DEVICE_ID}/send-sms`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": TEXTBEE_API_KEY,\n        },\n        body: JSON.stringify({\n          recipients: [phone],\n          message: message,\n        }),\n      }\n    );\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      console.error(\"Failed to send SMS:\", result);\n      return false;\n    }\n\n    console.log(\"SMS sent successfully:\", result);\n    return true;\n  } catch (error) {\n    console.error(\"Error sending SMS:\", error);\n    return false;\n  }\n}\n\nexport async function sendEmployerVerificationApprovalSMS(\n  phone: string,\n  employerName: string\n): Promise<boolean> {\n  if (!TEXTBEE_API_KEY || !TEXTBEE_DEVICE_ID) {\n    console.warn(\n      \"TEXTBEE_API_KEY or TEXTBEE_DEVICE_ID not configured, skipping SMS\"\n    );\n    return false;\n  }\n\n  try {\n    const message = `Hi ${employerName}! Great news! Your employer verification has been approved. You can now post jobs and access all features on Pili Jobs. Welcome aboard!`;\n\n    const response = await fetch(\n      `${TEXTBEE_API_URL}/api/v1/gateway/devices/${TEXTBEE_DEVICE_ID}/send-sms`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": TEXTBEE_API_KEY,\n        },\n        body: JSON.stringify({\n          recipients: [phone],\n          message: message,\n        }),\n      }\n    );\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      console.error(\"Failed to send SMS:\", result);\n      return false;\n    }\n\n    console.log(\"Verification approval SMS sent successfully:\", result);\n    return true;\n  } catch (error) {\n    console.error(\"Error sending verification approval SMS:\", error);\n    return false;\n  }\n}\n\nexport async function sendEmployerVerificationRejectionSMS(\n  phone: string,\n  employerName: string,\n  reason?: string\n): Promise<boolean> {\n  if (!TEXTBEE_API_KEY || !TEXTBEE_DEVICE_ID) {\n    console.warn(\n      \"TEXTBEE_API_KEY or TEXTBEE_DEVICE_ID not configured, skipping SMS\"\n    );\n    return false;\n  }\n\n  try {\n    const reasonText = reason ? ` Reason: ${reason}.` : \"\";\n    const message = `Hi ${employerName}! Your employer verification request has been reviewed but was not approved.${reasonText} Please contact support or resubmit your documents with the required information.`;\n\n    const response = await fetch(\n      `${TEXTBEE_API_URL}/api/v1/gateway/devices/${TEXTBEE_DEVICE_ID}/send-sms`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": TEXTBEE_API_KEY,\n        },\n        body: JSON.stringify({\n          recipients: [phone],\n          message: message,\n        }),\n      }\n    );\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      console.error(\"Failed to send SMS:\", result);\n      return false;\n    }\n\n    console.log(\"Verification rejection SMS sent successfully:\", result);\n    return true;\n  } catch (error) {\n    console.error(\"Error sending verification rejection SMS:\", error);\n    return false;\n  }\n}\n","path":null,"size_bytes":6805,"size_tokens":null},"client/src/components/EmployerSection.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Users, Clock, TrendingUp, Shield, AlertTriangle, Download } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { InsertJob } from \"@shared/schema\";\nimport { PILI_BARANGAYS } from \"@shared/barangays\";\n\n\n\nexport default function EmployerSection() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { user, isAuthenticated, canPostJobs } = useAuth();\n\n  const [jobForm, setJobForm] = useState<InsertJob>({\n    title: \"\",\n    company: \"\",\n    location: \"Pili Centro\",\n    type: \"Full-time\",\n    category: \"Education\",\n    salary: \"₱15,000 - ₱20,000\",\n    description: \"\",\n    email: \"\",\n  });\n\n  const createJobMutation = useMutation({\n    mutationFn: async (jobData: InsertJob) => {\n      return await apiRequest(\"/api/jobs\", \"POST\", jobData);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Job Posted Successfully\",\n        description: \"Your job posting is now live and visible to job seekers.\",\n      });\n      setJobForm({\n        title: \"\",\n        company: \"\",\n        location: \"Pili Centro\",\n        type: \"Full-time\",\n        category: \"Education\",\n        salary: \"₱15,000 - ₱20,000\",\n        description: \"\",\n        email: \"\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/jobs\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stats\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to post job. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!jobForm.title || !jobForm.company || !jobForm.description || !jobForm.email) {\n      toast({\n        title: \"Missing Information\",\n        description: \"Please fill in all required fields.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    createJobMutation.mutate(jobForm);\n  };\n\n  const updateForm = (field: keyof InsertJob, value: string) => {\n    setJobForm(prev => ({ ...prev, [field]: value }));\n  };\n\n  return (\n    <section id=\"employers\" className=\"py-16 bg-white\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"text-center mb-12\">\n          <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">For Employers</h2>\n          <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n            Post your job openings and connect with qualified local talent in Pili, Camarines Sur\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-8 items-center\">\n          {/* Features */}\n          <div className=\"space-y-6\">\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <Users className=\"text-primary h-6 w-6\" />\n              </div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Access Local Talent</h3>\n                <p className=\"text-gray-600\">\n                  Connect with qualified job seekers right here in Pili and surrounding areas.\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <Clock className=\"text-green-500 h-6 w-6\" />\n              </div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Quick Job Posting</h3>\n                <p className=\"text-gray-600\">\n                  Post your job openings in minutes with our simple, intuitive form.\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                <TrendingUp className=\"text-orange-500 h-6 w-6\" />\n              </div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Application Management</h3>\n                <p className=\"text-gray-600\">\n                  Manage applications and communicate directly with candidates.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* Job Posting Form */}\n          <Card className=\"bg-gray-50\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Shield className=\"h-5 w-5\" />\n                Post a Job\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"p-6\">\n              {!isAuthenticated ? (\n                <Alert>\n                  <AlertTriangle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    Please log in to post a job. Only registered employers can create job listings.\n                  </AlertDescription>\n                </Alert>\n              ) : !canPostJobs ? (\n                <Alert>\n                  <AlertTriangle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    Only employers and administrators can post jobs. Your account is currently registered as a job seeker.\n                  </AlertDescription>\n                </Alert>\n              ) : (\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"title\">Job Title *</Label>\n                  <Input\n                    id=\"title\"\n                    type=\"text\"\n                    placeholder=\"e.g. Marketing Manager\"\n                    value={jobForm.title}\n                    onChange={(e) => updateForm(\"title\", e.target.value)}\n                    required\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"company\">Company Name *</Label>\n                  <Input\n                    id=\"company\"\n                    type=\"text\"\n                    placeholder=\"Your company name\"\n                    value={jobForm.company}\n                    onChange={(e) => updateForm(\"company\", e.target.value)}\n                    required\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <Label>Job Type</Label>\n                    <Select value={jobForm.type} onValueChange={(value) => updateForm(\"type\", value)}>\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"Full-time\">Full-time</SelectItem>\n                        <SelectItem value=\"Part-time\">Part-time</SelectItem>\n                        <SelectItem value=\"Contract\">Contract</SelectItem>\n                        <SelectItem value=\"Freelance\">Freelance</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div>\n                    <Label>Category</Label>\n                    <Select value={jobForm.category} onValueChange={(value) => updateForm(\"category\", value)}>\n                      <SelectTrigger>\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"Education\">Education</SelectItem>\n                        <SelectItem value=\"Healthcare\">Healthcare</SelectItem>\n                        <SelectItem value=\"Retail\">Retail</SelectItem>\n                        <SelectItem value=\"Food Service\">Food Service</SelectItem>\n                        <SelectItem value=\"Transportation\">Transportation</SelectItem>\n                        <SelectItem value=\"Construction\">Construction</SelectItem>\n                        <SelectItem value=\"Agriculture\">Agriculture</SelectItem>\n                        <SelectItem value=\"Government\">Government</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n\n                <div>\n                  <Label>Location</Label>\n                  <Select value={jobForm.location} onValueChange={(value) => updateForm(\"location\", value)}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {PILI_BARANGAYS.map((barangay) => (\n                        <SelectItem key={barangay} value={barangay}>\n                          {barangay}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div>\n                  <Label>Salary Range (Monthly)</Label>\n                  <Select value={jobForm.salary} onValueChange={(value) => updateForm(\"salary\", value)}>\n                    <SelectTrigger>\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"₱15,000 - ₱20,000\">₱15,000 - ₱20,000</SelectItem>\n                      <SelectItem value=\"₱20,000 - ₱30,000\">₱20,000 - ₱30,000</SelectItem>\n                      <SelectItem value=\"₱30,000 - ₱50,000\">₱30,000 - ₱50,000</SelectItem>\n                      <SelectItem value=\"₱50,000+\">₱50,000+</SelectItem>\n                      <SelectItem value=\"Negotiable\">Negotiable</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"description\">Job Description *</Label>\n                  <Textarea\n                    id=\"description\"\n                    rows={4}\n                    placeholder=\"Describe the role, requirements, and responsibilities...\"\n                    value={jobForm.description}\n                    onChange={(e) => updateForm(\"description\", e.target.value)}\n                    required\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"email\">Contact Email *</Label>\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    placeholder=\"your@company.com\"\n                    value={jobForm.email}\n                    onChange={(e) => updateForm(\"email\", e.target.value)}\n                    required\n                  />\n                </div>\n\n                  <Button \n                    type=\"submit\" \n                    className=\"w-full\" \n                    disabled={createJobMutation.isPending}\n                  >\n                    {createJobMutation.isPending ? \"Posting...\" : \"Post Job Opening\"}\n                  </Button>\n                </form>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </section>\n  );\n}","path":null,"size_bytes":11667,"size_tokens":null},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","path":null,"size_bytes":1280,"size_tokens":null},"client/src/components/ApplicationModal.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { MapPin, Clock, Upload, FileText, Download } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport type { Job, InsertApplication } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { PILI_BARANGAYS } from \"@shared/barangays\";\n\ninterface ApplicationModalProps {\n  job: Job | null;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\n// Define the Zod schema for application data\nconst applicationSchema = z.object({\n  jobId: z.number().min(1, \"Job ID is required\"),\n  firstName: z.string().min(1, \"First name is required\"),\n  middleName: z.string().optional(),\n  lastName: z.string().min(1, \"Last name is required\"),\n  email: z.string().email(\"Invalid email address\"),\n  phone: z.string()\n    .min(10, \"Phone number must be at least 10 digits\")\n    .regex(/^(\\+63|63)?9\\d{9}$/, \"Invalid Philippine mobile number format\"),\n  address: z.string().optional(),\n  coverLetter: z.string().optional(),\n  resume: z.string().min(1, \"Resume is required\"), // This will be the file path after upload\n});\n\nexport default function ApplicationModal({ job, isOpen, onClose }: ApplicationModalProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { user } = useAuth();\n\n  // Debug: Log job data when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      console.log(\"ApplicationModal opened\");\n      console.log(\"ApplicationModal - Job data:\", job);\n      console.log(\"ApplicationModal - Job ID:\", job?.id);\n      console.log(\"ApplicationModal - Job type:\", typeof job?.id);\n      console.log(\"ApplicationModal - Job keys:\", job ? Object.keys(job) : \"No job\");\n    }\n  }, [isOpen, job]);\n\n  const [applicationForm, setApplicationForm] = useState<Omit<InsertApplication, \"applicantId\" | \"status\" | \"notes\" | \"smsNotificationSent\" | \"appliedAt\" | \"updatedAt\">>({\n    jobId: 0, // Will be set when job is available\n    firstName: \"\",\n    middleName: \"\",\n    lastName: \"\",\n    email: \"\",\n    phone: \"\",\n    address: \"\",\n    coverLetter: \"\",\n    resume: \"\",\n  });\n\n  const [resumeFile, setResumeFile] = useState<File | null>(null);\n  const [coverLetterFile, setCoverLetterFile] = useState<File | null>(null);\n  const [errors, setErrors] = useState({}); // State to hold validation errors\n\n  // Auto-populate form when user data is available\n  useEffect(() => {\n    if (user && isOpen && job?.id) {\n      // Remove +63 prefix and any spaces/formatting from phone number\n      const cleanPhone = user.phone ? \n        user.phone.replace(/^\\+?63/, '').replace(/[\\s\\-\\(\\)]/g, '').replace(/\\D/g, '') : '';\n\n      setApplicationForm(prev => ({\n        ...prev,\n        jobId: job.id,\n        firstName: user.firstName || \"\",\n        middleName: user.middleName || \"\",\n        lastName: user.lastName || \"\",\n        email: user.email || \"\",\n        phone: cleanPhone,\n      }));\n    }\n  }, [user, isOpen, job?.id]);\n\n  const submitApplicationMutation = useMutation({\n    mutationFn: async (applicationData: InsertApplication) => {\n      console.log(\"Mutation called with applicationData:\", applicationData);\n      console.log(\"Mutation - jobId:\", applicationData.jobId);\n      console.log(\"Mutation - API URL:\", `/api/jobs/${applicationData.jobId}/apply`);\n      return await apiRequest(`/api/jobs/${applicationData.jobId}/apply`, \"POST\", applicationData);\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Application Submitted\",\n        description: \"Your application has been sent to the employer successfully.\",\n      });\n      resetForm();\n      onClose();\n      queryClient.invalidateQueries({ queryKey: [\"/api/jobs\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/employer/jobs\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/jobseeker/applications\"] });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to submit application. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    // Remove +63 prefix and any spaces/formatting from phone number\n    const cleanPhone = user?.phone ? \n      user.phone.replace(/^\\+?63/, '').replace(/[\\s\\-\\(\\)]/g, '').replace(/\\D/g, '') : '';\n\n    setApplicationForm({\n      jobId: job?.id || 0,\n      firstName: user?.firstName || \"\",\n      middleName: user?.middleName || \"\",\n      lastName: user?.lastName || \"\",\n      email: user?.email || \"\",\n      phone: cleanPhone,\n      address: \"\",\n      coverLetter: \"\",\n      resume: \"\",\n    });\n    setResumeFile(null);\n    setCoverLetterFile(null);\n    setErrors({}); // Clear errors on reset\n  };\n\n  // Placeholder for the submitApplication function, which would typically call the mutation\n  const submitApplication = async (applicationData: InsertApplication) => {\n    submitApplicationMutation.mutate(applicationData);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setErrors({});\n\n    // Debug: Check if job and job.id exist\n    console.log(\"=== HANDLE SUBMIT DEBUG ===\");\n    console.log(\"Job object:\", job);\n    console.log(\"Job ID:\", job?.id);\n    console.log(\"Job ID type:\", typeof job?.id);\n    console.log(\"Job is null?\", job === null);\n    console.log(\"Job is undefined?\", job === undefined);\n    console.log(\"Job keys:\", job ? Object.keys(job) : \"No job\");\n    console.log(\"==========================\");\n\n    if (!job || !job.id) {\n      console.error(\"Job or job.id is missing in handleSubmit\");\n      console.error(\"Job:\", job);\n      console.error(\"Job.id:\", job?.id);\n      toast({\n        title: \"Error\",\n        description: \"Job information is missing. Please close and try again.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Capture job ID early to prevent it from being lost during async operations\n    const jobId = job.id;\n    console.log(\"Captured jobId:\", jobId);\n\n    // Validate resume is required\n    if (!resumeFile) {\n      toast({\n        title: \"Resume Required\",\n        description: \"Please attach a resume before submitting your application\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    // Construct the application data object for validation\n    const applicationData = {\n      ...applicationForm,\n      jobId: jobId, // Ensure jobId is set\n      resume: resumeFile.name, // Use filename for initial validation, will be replaced by URL\n    };\n\n    try {\n      const validatedData = applicationSchema.parse(applicationData);\n      console.log(\"Validated data jobId:\", validatedData.jobId);\n\n      // Handle resume upload - convert file to base64\n      console.log(\"Starting resume upload...\");\n      const resumeBase64 = await new Promise<string>((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as string);\n        reader.onerror = (error) => {\n          console.error(\"FileReader error:\", error);\n          reject(error);\n        };\n        reader.readAsDataURL(resumeFile);\n      });\n      console.log(\"Resume converted to base64, length:\", resumeBase64.length);\n\n      console.log(\"Uploading resume to server...\");\n      const uploadResponse = await fetch('/api/upload/resume', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          content: resumeBase64,\n        }),\n      });\n\n      if (!uploadResponse.ok) {\n        const errorData = await uploadResponse.json();\n        console.error(\"Resume upload failed:\", errorData);\n        throw new Error(errorData.message || 'Failed to upload resume');\n      }\n\n      const uploadResult = await uploadResponse.json();\n      console.log(\"Resume upload successful:\", uploadResult);\n\n      // Handle cover letter file upload if present\n      let coverLetterContent = applicationForm.coverLetter || \"\";\n      if (coverLetterFile) {\n        const coverLetterBase64 = await new Promise<string>((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = () => resolve(reader.result as string);\n          reader.onerror = reject;\n          reader.readAsDataURL(coverLetterFile);\n        });\n\n        const coverLetterUploadResponse = await fetch('/api/upload/cover-letter', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            content: coverLetterBase64,\n          }),\n        });\n\n        if (!coverLetterUploadResponse.ok) {\n          const errorData = await coverLetterUploadResponse.json();\n          throw new Error(errorData.message || 'Failed to upload cover letter');\n        }\n\n        const coverLetterUploadResult = await coverLetterUploadResponse.json();\n        coverLetterContent = coverLetterUploadResult.filePath;\n      }\n\n\n      // Update application data with resume path and cover letter content\n      // Ensure phone number has proper +63 format for SMS\n      const formattedPhone = validatedData.phone.startsWith('+63') \n        ? validatedData.phone \n        : `+63${validatedData.phone.replace(/^\\+?63/, '')}`;\n\n      const finalApplicationData = {\n        ...validatedData,\n        phone: formattedPhone,\n        resume: uploadResult.filePath,\n        coverLetter: coverLetterContent,\n        jobId: jobId, // Ensure jobId is preserved\n      };\n\n      console.log(\"Final application data:\", finalApplicationData);\n      console.log(\"Final application data jobId:\", finalApplicationData.jobId);\n      console.log(\"Final application data jobId type:\", typeof finalApplicationData.jobId);\n      console.log(\"Original captured jobId:\", jobId);\n\n      // Double-check that jobId is valid before submitting\n      if (!finalApplicationData.jobId || finalApplicationData.jobId === undefined) {\n        console.error(\"CRITICAL: jobId is still undefined in finalApplicationData!\");\n        console.error(\"finalApplicationData:\", finalApplicationData);\n        toast({\n          title: \"Error\",\n          description: \"Job ID is missing. Please try again.\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      await submitApplication(finalApplicationData);\n    } catch (error) {\n      console.error(\"Application submission error:\", error);\n      \n      if (error instanceof z.ZodError) {\n        const fieldErrors: any = {};\n        error.errors.forEach((err) => {\n          if (err.path[0]) {\n            fieldErrors[err.path[0]] = err.message;\n          }\n        });\n        setErrors(fieldErrors);\n      } else {\n        // Check if it's a file upload error\n        const errorMessage = error instanceof Error ? error.message : \"Failed to submit application\";\n        const isFileUploadError = errorMessage.includes('upload') || errorMessage.includes('file');\n        \n        toast({\n          title: isFileUploadError ? \"File Upload Failed\" : \"Application Failed\",\n          description: errorMessage,\n          variant: \"destructive\"\n        });\n      }\n    }\n  };\n\n  const handleResumeFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      // Validate file type\n      const allowedTypes = [\n        'application/pdf',\n        'application/msword',\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n        'text/plain'\n      ];\n      if (!allowedTypes.includes(file.type)) {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please upload a PDF, Word document, or text file\",\n          variant: \"destructive\"\n        });\n        // Clear the input\n        if (e.target) {\n          e.target.value = '';\n        }\n        return;\n      }\n\n      // Validate file size (5MB limit)\n      if (file.size > 5 * 1024 * 1024) {\n        toast({\n          title: \"File too large\",\n          description: \"File size must be less than 5MB\",\n          variant: \"destructive\"\n        });\n        // Clear the input\n        if (e.target) {\n          e.target.value = '';\n        }\n        return;\n      }\n\n      setResumeFile(file);\n    }\n  };\n\n  const handleCoverLetterFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const maxSize = 2 * 1024 * 1024; // 2MB\n      if (file.size > maxSize) {\n        toast({\n          title: \"File Too Large\",\n          description: \"Cover letter file must be smaller than 2MB\",\n          variant: \"destructive\"\n        });\n        // Clear the input if the file is too large\n        if (e.target) {\n          e.target.value = '';\n        }\n        return;\n      }\n\n      const allowedTypes = ['text/plain', 'application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];\n      if (!allowedTypes.includes(file.type)) {\n        toast({\n          title: \"Invalid File Type\",\n          description: \"Please upload a TXT, PDF, DOC, or DOCX file\",\n          variant: \"destructive\"\n        });\n        // Clear the input if the file type is invalid\n        if (e.target) {\n          e.target.value = '';\n        }\n        return;\n      }\n\n      setCoverLetterFile(file);\n      // Clear text area when file is uploaded\n      updateForm(\"coverLetter\", \"\");\n    }\n  };\n\n  const updateForm = (field: keyof typeof applicationForm, value: string | number) => {\n    setApplicationForm(prev => ({ ...prev, [field]: value }));\n    // Clear specific field error when user types\n    if (errors[field as keyof typeof errors]) {\n      setErrors(prev => ({ ...prev, [field]: undefined }));\n    }\n  };\n\n  const handleClose = () => {\n    resetForm();\n    onClose();\n  };\n\n  if (!job || !job.id) {\n    console.error(\"ApplicationModal: No job or job.id provided\");\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Apply for Position</DialogTitle>\n        </DialogHeader>\n\n        {/* Job Details Summary */}\n        <Card className=\"bg-gray-50\">\n          <CardContent className=\"p-4\">\n            <h4 className=\"font-semibold text-gray-900\">{job.title}</h4>\n            <p className=\"text-gray-600\">{job.company}</p>\n            <div className=\"flex items-center gap-4 text-sm text-gray-500 mt-1\">\n              <span className=\"flex items-center\">\n                <MapPin className=\"mr-1 h-3 w-3\" />\n                {job.location}\n              </span>\n              <span className=\"flex items-center\">\n                <Clock className=\"mr-1 h-3 w-3\" />\n                {job.type}\n              </span>\n              <span className=\"flex items-center\">\n                <span className=\"mr-1 text-xs\">₱</span>\n                {job.salary}\n              </span>\n            </div>\n          </CardContent>\n        </Card>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-3 gap-4\">\n            <div>\n              <Label htmlFor=\"firstName\">First Name *</Label>\n              <Input\n                id=\"firstName\"\n                type=\"text\"\n                value={applicationForm.firstName}\n                onChange={(e) => updateForm(\"firstName\", e.target.value)}\n                required\n                aria-invalid={!!errors.firstName}\n                aria-describedby=\"firstNameError\"\n              />\n              {errors.firstName && <p id=\"firstNameError\" className=\"text-red-500 text-sm\">{errors.firstName}</p>}\n            </div>\n            <div>\n              <Label htmlFor=\"middleName\">Middle Name</Label>\n              <Input\n                id=\"middleName\"\n                type=\"text\"\n                value={applicationForm.middleName}\n                onChange={(e) => updateForm(\"middleName\", e.target.value)}\n                aria-invalid={!!errors.middleName}\n                aria-describedby=\"middleNameError\"\n              />\n              {errors.middleName && <p id=\"middleNameError\" className=\"text-red-500 text-sm\">{errors.middleName}</p>}\n            </div>\n            <div>\n              <Label htmlFor=\"lastName\">Last Name *</Label>\n              <Input\n                id=\"lastName\"\n                type=\"text\"\n                value={applicationForm.lastName}\n                onChange={(e) => updateForm(\"lastName\", e.target.value)}\n                required\n                aria-invalid={!!errors.lastName}\n                aria-describedby=\"lastNameError\"\n              />\n              {errors.lastName && <p id=\"lastNameError\" className=\"text-red-500 text-sm\">{errors.lastName}</p>}\n            </div>\n          </div>\n\n          <div>\n            <Label htmlFor=\"email\">Email Address *</Label>\n            <Input\n              id=\"email\"\n              type=\"email\"\n              value={applicationForm.email}\n              onChange={(e) => updateForm(\"email\", e.target.value)}\n              required\n              aria-invalid={!!errors.email}\n              aria-describedby=\"emailError\"\n            />\n            {errors.email && <p id=\"emailError\" className=\"text-red-500 text-sm\">{errors.email}</p>}\n          </div>\n\n          <div>\n            <Label htmlFor=\"phone\">Phone Number *</Label>\n            <div className=\"flex\">\n              <span className=\"inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border border-r-0 border-gray-300 rounded-l-md\">\n                +63\n              </span>\n              <Input\n                id=\"phone\"\n                type=\"tel\"\n                value={applicationForm.phone}\n                onChange={(e) => {\n                  // Remove all non-digits and any +63 prefix, then clean spaces\n                  const cleaned = e.target.value.replace(/[\\s\\-\\(\\)\\+]/g, '').replace(/^63/, '').replace(/\\D/g, '');\n                  updateForm(\"phone\", cleaned);\n                }}\n                placeholder=\"9171234567\"\n                className=\"rounded-l-none\"\n                required\n                aria-invalid={!!errors.phone}\n                aria-describedby=\"phoneError\"\n              />\n            </div>\n            {errors.phone && <p id=\"phoneError\" className=\"text-red-500 text-sm\">{errors.phone}</p>}\n          </div>\n\n          <div>\n            <Label htmlFor=\"address\">Address</Label>\n            <Select\n              onValueChange={(value) => updateForm(\"address\", value)}\n              value={applicationForm.address || \"\"}\n            >\n              <SelectTrigger className=\"w-full\">\n                <SelectValue placeholder=\"Select your barangay\" />\n              </SelectTrigger>\n              <SelectContent>\n                {PILI_BARANGAYS.map((barangay) => (\n                  <SelectItem key={barangay} value={barangay}>\n                    {barangay}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n\n          <div>\n            <Label htmlFor=\"coverLetter\">Cover Letter / Application Letter</Label>\n            {!coverLetterFile ? (\n              <div className=\"space-y-3\">\n                <Textarea\n                  id=\"coverLetter\"\n                  rows={4}\n                  placeholder=\"Tell us why you're interested in this position...\"\n                  value={applicationForm.coverLetter || \"\"}\n                  onChange={(e) => updateForm(\"coverLetter\", e.target.value)}\n                />\n                <div className=\"text-center\">\n                  <p className=\"text-sm text-gray-500 mb-2\">Or upload a cover letter file</p>\n                  <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center\">\n                    <FileText className=\"mx-auto text-gray-400 h-6 w-6 mb-2\" />\n                    <label htmlFor=\"coverLetterUpload\" className=\"text-primary cursor-pointer hover:underline\">\n                      Upload Cover Letter\n                    </label>\n                    <p className=\"text-xs text-gray-500 mt-1\">TXT, PDF, DOC, DOCX (Max 2MB)</p>\n                    <input\n                      id=\"coverLetterUpload\"\n                      type=\"file\"\n                      accept=\".txt,.pdf,.doc,.docx\"\n                      onChange={handleCoverLetterFileChange}\n                      className=\"hidden\"\n                    />\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg\">\n                  <div className=\"flex items-center\">\n                    <FileText className=\"h-4 w-4 text-green-600 mr-2\" />\n                    <span className=\"text-sm text-green-800\">\n                      Cover letter file: {coverLetterFile.name}\n                    </span>\n                  </div>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => {\n                      setCoverLetterFile(null);\n                      const input = document.getElementById(\"coverLetterUpload\") as HTMLInputElement;\n                      if (input) input.value = \"\";\n                    }}\n                  >\n                    Remove\n                  </Button>\n                </div>\n                <p className=\"text-xs text-gray-500\">\n                  You can still add additional text below if needed:\n                </p>\n                <Textarea\n                  id=\"coverLetterAdditional\"\n                  rows={2}\n                  placeholder=\"Additional notes (optional)...\"\n                  value={applicationForm.coverLetter || \"\"}\n                  onChange={(e) => updateForm(\"coverLetter\", e.target.value)}\n                />\n              </div>\n            )}\n          </div>\n\n          <div>\n            <Label htmlFor=\"resume\">Resume/CV *</Label>\n            <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n              <Upload className=\"mx-auto text-gray-400 h-8 w-8 mb-2\" />\n              <p className=\"text-gray-600\">\n                Drag and drop your resume, or{\" \"}\n                <label htmlFor=\"resumeUpload\" className=\"text-primary cursor-pointer hover:underline\">\n                  browse files\n                </label>\n              </p>\n              <p className=\"text-sm text-gray-500 mt-1\">PDF, DOC, DOCX, TXT (Max 5MB)</p>\n              <input\n                id=\"resumeUpload\"\n                type=\"file\"\n                accept=\".pdf,.doc,.docx,.txt\"\n                onChange={handleResumeFileChange}\n                className=\"hidden\"\n              />\n              {resumeFile && (\n                <div className=\"mt-2 text-sm text-green-600\">\n                  ✓ {resumeFile.name} selected\n                </div>\n              )}\n            </div>\n             {/* Display error if resume is required and not selected */}\n            {!resumeFile && (\n              <p className=\"text-red-500 text-sm mt-2\">Resume is required to apply.</p>\n            )}\n          </div>\n\n          <div className=\"flex gap-3 pt-4\">\n            <Button type=\"button\" variant=\"outline\" onClick={handleClose} className=\"flex-1\">\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={submitApplicationMutation.isPending || !resumeFile} className=\"flex-1\">\n              {submitApplicationMutation.isPending ? \"Submitting...\" : \"Submit Application\"}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}","path":null,"size_bytes":24154,"size_tokens":null},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","path":null,"size_bytes":2154,"size_tokens":null},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), \"overflow-y-auto\", className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","path":null,"size_bytes":4300,"size_tokens":null},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","path":null,"size_bytes":3895,"size_tokens":null},"drizzle.config.ts":{"content":"\nimport { defineConfig } from \"drizzle-kit\";\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL!,\n  },\n});\n","path":null,"size_bytes":220,"size_tokens":null},"server/storage.ts":{"content":"import {\n  jobs,\n  applications,\n  employers,\n  categories,\n  savedJobs,\n  jobAlerts,\n  jobMatches,\n  users,\n  userSessions,\n  type Job,\n  type InsertJob,\n  type UpdateJob,\n  type Application,\n  type InsertApplication,\n  type UpdateApplication,\n  type Employer,\n  type InsertEmployer,\n  type Category,\n  type InsertCategory,\n  type SavedJob,\n  type InsertSavedJob,\n  type JobAlert,\n  type InsertJobAlert,\n  type User,\n  type InsertUser,\n  type RegisterUser,\n  type UserSession,\n  type InsertUserSession,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport {\n  eq,\n  and,\n  or,\n  ilike,\n  desc,\n  asc,\n  sql,\n  count,\n  like,\n  inArray,\n  gte,\n  lt,\n  isNotNull,\n} from \"drizzle-orm\";\nimport { RunResult } from \"better-sqlite3\";\n\n// Ensure we're using PostgreSQL in production\nif (process.env.NODE_ENV === 'production' && !process.env.DATABASE_URL) {\n  throw new Error('DATABASE_URL is required in production');\n}\n\n// Extend RunResult to include rowCount\ninterface CustomRunResult extends RunResult {\n  rowCount?: number;\n}\n\nexport interface IStorage {\n  // Job methods\n  getAllJobs(options?: {\n    includeInactive?: boolean;\n    featuredFirst?: boolean;\n    limit?: number;\n    offset?: number;\n  }): Promise<Job[]>;\n  getJob(id: number): Promise<Job | undefined>;\n  createJob(job: InsertJob): Promise<Job>;\n  updateJob(id: number, job: UpdateJob): Promise<Job | undefined>;\n  deleteJob(id: number): Promise<boolean>;\n  incrementJobViews(id: number): Promise<void>;\n  searchJobs(\n    query: string,\n    filters?: {\n      location?: string;\n      type?: string;\n      category?: string;\n      salary?: string;\n      featuredOnly?: boolean;\n      jobTypes?: string[];\n    },\n    options?: {\n      limit?: number;\n      offset?: number;\n      sortBy?:\n        | \"newest\"\n        | \"oldest\"\n        | \"salary_high\"\n        | \"salary_low\"\n        | \"views\"\n        | \"applications\";\n    }\n  ): Promise<Job[]>;\n  getFeaturedJobs(): Promise<Job[]>;\n  getJobsByCategory(category: string): Promise<Job[]>;\n  getJobsByEmployer(employerId: number): Promise<Job[]>;\n  getApplicationsByEmployer(\n    employerId: number\n  ): Promise<Array<Application & { jobTitle: string }>>;\n\n  // Application methods\n  getApplicationsForJob(jobId: number): Promise<Application[]>;\n  getApplicationsByApplicant(email: string): Promise<\n    Array<\n      Application & {\n        job: {\n          title: string;\n          company: string;\n          location: string;\n          type: string;\n          salary: string;\n        };\n      }\n    >\n  >;\n  createApplication(application: InsertApplication): Promise<Application>;\n  updateApplication(\n    id: number,\n    application: UpdateApplication\n  ): Promise<Application | undefined>;\n  deleteApplication(id: number): Promise<boolean>;\n  getApplicationsByEmail(email: string): Promise<Application[]>;\n  getApplicationById(id: number): Promise<Application | undefined>;\n  getApplicationsByEmployer(employerId: number): Promise<Application[]>;\n\n  // Employer methods\n  createEmployer(employer: InsertEmployer): Promise<Employer>;\n  getEmployer(id: number): Promise<Employer | undefined>;\n  getEmployerByEmail(email: string): Promise<Employer | undefined>;\n  updateEmployer(\n    id: number,\n    employer: Partial<Employer>\n  ): Promise<Employer | undefined>;\n\n  // Category methods\n  getAllCategories(): Promise<Category[]>;\n  createCategory(category: InsertCategory): Promise<Category>;\n  updateCategoryJobCount(\n    categoryName: string,\n    increment: number\n  ): Promise<void>;\n\n  // User methods\n  createUser(user: InsertUser): Promise<User>;\n  getUserById(id: number): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  updateUser(id: number, user: Partial<User>): Promise<User | undefined>;\n  deleteUser(id: number): Promise<boolean>;\n\n  // Saved jobs methods\n  saveJob(userId: number, jobId: number): Promise<SavedJob>;\n  unsaveJob(userId: number, jobId: number): Promise<boolean>;\n  getSavedJobs(userId: number): Promise<Array<{ id: number; userId: number; jobId: number; savedAt: Date; job: Job }>>;\n  isJobSaved(userEmail: string, jobId: number): Promise<boolean>;\n\n  // Job alerts methods\n  createJobAlert(alert: InsertJobAlert): Promise<JobAlert>;\n  getUserJobAlerts(userId: number): Promise<JobAlert[]>;\n  updateJobAlert(\n    id: number,\n    alert: Partial<JobAlert>\n  ): Promise<JobAlert | undefined>;\n  deleteJobAlert(id: number): Promise<boolean>;\n\n  // Analytics methods\n  getJobStats(): Promise<{\n    totalJobs: number;\n    activeJobs: number;\n    totalApplications: number;\n    totalEmployers: number;\n    totalJobSeekers: number;\n    applicationsToday: number;\n    categoriesWithCounts: Array<{ category: string; count: number }>;\n    recentJobs: Job[];\n  }>;\n\n  // Verification methods\n  getPendingVerifications(): Promise<User[]>;\n\n  // Admin methods\n  getAdminStats(): Promise<{\n    totalUsers: number;\n    totalJobs: number;\n    totalApplications: number;\n    activeJobs: number;\n    pendingApplications: number;\n    featuredJobs: number;\n    totalEmployers: number;\n    totalJobSeekers: number;\n    applicationsToday: number;\n    jobsPostedToday: number;\n    usersRegisteredToday: number;\n    jobViewsToday: number;\n  }>;\n  getCategoryStats(): Promise<\n    Array<{\n      category: string;\n      jobCount: number;\n      applicationCount: number;\n      avgSalary: string;\n    }>\n  >;\n  getJobTypeStats(): Promise<\n    Array<{\n      type: string;\n      count: number;\n      percentage: number;\n    }>\n  >;\n  getTrends(): Promise<\n    Array<{\n      date: string;\n      applications: number;\n      jobs: number;\n    }>\n  >;\n  getRecentActivity(): Promise<\n    Array<{\n      id: number;\n      type: \"application\" | \"job_posted\" | \"user_registered\";\n      message: string;\n      timestamp: string;\n    }>\n  >;\n  getAllUsers(): Promise<User[]>;\n  getAllApplicationsAdmin(): Promise<Array<Application & { jobTitle: string }>>;\n  getAllApplicationsWithJobs(): Promise<Array<Application & { job: Job }>>;\n  updateApplication(\n    id: number,\n    application: UpdateApplication\n  ): Promise<Application | undefined>;\n  updateJob(id: number, job: UpdateJob): Promise<Job | undefined>;\n  clearAllData(): Promise<void>;\n  getActivityTrends(): Promise<\n    Array<{\n      day: string;\n      jobs: number;\n      applications: number;\n    }>\n  >;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Job methods\n  async getAllJobs(options?: {\n    includeInactive?: boolean;\n    featuredFirst?: boolean;\n    limit?: number;\n    offset?: number;\n  }): Promise<Job[]> {\n    const baseQuery = db.select().from(jobs);\n\n    if (!options?.includeInactive) {\n      if (options?.featuredFirst) {\n        return await baseQuery\n          .where(eq(jobs.isActive, true))\n          .orderBy(desc(jobs.isFeatured), desc(jobs.postedAt))\n          .limit(options?.limit || 1000)\n          .offset(options?.offset || 0);\n      } else {\n        return await baseQuery\n          .where(eq(jobs.isActive, true))\n          .orderBy(desc(jobs.postedAt))\n          .limit(options?.limit || 1000)\n          .offset(options?.offset || 0);\n      }\n    } else {\n      if (options?.featuredFirst) {\n        return await baseQuery\n          .orderBy(desc(jobs.isFeatured), desc(jobs.postedAt))\n          .limit(options?.limit || 1000)\n          .offset(options?.offset || 0);\n      } else {\n        return await baseQuery\n          .orderBy(desc(jobs.postedAt))\n          .limit(options?.limit || 1000)\n          .offset(options?.offset || 0);\n      }\n    }\n  }\n\n  async getJob(id: number): Promise<Job | undefined> {\n    const result = await db.select().from(jobs).where(eq(jobs.id, id));\n    return result[0] || undefined;\n  }\n\n  async createJob(insertJob: InsertJob): Promise<Job> {\n    const result = await db\n      .insert(jobs)\n      .values({\n        ...insertJob,\n        postedAt: new Date(), // Store as Date object\n        isFeatured: false,\n        viewCount: 0,\n        updatedAt: new Date(),\n      })\n      .returning();\n\n    // Update category count\n    await this.updateCategoryJobCount(insertJob.category, 1);\n\n    return result[0];\n  }\n\n  async updateJob(id: number, jobUpdate: UpdateJob): Promise<Job | undefined> {\n    const result = await db\n      .update(jobs)\n      .set({ ...jobUpdate, updatedAt: new Date() })\n      .where(eq(jobs.id, id))\n      .returning();\n    return result[0] || undefined;\n  }\n\n  async deleteJob(id: number): Promise<boolean> {\n    const job = await this.getJob(id);\n    if (!job) return false;\n\n    // Fix missing rowCount property in RunResult\n    const result = await db.delete(jobs).where(eq(jobs.id, id));\n    return (result.changes ?? 0) > 0;\n  }\n\n  async incrementJobViews(jobId: number): Promise<void> {\n    try {\n      await db\n        .update(jobs)\n        .set({ viewCount: sql`${jobs.viewCount} + 1`, updatedAt: new Date() })\n        .where(eq(jobs.id, jobId));\n    } catch (error) {\n      console.error(\"Error incrementing job views:\", error);\n    }\n  }\n\n  async searchJobs(\n    query: string,\n    filters?: {\n      location?: string;\n      type?: string;\n      category?: string;\n      salary?: string;\n      jobTypes?: string[];\n      featuredOnly?: boolean;\n    },\n    options?: {\n      limit?: number;\n      offset?: number;\n      sortBy?:\n        | \"newest\"\n        | \"oldest\"\n        | \"salary_high\"\n        | \"salary_low\"\n        | \"views\"\n        | \"applications\";\n    }\n  ): Promise<Job[]> {\n    let conditions = [eq(jobs.isActive, true)];\n\n    // Add text search if query provided\n    if (query && query.trim()) {\n      const searchTerm = `%${query.trim().toLowerCase()}%`;\n      conditions.push(\n        or(\n          sql`LOWER(${jobs.title}) LIKE ${searchTerm}`,\n          sql`LOWER(${jobs.company}) LIKE ${searchTerm}`,\n          sql`LOWER(${jobs.description}) LIKE ${searchTerm}`,\n          sql`LOWER(${jobs.category}) LIKE ${searchTerm}`\n        )!\n      );\n    }\n\n    // Apply filters\n    if (\n      filters?.location &&\n      filters.location !== \"Pili (All Areas)\" &&\n      filters.location.trim() !== \"\"\n    ) {\n      const locationTerm = `%${filters.location.trim().toLowerCase()}%`;\n      conditions.push(sql`LOWER(${jobs.location}) LIKE ${locationTerm}`);\n    }\n\n    if (filters?.type) {\n      conditions.push(eq(jobs.type, filters.type));\n    }\n\n    if (filters?.category && filters.category !== \"All Categories\") {\n      conditions.push(eq(jobs.category, filters.category));\n    }\n\n    if (filters?.salary && filters.salary !== \"Any Salary\") {\n      // Handle salary range filtering\n      if (filters.salary.includes(\"-\")) {\n        // For salary ranges like \"₱15,000 - ₱25,000\"\n        const salaryTerm = `%${filters.salary.toLowerCase()}%`;\n        conditions.push(sql`LOWER(${jobs.salary}) LIKE ${salaryTerm}`);\n      } else {\n        conditions.push(eq(jobs.salary, filters.salary));\n      }\n    }\n\n    // Handle multiple job types\n    if (filters?.jobTypes && filters.jobTypes.length > 0) {\n      const jobTypeConditions = filters.jobTypes.map((jobType) =>\n        eq(jobs.type, jobType)\n      );\n      conditions.push(or(...jobTypeConditions)!);\n    }\n\n    if (filters?.featuredOnly) {\n      conditions.push(eq(jobs.isFeatured, true));\n    }\n\n    // Determine sort order\n    let orderByClause;\n    switch (options?.sortBy) {\n      case \"oldest\":\n        orderByClause = asc(jobs.postedAt);\n        break;\n      case \"views\":\n        orderByClause = desc(jobs.viewCount);\n        break;\n      case \"applications\":\n        orderByClause = desc(jobs.applicantCount);\n        break;\n      default:\n        orderByClause = [desc(jobs.isFeatured), desc(jobs.postedAt)];\n    }\n\n    // Build complete query\n    const baseQuery = db\n      .select()\n      .from(jobs)\n      .where(and(...conditions))\n      .orderBy(\n        ...(Array.isArray(orderByClause) ? orderByClause : [orderByClause])\n      );\n\n    // Apply pagination if specified\n    if (options?.limit && options?.offset) {\n      return await baseQuery.limit(options.limit).offset(options.offset);\n    } else if (options?.limit) {\n      return await baseQuery.limit(options.limit);\n    } else if (options?.offset) {\n      return await baseQuery.offset(options.offset);\n    } else {\n      return await baseQuery;\n    }\n  }\n\n  async getFeaturedJobs(): Promise<Job[]> {\n    return await db\n      .select()\n      .from(jobs)\n      .where(and(eq(jobs.isActive, true), eq(jobs.isFeatured, true)))\n      .orderBy(desc(jobs.postedAt));\n  }\n\n  async getJobsByCategory(category: string): Promise<Job[]> {\n    return await db\n      .select()\n      .from(jobs)\n      .where(and(eq(jobs.category, category), eq(jobs.isActive, true)))\n      .orderBy(desc(jobs.postedAt));\n  }\n\n  async getJobsByEmployer(employerId: number): Promise<Job[]> {\n    return await db\n      .select()\n      .from(jobs)\n      .where(eq(jobs.employerId, employerId))\n      .orderBy(desc(jobs.postedAt));\n  }\n\n  async getApplicationsByEmployer(\n    employerId: number\n  ): Promise<Array<Application & { jobTitle: string }>> {\n    const applicationsWithJobTitles = await db\n      .select({\n        id: applications.id,\n        jobId: applications.jobId,\n        applicantId: applications.applicantId,\n        firstName: applications.firstName,\n        lastName: applications.lastName,\n        email: applications.email,\n        phone: applications.phone,\n        address: applications.address,\n        coverLetter: applications.coverLetter,\n        resume: applications.resume,\n        status: applications.status,\n        notes: applications.notes,\n        smsNotificationSent: applications.smsNotificationSent,\n        appliedAt: applications.appliedAt,\n        updatedAt: applications.updatedAt,\n        jobTitle: jobs.title,\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .where(eq(jobs.employerId, employerId))\n      .orderBy(desc(applications.appliedAt));\n\n    return applicationsWithJobTitles;\n  }\n\n  // Application methods\n  async getApplicationsForJob(jobId: number): Promise<Application[]> {\n    return await db\n      .select({\n        id: applications.id,\n        jobId: applications.jobId,\n        applicantId: applications.applicantId,\n        firstName: applications.firstName,\n        lastName: applications.lastName,\n        email: applications.email,\n        phone: applications.phone,\n        address: applications.address,\n        coverLetter: applications.coverLetter,\n        resume: applications.resume,\n        status: applications.status,\n        notes: applications.notes,\n        smsNotificationSent: applications.smsNotificationSent,\n        appliedAt: applications.appliedAt,\n        updatedAt: applications.updatedAt,\n      })\n      .from(applications)\n      .where(eq(applications.jobId, jobId))\n      .orderBy(desc(applications.appliedAt));\n  }\n\n  // Scout Candidates for Employers\n  async scoutCandidates(filters: {\n    skills: string[];\n    experienceLevel?: string;\n    location?: string;\n  }): Promise<Array<{\n    id: number;\n    firstName: string;\n    lastName: string;\n    email: string;\n    phone: string | null;\n    address: string | null;\n    skills: string | null;\n    desiredRoles: string | null;\n    experienceLevel: string | null;\n    preferredLocation: string | null;\n    matchScore: number;\n    matchingSkills: string[];\n  }>> {\n    // Get all job seekers with profiles\n    const jobSeekers = await db\n      .select({\n        id: users.id,\n        firstName: users.firstName,\n        lastName: users.lastName,\n        email: users.email,\n        phone: users.phone,\n        address: users.address,\n        skills: users.skills,\n        desiredRoles: users.desiredRoles,\n        experienceLevel: users.experienceLevel,\n        preferredLocation: users.preferredLocation,\n      })\n      .from(users)\n      .where(\n        and(\n          eq(users.role, 'jobseeker'),\n          eq(users.isActive, true),\n          isNotNull(users.skills)\n        )\n      );\n\n    const searchSkills = filters.skills.map(s => s.toLowerCase().trim());\n\n    // Score each candidate\n    const scoredCandidates = jobSeekers.map(candidate => {\n      const candidateSkills = (candidate.skills || '').toLowerCase().split(',').map(s => s.trim());\n      const candidateRoles = (candidate.desiredRoles || '').toLowerCase().split(',').map(r => r.trim());\n\n      // Combine all candidate text for comprehensive matching\n      const allCandidateText = `${candidate.skills || ''} ${candidate.desiredRoles || ''}`.toLowerCase();\n\n      // Find matching skills with VERY flexible matching\n      const matchingSkills: string[] = [];\n      let totalMatches = 0;\n\n      for (const searchSkill of searchSkills) {\n        let found = false;\n\n        // Check each candidate skill for partial match\n        for (const candidateSkill of candidateSkills) {\n          if (candidateSkill.includes(searchSkill) || searchSkill.includes(candidateSkill)) {\n            if (!matchingSkills.includes(candidateSkill)) {\n              matchingSkills.push(candidateSkill);\n            }\n            found = true;\n            totalMatches += 3; // Full skill match\n          }\n        }\n\n        // Also check roles\n        for (const role of candidateRoles) {\n          if (role.includes(searchSkill) || searchSkill.includes(role)) {\n            if (!matchingSkills.includes(role)) {\n              matchingSkills.push(role);\n            }\n            found = true;\n            totalMatches += 2; // Role match\n          }\n        }\n\n        // Check for word-level matches in all text\n        if (!found && allCandidateText.includes(searchSkill)) {\n          matchingSkills.push(searchSkill);\n          totalMatches += 1; // Partial match\n        }\n      }\n\n      // Calculate skill match percentage - very generous scoring\n      let skillMatchScore = 0;\n      if (searchSkills.length > 0 && matchingSkills.length > 0) {\n        // Give 100% if any match is found\n        const matchRatio = totalMatches / (searchSkills.length * 3);\n        skillMatchScore = Math.min(100, Math.round(matchRatio * 100));\n\n        // Boost score if we have direct matches\n        if (matchingSkills.length >= searchSkills.length) {\n          skillMatchScore = 100;\n        }\n      }\n\n      // Experience level match (bonus)\n      let experienceBonus = 0;\n      if (filters.experienceLevel && candidate.experienceLevel === filters.experienceLevel) {\n        experienceBonus = 20;\n      }\n\n      // Location removed since all candidates are from Pili\n\n      const matchScore = Math.min(100, skillMatchScore + experienceBonus);\n\n      return {\n        ...candidate,\n        matchScore,\n        matchingSkills,\n      };\n    });\n\n    // Filter candidates with at least one matching skill and sort by score\n    return scoredCandidates\n      .filter(candidate => candidate.matchingSkills.length > 0)\n      .sort((a, b) => b.matchScore - a.matchScore);\n  }\n\n  // Job Matching Methods\n  async calculateJobMatch(userId: number, jobId: number): Promise<{\n    matchScore: number;\n    skillMatch: number;\n    locationMatch: number;\n    roleMatch: number;\n  }> {\n    const user = await this.getUserById(userId);\n    const job = await this.getJob(jobId);\n\n    if (!user || !job) {\n      return { matchScore: 0, skillMatch: 0, locationMatch: 0, roleMatch: 0 };\n    }\n\n    // Parse user skills and roles into individual words (including 2-letter words for max sensitivity)\n    const userSkills = (user.skills || '').toLowerCase().split(',').map(s => s.trim()).filter(s => s);\n    const userSkillWords = userSkills.flatMap(skill => skill.split(/\\s+/)).filter(w => w.length > 1);\n\n    // Build comprehensive job text for matching - include ALL text fields\n    const jobText = `${job.title || ''} ${job.description || ''} ${job.requirements || ''} ${job.category || ''} ${job.requiredSkills || ''} ${job.benefits || ''} ${job.company || ''}`.toLowerCase();\n\n    // Calculate skill match (50% weight) - ULTRA sensitive matching\n    let skillMatch = 0;\n    if (userSkills.length > 0 || userSkillWords.length > 0) {\n      let matchCount = 0;\n      let totalWords = userSkillWords.length;\n\n      // Check each skill phrase\n      for (const skill of userSkills) {\n        if (jobText.includes(skill)) {\n          matchCount += 3; // Full phrase match gets triple points\n        }\n      }\n\n      // Check individual skill words - ANY word match counts!\n      for (const word of userSkillWords) {\n        if (jobText.includes(word)) {\n          matchCount += 1;\n        }\n      }\n\n      // Give high score even for a single match\n      if (matchCount > 0) {\n        // Even 1 match out of 10 words = 30% skill match\n        skillMatch = Math.min(100, (matchCount / Math.max(1, totalWords)) * 300);\n      }\n    }\n\n    // Calculate role match (50% weight) - ULTRA sensitive (location removed since all in Pili)\n    let roleMatch = 0;\n    const desiredRoles = (user.desiredRoles || '').toLowerCase().split(',').map(r => r.trim()).filter(r => r);\n    const desiredRoleWords = desiredRoles.flatMap(role => role.split(/\\s+/)).filter(w => w.length > 1);\n    const jobTitle = job.title.toLowerCase();\n    const jobCategory = (job.category || '').toLowerCase();\n    const jobTitleAndCategory = `${jobTitle} ${jobCategory} ${jobText}`;\n\n    if (desiredRoles.length > 0 || desiredRoleWords.length > 0) {\n      let roleMatchCount = 0;\n      let totalRoleWords = desiredRoleWords.length;\n\n      // Check full role phrases\n      for (const role of desiredRoles) {\n        if (jobTitleAndCategory.includes(role)) {\n          roleMatchCount += 3;\n        }\n      }\n\n      // Check individual role words - ANY word match counts!\n      for (const word of desiredRoleWords) {\n        if (jobTitleAndCategory.includes(word)) {\n          roleMatchCount += 1;\n        }\n      }\n\n      // Give high score even for a single match\n      if (roleMatchCount > 0) {\n        roleMatch = Math.min(100, (roleMatchCount / Math.max(1, totalRoleWords)) * 300);\n      }\n    }\n\n    // Calculate weighted total score (location removed since all in Pili)\n    const matchScore = (skillMatch * 0.5) + (roleMatch * 0.5);\n\n    return {\n      matchScore: Math.round(matchScore),\n      skillMatch: Math.round(skillMatch),\n      locationMatch: 0, // Not used\n      roleMatch: Math.round(roleMatch)\n    };\n  }\n\n  async getJobRecommendations(userId: number, limit: number = 20): Promise<any[]> {\n    const user = await this.getUserById(userId);\n    if (!user || user.role !== 'jobseeker') {\n      return [];\n    }\n\n    // Get all active jobs\n    const activeJobs = await this.getAllJobs({ includeInactive: false });\n\n    if (activeJobs.length === 0) {\n      console.log(\"No active jobs found for recommendations\");\n      return [];\n    }\n\n    console.log(`Found ${activeJobs.length} active jobs for recommendations`);\n\n    // Calculate match scores for each job\n    const matches = await Promise.all(\n      activeJobs.map(async (job) => {\n        const scores = await this.calculateJobMatch(userId, job.id);\n        return {\n          ...job,\n          matchScore: scores.matchScore,\n          skillMatch: scores.skillMatch,\n          locationMatch: scores.locationMatch,\n          roleMatch: scores.roleMatch\n        };\n      })\n    );\n\n    // Filter jobs with score > 6 (5-7% threshold for better matching accuracy) and sort by match score\n    const recommendations = matches\n      .filter(m => m.matchScore > 6)\n      .sort((a, b) => b.matchScore - a.matchScore)\n      .slice(0, limit);\n\n    console.log(`Filtered to ${recommendations.length} recommendations with score > 6 (6% minimum match)`);\n\n    // Store matches in database\n    for (const rec of recommendations) {\n      try {\n        await db.insert(jobMatches)\n          .values({\n            userId,\n            jobId: rec.id,\n            matchScore: rec.matchScore,\n            skillMatch: rec.skillMatch,\n            locationMatch: rec.locationMatch,\n            roleMatch: rec.roleMatch,\n          })\n          .onConflictDoUpdate({\n            target: [jobMatches.userId, jobMatches.jobId],\n            set: {\n              matchScore: rec.matchScore,\n              skillMatch: rec.skillMatch,\n              locationMatch: rec.locationMatch,\n              roleMatch: rec.roleMatch,\n            }\n          });\n      } catch (error) {\n        console.error(\"Error storing job match:\", error);\n      }\n    }\n\n    return recommendations;\n  }\n\n  async updateMatchFeedback(userId: number, jobId: number, feedback: 'thumbs_up' | 'thumbs_down'): Promise<void> {\n    await db.update(jobMatches)\n      .set({ userFeedback: feedback })\n      .where(and(\n        eq(jobMatches.userId, userId),\n        eq(jobMatches.jobId, jobId)\n      ));\n  }\n\n\n  async createApplication(\n    insertApplication: InsertApplication\n  ): Promise<Application> {\n    const result = await db\n      .insert(applications)\n      .values({\n        ...insertApplication,\n        appliedAt: new Date(), // Store as Date object\n        status: \"pending\",\n        updatedAt: new Date(),\n      })\n      .returning();\n\n    // Increment applicant count for the job\n    await db\n      .update(jobs)\n      .set({ applicantCount: sql`${jobs.applicantCount} + 1` })\n      .where(eq(jobs.id, insertApplication.jobId));\n\n    return result[0];\n  }\n\n  async updateApplication(\n    id: number,\n    applicationUpdate: UpdateApplication\n  ): Promise<Application | undefined> {\n    const result = await db\n      .update(applications)\n      .set({ ...applicationUpdate, updatedAt: new Date() })\n      .where(eq(applications.id, id))\n      .returning();\n    return result[0] || undefined;\n  }\n\n  async deleteApplication(id: number): Promise<boolean> {\n    const application = await this.getApplicationById(id);\n    if (!application) return false;\n\n    const result: CustomRunResult = await db\n      .delete(applications)\n      .where(eq(applications.id, id));\n\n    // Decrement applicant count for the job\n    await db\n      .update(jobs)\n      .set({ applicantCount: sql`${jobs.applicantCount} - 1` })\n      .where(eq(jobs.id, application.jobId));\n\n    return result.changes > 0;\n  }\n\n  async getApplicationsByEmail(email: string): Promise<Application[]> {\n    return await db\n      .select()\n      .from(applications)\n      .where(eq(applications.email, email))\n      .orderBy(desc(applications.appliedAt));\n  }\n\n  async getApplicationsByApplicant(email: string): Promise<\n    Array<\n      Application & {\n        job: {\n          title: string;\n          company: string;\n          location: string;\n          type: string;\n          salary: string;\n        };\n      }\n    >\n  > {\n    const applicationsWithJobs = await db\n      .select({\n        id: applications.id,\n        jobId: applications.jobId,\n        applicantId: applications.applicantId,\n        firstName: applications.firstName,\n        lastName: applications.lastName,\n        email: applications.email,\n        phone: applications.phone,\n        address: applications.address,\n        coverLetter: applications.coverLetter,\n        resume: applications.resume,\n        status: applications.status,\n        notes: applications.notes,\n        smsNotificationSent: applications.smsNotificationSent,\n        appliedAt: applications.appliedAt,\n        updatedAt: applications.updatedAt,\n        job: {\n          title: jobs.title,\n          company: jobs.company,\n          location: jobs.location,\n          type: jobs.type,\n          salary: jobs.salary,\n        },\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .where(eq(applications.email, email))\n      .orderBy(desc(applications.appliedAt));\n\n    return applicationsWithJobs;\n  }\n\n  async getApplicationById(id: number): Promise<Application | undefined> {\n    const result = await db\n      .select()\n      .from(applications)\n      .where(eq(applications.id, id));\n    return result[0] || undefined;\n  }\n\n  // Employer methods\n  async createEmployer(employer: InsertEmployer): Promise<Employer> {\n    const result = await db.insert(employers).values(employer).returning();\n    return result[0];\n  }\n\n  async getEmployer(id: number): Promise<Employer | undefined> {\n    const result = await db\n      .select()\n      .from(employers)\n      .where(eq(employers.id, id));\n    return result[0] || undefined;\n  }\n\n  async getEmployerByEmail(email: string): Promise<Employer | undefined> {\n    const result = await db\n      .select()\n      .from(employers)\n      .where(eq(employers.email, email));\n    return result[0] || undefined;\n  }\n\n  async updateEmployer(\n    id: number,\n    employerUpdate: Partial<Employer>\n  ): Promise<Employer | undefined> {\n    const result = await db\n      .update(employers)\n      .set({ ...employerUpdate, updatedAt: new Date() })\n      .where(eq(employers.id, id))\n      .returning();\n    return result[0] || undefined;\n  }\n\n  // Category methods\n  async getAllCategories(): Promise<Category[]> {\n    return await db\n      .select()\n      .from(categories)\n      .where(eq(categories.isActive, true))\n      .orderBy(desc(categories.jobCount), asc(categories.name));\n  }\n\n  async createCategory(category: InsertCategory): Promise<Category> {\n    const result = await db.insert(categories).values(category).returning();\n    return result[0];\n  }\n\n  async updateCategoryJobCount(\n    categoryName: string,\n    increment: number\n  ): Promise<void> {\n    await db\n      .update(categories)\n      .set({ jobCount: sql`${categories.jobCount} + ${increment}` })\n      .where(eq(categories.name, categoryName));\n  }\n\n  // User methods\n  async createUser(user: InsertUser): Promise<User> {\n    const userData = {\n      ...user,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      verificationStatus: user.role === \"employer\" ? \"pending\" : null,\n    };\n\n    const result = await db.insert(users).values(userData).returning();\n    return result[0];\n  }\n\n  async getUserById(id: number): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id));\n    return result[0] || undefined;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.email, email));\n    return result[0] || undefined;\n  }\n\n  async updateUser(id: number, user: Partial<User>): Promise<User | undefined> {\n    const result = await db\n      .update(users)\n      .set({ ...user, updatedAt: new Date() })\n      .where(eq(users.id, id))\n      .returning();\n    return result[0] || undefined;\n  }\n\n  async deleteUser(id: number): Promise<boolean> {\n    const result = await db.delete(users).where(eq(users.id, id));\n    return (result.changes ?? 0) > 0;\n  }\n\n  // Saved jobs methods\n  async saveJob(userId: number, jobId: number): Promise<SavedJob> {\n    const [savedJob] = await db\n      .insert(savedJobs)\n      .values({ userId, jobId })\n      .onConflictDoNothing()\n      .returning();\n    return savedJob;\n  }\n\n  async unsaveJob(userId: number, jobId: number): Promise<boolean> {\n    const result = await db\n      .delete(savedJobs)\n      .where(and(eq(savedJobs.userId, userId), eq(savedJobs.jobId, jobId)));\n    return result.changes > 0;\n  }\n\n  async getSavedJobs(userId: number): Promise<Array<{ id: number; userId: number; jobId: number; savedAt: Date; job: Job }>> {\n    const result = await db\n      .select({\n        id: savedJobs.id,\n        userId: savedJobs.userId,\n        jobId: savedJobs.jobId,\n        savedAt: savedJobs.savedAt,\n        job: jobs\n      })\n      .from(savedJobs)\n      .innerJoin(jobs, eq(savedJobs.jobId, jobs.id))\n      .where(eq(savedJobs.userId, userId))\n      .orderBy(desc(savedJobs.savedAt));\n\n    return result;\n  }\n\n  async isJobSaved(userEmail: string, jobId: number): Promise<boolean> {\n    // For backward compatibility, convert email to user ID\n    const user = await this.getUserByEmail(userEmail);\n    if (!user) return false;\n\n    const result = await db\n      .select()\n      .from(savedJobs)\n      .where(and(eq(savedJobs.userId, user.id), eq(savedJobs.jobId, jobId)));\n    return result.length > 0;\n  }\n\n  // Job alerts methods\n  async createJobAlert(alert: InsertJobAlert): Promise<JobAlert> {\n    const result = await db.insert(jobAlerts).values(alert).returning();\n    return result[0];\n  }\n\n  async getUserJobAlerts(userId: number): Promise<JobAlert[]> {\n    return await db\n      .select()\n      .from(jobAlerts)\n      .where(eq(jobAlerts.userId, userId))\n      .orderBy(desc(jobAlerts.createdAt));\n  }\n\n  // For backward compatibility\n  async getJobAlerts(userEmail: string): Promise<JobAlert[]> {\n    const user = await this.getUserByEmail(userEmail);\n    if (!user) return [];\n    return this.getUserJobAlerts(user.id);\n  }\n\n  async updateJobAlert(\n    id: number,\n    alertUpdate: Partial<JobAlert>\n  ): Promise<JobAlert | undefined> {\n    const result = await db\n      .update(jobAlerts)\n      .set(alertUpdate)\n      .where(eq(jobAlerts.id, id))\n      .returning();\n    return result[0] || undefined;\n  }\n\n  async deleteJobAlert(id: number): Promise<boolean> {\n    const result = await db.delete(jobAlerts).where(eq(jobAlerts.id, id));\n    return result.changes > 0;\n  }\n\n  // Analytics methods\n  async getJobStats(): Promise<{\n    totalJobs: number;\n    activeJobs: number;\n    totalApplications: number;\n    totalEmployers: number;\n    totalJobSeekers: number;\n    applicationsToday: number;\n    categoriesWithCounts: Array<{ category: string; count: number }>;\n    recentJobs: Job[];\n  }> {\n    const allJobs = await this.getAllJobs();\n    const allApplications = await db.select().from(applications);\n\n    // Get real employer and job seeker counts\n    const [totalEmployers] = await db\n      .select({ count: count() })\n      .from(users)\n      .where(eq(users.role, \"employer\"));\n\n    const [totalJobSeekers] = await db\n      .select({ count: count() })\n      .from(users)\n      .where(eq(users.role, \"jobseeker\"));\n\n    // Get today's application count\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    const applicationsToday = await db\n      .select({ count: sql<number>`count(*)` })\n      .from(applications)\n      .where(gte(applications.appliedAt, today))\n      .then((rows) => rows[0]?.count || 0);\n\n    // Get category counts\n    const categoriesWithCounts = await db\n      .select({\n        category: jobs.category,\n        count: count(),\n      })\n      .from(jobs)\n      .where(eq(jobs.isActive, true))\n      .groupBy(jobs.category);\n\n    return {\n      activeJobs: allJobs.filter((job) => job.isActive).length,\n      totalJobs: allJobs.length,\n      totalApplications: allApplications.length,\n      totalEmployers: totalEmployers.count || 0,\n      totalJobSeekers: totalJobSeekers.count || 0,\n      applicationsToday: applicationsToday,\n      categoriesWithCounts: categoriesWithCounts,\n      recentJobs: allJobs\n        .filter((job) => job.isActive)\n        .sort(\n          (a, b) =>\n            new Date(b.postedAt).getTime() - new Date(a.postedAt).getTime()\n        )\n        .slice(0, 5),\n    };\n  }\n\n  // Admin methods\n  async getAdminStats() {\n    console.log(\"=== GETTING ADMIN STATS BASED ON RECENT ACTIVITY ===\");\n\n    // Get basic counts\n    const [totalUsers] = await db.select({ count: count() }).from(users);\n    const [totalJobs] = await db.select({ count: count() }).from(jobs);\n    const [totalApplications] = await db\n      .select({ count: count() })\n      .from(applications);\n    const [activeJobs] = await db\n      .select({ count: count() })\n      .from(jobs)\n      .where(eq(jobs.isActive, true));\n    const [pendingApplications] = await db\n      .select({ count: count() })\n      .from(applications)\n      .where(eq(applications.status, \"pending\"));\n    const [featuredJobs] = await db\n      .select({ count: count() })\n      .from(jobs)\n      .where(eq(jobs.isFeatured, true));\n    const [totalEmployers] = await db\n      .select({ count: count() })\n      .from(users)\n      .where(eq(users.role, \"employer\"));\n    const [totalJobSeekers] = await db\n      .select({ count: count() })\n      .from(users)\n      .where(eq(users.role, \"jobseeker\"));\n\n    // Get recent activity to determine \"today\" based on actual data\n    const recentJobs = await db\n      .select({ postedAt: jobs.postedAt })\n      .from(jobs)\n      .orderBy(desc(jobs.postedAt))\n      .limit(10);\n\n    const recentApplications = await db\n      .select({ appliedAt: applications.appliedAt })\n      .from(applications)\n      .orderBy(desc(applications.appliedAt))\n      .limit(10);\n\n    const recentUsers = await db\n      .select({ createdAt: users.createdAt })\n      .from(users)\n      .orderBy(desc(users.createdAt))\n      .limit(10);\n\n    // Find the most recent activity date to use as \"today\"\n    const allDates = [\n      ...recentJobs.map(j => j.postedAt),\n      ...recentApplications.map(a => a.appliedAt),\n      ...recentUsers.map(u => u.createdAt)\n    ].filter(Boolean);\n\n    let applicationsToday = 0;\n    let jobsPostedToday = 0;\n    let usersRegisteredToday = 0;\n\n    if (allDates.length > 0) {\n      const latestDate = new Date(Math.max(...allDates.map(d => d.getTime())));\n      const startOfDay = new Date(\n        latestDate.getFullYear(),\n        latestDate.getMonth(),\n        latestDate.getDate()\n      );\n      const endOfDay = new Date(\n        latestDate.getFullYear(),\n        latestDate.getMonth(),\n        latestDate.getDate() + 1\n      );\n\n      console.log(\"Using latest activity date as 'today':\", latestDate.toISOString());\n      console.log(\"Date range:\", startOfDay.toISOString(), \"to\", endOfDay.toISOString());\n\n      // Count activities for \"today\" (the most recent activity day)\n      applicationsToday = recentApplications.filter(a =>\n        a.appliedAt >= startOfDay && a.appliedAt < endOfDay\n      ).length;\n\n      jobsPostedToday = recentJobs.filter(j =>\n        j.postedAt >= startOfDay && j.postedAt < endOfDay\n      ).length;\n\n      usersRegisteredToday = recentUsers.filter(u =>\n        u.createdAt >= startOfDay && u.createdAt < endOfDay\n      ).length;\n\n      console.log(\"Today's counts:\", { applicationsToday, jobsPostedToday, usersRegisteredToday });\n    }\n\n    // Get total job views from all active jobs\n    const [jobViewsToday] = await db\n      .select({\n        totalViews: sql<number>`COALESCE(SUM(${jobs.viewCount}), 0)`,\n      })\n      .from(jobs)\n      .where(eq(jobs.isActive, true));\n\n    const result = {\n      totalUsers: totalUsers?.count || 0,\n      totalJobs: totalJobs?.count || 0,\n      totalApplications: totalApplications?.count || 0,\n      activeJobs: activeJobs?.count || 0,\n      pendingApplications: pendingApplications?.count || 0,\n      featuredJobs: featuredJobs?.count || 0,\n      totalEmployers: totalEmployers?.count || 0,\n      totalJobSeekers: totalJobSeekers?.count || 0,\n      applicationsToday: applicationsToday,\n      jobsPostedToday: jobsPostedToday,\n      usersRegisteredToday: usersRegisteredToday,\n      jobViewsToday: jobViewsToday?.totalViews || 0,\n    };\n\n    console.log(\"Final admin stats:\", result);\n    return result;\n  }\n\n  async getCategoryStats() {\n    const categoryStats = await db\n      .select({\n        category: jobs.category,\n        jobCount: count(jobs.id),\n        applicationCount: count(applications.id),\n      })\n      .from(jobs)\n      .leftJoin(applications, eq(jobs.id, applications.jobId))\n      .groupBy(jobs.category);\n\n    return categoryStats.map((stat) => ({\n      category: stat.category,\n      jobCount: stat.jobCount,\n      applicationCount: stat.applicationCount || 0,\n      avgSalary: \"₱15,000 - ₱30,000\", // Placeholder for now\n    }));\n  }\n\n  async getJobTypeStats() {\n    const typeStats = await db\n      .select({\n        type: jobs.type,\n        count: count(),\n      })\n      .from(jobs)\n      .where(eq(jobs.isActive, true))\n      .groupBy(jobs.type);\n\n    const totalCount = typeStats.reduce((sum, stat) => sum + stat.count, 0);\n\n    return typeStats.map((stat) => ({\n      type: stat.type,\n      count: stat.count,\n      percentage: Math.round((stat.count / totalCount) * 100),\n    }));\n  }\n\n  async getTrends() {\n    console.log(\"=== GETTING TRENDS BASED ON RECENT ACTIVITY ===\");\n\n    // Get recent activity data that we know exists\n    const recentJobs = await db\n      .select({ id: jobs.id, postedAt: jobs.postedAt, title: jobs.title })\n      .from(jobs)\n      .orderBy(desc(jobs.postedAt))\n      .limit(10);\n\n    const recentApplications = await db\n      .select({ id: applications.id, appliedAt: applications.appliedAt, jobId: applications.jobId })\n      .from(applications)\n      .orderBy(desc(applications.appliedAt))\n      .limit(10);\n\n    const recentUsers = await db\n      .select({ id: users.id, createdAt: users.createdAt, email: users.email })\n      .from(users)\n      .orderBy(desc(users.createdAt))\n      .limit(10);\n\n    console.log(\"Recent jobs:\", recentJobs);\n    console.log(\"Recent applications:\", recentApplications);\n    console.log(\"Recent users:\", recentUsers);\n\n    // Create trends data based on the actual recent activity\n    const trends = [];\n\n    // Get the most recent date from all activities\n    const allDates = [\n      ...recentJobs.map(j => j.postedAt),\n      ...recentApplications.map(a => a.appliedAt),\n      ...recentUsers.map(u => u.createdAt)\n    ].filter(Boolean);\n\n    if (allDates.length === 0) {\n      console.log(\"No recent activity found\");\n      return [{ date: 'No Data', jobs: 0, applications: 0, users: 0 }];\n    }\n\n    const latestDate = new Date(Math.max(...allDates.map(d => d.getTime())));\n    console.log(\"Latest activity date:\", latestDate.toISOString());\n\n    // Create 7 days of data centered around the most recent activity\n    for (let i = 6; i >= 0; i--) {\n      const date = new Date(latestDate.getTime() - i * 24 * 60 * 60 * 1000);\n      const startOfDay = new Date(\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate()\n      );\n      const endOfDay = new Date(\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate() + 1\n      );\n\n      // Count activities for this day\n      const jobsCount = recentJobs.filter(j =>\n        j.postedAt >= startOfDay && j.postedAt < endOfDay\n      ).length;\n\n      const applicationsCount = recentApplications.filter(a =>\n        a.appliedAt >= startOfDay && a.appliedAt < endOfDay\n      ).length;\n\n      const usersCount = recentUsers.filter(u =>\n        u.createdAt >= startOfDay && u.createdAt < endOfDay\n      ).length;\n\n      const dayData = {\n        date: `${date.getMonth() + 1}/${date.getDate()}`,\n        jobs: jobsCount,\n        applications: applicationsCount,\n        users: usersCount,\n      };\n\n      console.log(`Day ${i} (${date.toISOString()}):`, dayData);\n      trends.push(dayData);\n    }\n\n    console.log(\"Final trends based on recent activity:\", trends);\n    return trends;\n  }\n\n  async getRecentActivity() {\n    // Get recent applications\n    const recentApps = await db\n      .select({\n        id: applications.id,\n        firstName: applications.firstName,\n        lastName: applications.lastName,\n        appliedAt: applications.appliedAt,\n        jobTitle: jobs.title,\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .orderBy(desc(applications.appliedAt))\n      .limit(5);\n\n    // Get recent job postings\n    const recentJobs = await db\n      .select({\n        id: jobs.id,\n        title: jobs.title,\n        company: jobs.company,\n        postedAt: jobs.postedAt,\n      })\n      .from(jobs)\n      .orderBy(desc(jobs.postedAt))\n      .limit(5);\n\n    // Get recent user registrations\n    const recentUsers = await db\n      .select({\n        id: users.id,\n        firstName: users.firstName,\n        lastName: users.lastName,\n        role: users.role,\n        createdAt: users.createdAt,\n      })\n      .from(users)\n      .orderBy(desc(users.createdAt))\n      .limit(5);\n\n    // Combine all activities\n    const activities: any[] = [];\n\n    recentApps.forEach((app) => {\n      activities.push({\n        id: `app-${app.id}`,\n        type: \"application\",\n        message: `${app.firstName} ${app.lastName} applied for ${app.jobTitle}`,\n        timestamp: app.appliedAt,\n      });\n    });\n\n    recentJobs.forEach((job) => {\n      activities.push({\n        id: `job-${job.id}`,\n        type: \"job_posted\",\n        message: `New job posted: ${job.title} at ${job.company}`,\n        timestamp: job.postedAt,\n      });\n    });\n\n    recentUsers.forEach((user) => {\n      activities.push({\n        id: `user-${user.id}`,\n        type: \"user_registered\",\n        message: `${user.firstName} ${user.lastName} registered as ${user.role}`,\n        timestamp: user.createdAt,\n      });\n    });\n\n    // Sort by timestamp (most recent first)\n    activities.sort((a, b) => b.timestamp - a.timestamp);\n\n    return activities.slice(0, 10);\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users).orderBy(desc(users.createdAt));\n  }\n\n  async getAllApplicationsAdmin() {\n    const applicationsWithJobTitles = await db\n      .select({\n        id: applications.id,\n        firstName: applications.firstName,\n        lastName: applications.lastName,\n        email: applications.email,\n        phone: applications.phone,\n        address: applications.address,\n        coverLetter: applications.coverLetter,\n        status: applications.status,\n        smsNotificationSent: applications.smsNotificationSent,\n        appliedAt: applications.appliedAt,\n        jobTitle: jobs.title,\n        jobId: applications.jobId,\n        applicantId: applications.applicantId,\n        resume: applications.resume,\n        notes: applications.notes,\n        updatedAt: applications.updatedAt,\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .orderBy(desc(applications.appliedAt));\n\n    return applicationsWithJobTitles;\n  }\n\n  async getAllTablesData() {\n    const tableNames = [\n      \"users\",\n      \"jobs\",\n      \"applications\",\n      \"employers\",\n      \"categories\",\n      \"saved_jobs\",\n      \"job_alerts\",\n      \"user_sessions\",\n      \"sessions\",\n    ];\n    const tablesData = [];\n\n    for (const tableName of tableNames) {\n      try {\n        const tableData = await this.getTableData(tableName);\n        tablesData.push(tableData);\n      } catch (error) {\n        console.error(`Error fetching data for table ${tableName}:`, error);\n        tablesData.push({\n          name: tableName,\n          rows: [],\n          columns: [],\n          error: error instanceof Error ? error.message : 'Unknown error',\n        });\n      }\n    }\n\n    return tablesData;\n  }\n\n  async getTableData(tableName: string) {\n    let tableSchema;\n    let rows;\n\n    switch (tableName) {\n      case \"users\":\n        tableSchema = users;\n        rows = await db.select().from(users);\n        break;\n      case \"jobs\":\n        tableSchema = jobs;\n        rows = await db.select().from(jobs);\n        break;\n      case \"applications\":\n        tableSchema = applications;\n        rows = await db.select().from(applications);\n        break;\n      case \"employers\":\n        tableSchema = employers;\n        rows = await db.select().from(employers);\n        break;\n      case \"categories\":\n        tableSchema = categories;\n        rows = await db.select().from(categories);\n        break;\n      case \"saved_jobs\":\n        tableSchema = savedJobs;\n        rows = await db.select().from(savedJobs);\n        break;\n      case \"job_alerts\":\n        tableSchema = jobAlerts;\n        rows = await db.select().from(jobAlerts);\n        break;\n      case \"user_sessions\":\n        tableSchema = userSessions;\n        rows = await db.select().from(userSessions);\n        break;\n      case \"sessions\":\n        // Handle sessions table separately since it may not follow standard schema\n        try {\n          rows = await db.select().from(sessions);\n        } catch (err) {\n          // If sessions table doesn't exist or isn't accessible, return empty\n          rows = [];\n        }\n        return {\n          name: tableName,\n          rows: rows || [],\n          columns: rows.length > 0 ? Object.keys(rows[0]) : [],\n        };\n      default:\n        throw new Error(`Unknown table: ${tableName}`);\n    }\n\n    // Get column names from the first row if available\n    const columns = rows.length > 0 ? Object.keys(rows[0]) : [];\n\n    return {\n      name: tableName,\n      rows,\n      columns,\n    };\n  }\n\n  async getAllApplicationsWithJobs(): Promise<\n    Array<Application & { job: Job }>\n  > {\n    const applicationsWithJobs = await db\n      .select({\n        // Application fields\n        id: applications.id,\n        jobId: applications.jobId,\n        applicantId: applications.applicantId,\n        firstName: applications.firstName,\n        lastName: applications.lastName,\n        email: applications.email,\n        phone: applications.phone,\n        address: applications.address,\n        coverLetter: applications.coverLetter,\n        resume: applications.resume,\n        status: applications.status,\n        notes: applications.notes,\n        smsNotificationSent: applications.smsNotificationSent,\n        appliedAt: applications.appliedAt,\n        updatedAt: applications.updatedAt,\n        // Job fields\n        job: {\n          id: jobs.id,\n          title: jobs.title,\n          company: jobs.company,\n          location: jobs.location,\n          type: jobs.type,\n          category: jobs.category,\n          salary: jobs.salary,\n          description: jobs.description,\n          requirements: jobs.requirements,\n          benefits: jobs.benefits,\n          email: jobs.email,\n          phone: jobs.phone,\n          employerId: jobs.employerId,\n          isActive: jobs.isActive,\n          isFeatured: jobs.isFeatured,\n          applicantCount: jobs.applicantCount,\n          viewCount: jobs.viewCount,\n          expiresAt: jobs.expiresAt,\n          postedAt: jobs.postedAt,\n          updatedAt: jobs.updatedAt,\n        },\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .orderBy(desc(applications.appliedAt));\n\n    return applicationsWithJobs.map((app) => ({\n      id: app.id,\n      jobId: app.jobId,\n      applicantId: app.applicantId,\n      firstName: app.firstName,\n      lastName: app.lastName,\n      email: app.email,\n      phone: app.phone,\n      address: app.address,\n      coverLetter: app.coverLetter,\n      resume: app.resume,\n      status: app.status,\n      notes: app.notes,\n      smsNotificationSent: app.smsNotificationSent,\n      appliedAt: app.appliedAt,\n      updatedAt: app.updatedAt,\n      job: app.job,\n    }));\n  }\n\n  async clearAllData(): Promise<void> {\n    // Clear in reverse order to handle foreign key constraints\n    await db.delete(applications);\n    await db.delete(savedJobs);\n    await db.delete(jobAlerts);\n    await db.delete(jobs);\n    await db.delete(categories);\n    await db.delete(employers);\n    await db.delete(userSessions);\n    await db.delete(users);\n  }\n\n  async getPendingVerifications(): Promise<User[]> {\n    return await db\n      .select()\n      .from(users)\n      .where(\n        and(eq(users.role, \"employer\"), eq(users.verificationStatus, \"pending\"))\n      )\n      .orderBy(desc(users.updatedAt));\n  }\n\n  async getActivityTrends() {\n    const trends = [];\n    const days = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\n    for (let i = 6; i >= 0; i--) {\n      const date = new Date();\n      date.setDate(date.getDate() - i);\n      date.setHours(0, 0, 0, 0);\n\n      const nextDay = new Date(date);\n      nextDay.setDate(nextDay.getDate() + 1);\n\n      const [jobsCount] = await db\n        .select({ count: count() })\n        .from(jobs)\n        .where(\n          and(\n            gte(jobs.postedAt, date),\n            lt(jobs.postedAt, nextDay)\n          )\n        );\n\n      const [applicationsCount] = await db\n        .select({ count: count() })\n        .from(applications)\n        .where(\n          and(\n            gte(applications.appliedAt, date),\n            lt(applications.appliedAt, nextDay)\n          )\n        );\n\n      trends.push({\n        day: days[date.getDay() === 0 ? 6 : date.getDay() - 1],\n        jobs: jobsCount.count || 0,\n        applications: applicationsCount.count || 0,\n      });\n    }\n\n    return trends;\n  }\n}\n\nexport const storage = new DatabaseStorage();","path":null,"size_bytes":52141,"size_tokens":null},"client/src/components/Footer.tsx":{"content":"import { Briefcase } from \"lucide-react\";\nimport { FaFacebook, FaTwitter, FaLinkedin } from \"react-icons/fa\";\n\nexport default function Footer() {\n  return (\n    <footer className=\"bg-gray-900 text-white py-12\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"grid md:grid-cols-4 gap-8\">\n          <div className=\"col-span-1 md:col-span-2\">\n            <div className=\"flex items-center space-x-2 mb-4\">\n              <Briefcase className=\"text-primary-400 h-6 w-6\" />\n              <h3 className=\"text-xl font-bold\">Pili Jobs</h3>\n            </div>\n            <p className=\"text-gray-300 mb-4\">\n              Connecting local talent with opportunities in Pili, Camarines Sur. Building stronger communities through employment.\n            </p>\n            <div className=\"flex space-x-4\">\n              <a href=\"#\" className=\"text-gray-400 hover:text-white transition-colors\">\n                <FaFacebook className=\"h-5 w-5\" />\n              </a>\n              <a href=\"#\" className=\"text-gray-400 hover:text-white transition-colors\">\n                <FaTwitter className=\"h-5 w-5\" />\n              </a>\n              <a href=\"#\" className=\"text-gray-400 hover:text-white transition-colors\">\n                <FaLinkedin className=\"h-5 w-5\" />\n              </a>\n            </div>\n          </div>\n          \n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">For Job Seekers</h4>\n            <ul className=\"space-y-2 text-gray-300\">\n              <li><a href=\"#\" className=\"hover:text-white transition-colors\">Browse Jobs</a></li>\n              <li><a href=\"#\" className=\"hover:text-white transition-colors\">Career Tips</a></li>\n              <li><a href=\"#\" className=\"hover:text-white transition-colors\">Resume Builder</a></li>\n              <li><a href=\"#\" className=\"hover:text-white transition-colors\">Job Alerts</a></li>\n            </ul>\n          </div>\n          \n          <div>\n            <h4 className=\"text-lg font-semibold mb-4\">For Employers</h4>\n            <ul className=\"space-y-2 text-gray-300\">\n              <li><a href=\"#\" className=\"hover:text-white transition-colors\">Post Jobs</a></li>\n              <li><a href=\"#\" className=\"hover:text-white transition-colors\">Find Candidates</a></li>\n              <li><a href=\"#\" className=\"hover:text-white transition-colors\">Employer Resources</a></li>\n              <li><a href=\"#\" className=\"hover:text-white transition-colors\">Pricing</a></li>\n            </ul>\n          </div>\n        </div>\n        \n        <div className=\"border-t border-gray-800 mt-8 pt-8\">\n          <div className=\"flex flex-col md:flex-row justify-between items-center\">\n            <p className=\"text-gray-400 text-sm\">© 2025 Pili Jobs. All rights reserved.</p>\n            <div className=\"flex space-x-6 mt-4 md:mt-0\">\n              <a href=\"#\" className=\"text-gray-400 hover:text-white text-sm transition-colors\">Privacy Policy</a>\n              <a href=\"#\" className=\"text-gray-400 hover:text-white text-sm transition-colors\">Terms of Service</a>\n              <a href=\"#\" className=\"text-gray-400 hover:text-white text-sm transition-colors\">Contact Us</a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","path":null,"size_bytes":3253,"size_tokens":null},"client/src/components/admin/JobManagement.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Edit, Trash2, Eye, MapPin } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { PILI_BARANGAYS } from \"@shared/barangays\";\n\ninterface Job {\n  id: number;\n  title: string;\n  company: string;\n  location: string;\n  type: string;\n  category: string;\n  salary: string;\n  description: string;\n  requirements?: string;\n  benefits?: string;\n  isActive: boolean;\n  isFeatured: boolean;\n  viewCount: number;\n  applicantCount: number;\n  postedAt: string;\n}\n\ninterface JobManagementProps {\n  jobs: Job[];\n}\n\nexport function JobManagement({ jobs }: JobManagementProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [editingJob, setEditingJob] = useState<Job | null>(null);\n  const [editFormData, setEditFormData] = useState({\n    title: \"\",\n    company: \"\",\n    location: \"\",\n    type: \"\",\n    category: \"\",\n    salary: \"\",\n    description: \"\",\n    requirements: \"\",\n    benefits: \"\",\n    isActive: true,\n    isFeatured: false\n  });\n\n  const updateJobMutation = useMutation({\n    mutationFn: (data: { id: number; jobData: any }) =>\n      apiRequest(`/api/admin/jobs/${data.id}`, \"PUT\", data.jobData),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Job updated successfully!\"\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/jobs\"] });\n      setEditingJob(null);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to update job\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const deleteJobMutation = useMutation({\n    mutationFn: (id: number) =>\n      apiRequest(`/api/admin/jobs/${id}`, \"DELETE\"),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Job deleted successfully!\"\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/jobs\"] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to delete job\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const handleEditJob = (job: Job) => {\n    setEditingJob(job);\n    setEditFormData({\n      title: job.title,\n      company: job.company,\n      location: job.location,\n      type: job.type,\n      category: job.category,\n      salary: job.salary,\n      description: job.description,\n      requirements: job.requirements || \"\",\n      benefits: job.benefits || \"\",\n      isActive: job.isActive,\n      isFeatured: job.isFeatured\n    });\n  };\n\n  const handleUpdateJob = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (editingJob) {\n      updateJobMutation.mutate({\n        id: editingJob.id,\n        jobData: editFormData\n      });\n    }\n  };\n\n  const handleDeleteJob = (job: Job) => {\n    if (confirm(`Are you sure you want to delete the job \"${job.title}\" at ${job.company}?`)) {\n      deleteJobMutation.mutate(job.id);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <Table>\n        <TableHeader>\n          <TableRow>\n            <TableHead>Job Title</TableHead>\n            <TableHead>Company</TableHead>\n            <TableHead>Location & Type</TableHead>\n            <TableHead>Category</TableHead>\n            <TableHead>Stats</TableHead>\n            <TableHead>Status</TableHead>\n            <TableHead>Actions</TableHead>\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {jobs.map((job) => (\n            <TableRow key={job.id}>\n              <TableCell className=\"font-medium\">\n                <div>\n                  <div className=\"font-semibold\">{job.title}</div>\n                  <div className=\"text-sm text-muted-foreground flex items-center gap-1\">\n                    <span className=\"text-xs\">₱</span>\n                    {job.salary}\n                  </div>\n                </div>\n              </TableCell>\n              <TableCell>{job.company}</TableCell>\n              <TableCell>\n                <div className=\"text-sm\">\n                  <div className=\"flex items-center gap-1\">\n                    <MapPin className=\"h-3 w-3\" />\n                    {job.location}\n                  </div>\n                  <Badge variant=\"outline\" className=\"mt-1\">\n                    {job.type}\n                  </Badge>\n                </div>\n              </TableCell>\n              <TableCell>\n                <Badge variant=\"secondary\">{job.category}</Badge>\n              </TableCell>\n              <TableCell>\n                <div className=\"text-sm space-y-1\">\n                  <div className=\"flex items-center gap-1\">\n                    <Eye className=\"h-3 w-3\" />\n                    {job.viewCount} views\n                  </div>\n                  <div>{job.applicantCount} applications</div>\n                </div>\n              </TableCell>\n              <TableCell>\n                <div className=\"flex flex-col gap-1\">\n                  <Badge variant={job.isActive ? \"default\" : \"secondary\"}>\n                    {job.isActive ? \"Active\" : \"Inactive\"}\n                  </Badge>\n                  {job.isFeatured && (\n                    <Badge variant=\"destructive\">Featured</Badge>\n                  )}\n                </div>\n              </TableCell>\n              <TableCell>\n                <div className=\"flex gap-2\">\n                  <Dialog>\n                    <DialogTrigger asChild>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleEditJob(job)}\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                    </DialogTrigger>\n                    <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n                      <DialogHeader>\n                        <DialogTitle>Edit Job</DialogTitle>\n                      </DialogHeader>\n                      <form onSubmit={handleUpdateJob} className=\"space-y-4\">\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"title\">Job Title</Label>\n                            <Input\n                              id=\"title\"\n                              value={editFormData.title}\n                              onChange={(e) => setEditFormData({\n                                ...editFormData,\n                                title: e.target.value\n                              })}\n                              required\n                            />\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"company\">Company</Label>\n                            <Input\n                              id=\"company\"\n                              value={editFormData.company}\n                              onChange={(e) => setEditFormData({\n                                ...editFormData,\n                                company: e.target.value\n                              })}\n                              required\n                            />\n                          </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"location\">Location</Label>\n                            <Select\n                              value={editFormData.location}\n                              onValueChange={(value) => setEditFormData({\n                                ...editFormData,\n                                location: value\n                              })}\n                            >\n                              <SelectTrigger>\n                                <SelectValue placeholder=\"Select a location\" />\n                              </SelectTrigger>\n                              <SelectContent>\n                                {PILI_BARANGAYS.map((barangay) => (\n                                  <SelectItem key={barangay} value={barangay}>\n                                    {barangay}\n                                  </SelectItem>\n                                ))}\n                              </SelectContent>\n                            </Select>\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"salary\">Salary</Label>\n                            <Input\n                              id=\"salary\"\n                              value={editFormData.salary}\n                              onChange={(e) => setEditFormData({\n                                ...editFormData,\n                                salary: e.target.value\n                              })}\n                              required\n                            />\n                          </div>\n                        </div>\n\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"type\">Job Type</Label>\n                            <Select\n                              value={editFormData.type}\n                              onValueChange={(value) => setEditFormData({\n                                ...editFormData,\n                                type: value\n                              })}\n                            >\n                              <SelectTrigger>\n                                <SelectValue />\n                              </SelectTrigger>\n                              <SelectContent>\n                                <SelectItem value=\"Full-time\">Full-time</SelectItem>\n                                <SelectItem value=\"Part-time\">Part-time</SelectItem>\n                                <SelectItem value=\"Contract\">Contract</SelectItem>\n                                <SelectItem value=\"Internship\">Internship</SelectItem>\n                              </SelectContent>\n                            </Select>\n                          </div>\n                          <div className=\"space-y-2\">\n                            <Label htmlFor=\"category\">Category</Label>\n                            <Select\n                              value={editFormData.category}\n                              onValueChange={(value) => setEditFormData({\n                                ...editFormData,\n                                category: value\n                              })}\n                            >\n                              <SelectTrigger>\n                                <SelectValue />\n                              </SelectTrigger>\n                              <SelectContent>\n                                <SelectItem value=\"Technology\">Technology</SelectItem>\n                                <SelectItem value=\"Healthcare\">Healthcare</SelectItem>\n                                <SelectItem value=\"Education\">Education</SelectItem>\n                                <SelectItem value=\"Agriculture\">Agriculture</SelectItem>\n                                <SelectItem value=\"Tourism\">Tourism</SelectItem>\n                                <SelectItem value=\"Retail\">Retail</SelectItem>\n                                <SelectItem value=\"Construction\">Construction</SelectItem>\n                              </SelectContent>\n                            </Select>\n                          </div>\n                        </div>\n\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"description\">Description</Label>\n                          <Textarea\n                            id=\"description\"\n                            value={editFormData.description}\n                            onChange={(e) => setEditFormData({\n                              ...editFormData,\n                              description: e.target.value\n                            })}\n                            rows={3}\n                            required\n                          />\n                        </div>\n\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"requirements\">Requirements</Label>\n                          <Textarea\n                            id=\"requirements\"\n                            value={editFormData.requirements}\n                            onChange={(e) => setEditFormData({\n                              ...editFormData,\n                              requirements: e.target.value\n                            })}\n                            rows={2}\n                          />\n                        </div>\n\n                        <div className=\"space-y-2\">\n                          <Label htmlFor=\"benefits\">Benefits</Label>\n                          <Textarea\n                            id=\"benefits\"\n                            value={editFormData.benefits}\n                            onChange={(e) => setEditFormData({\n                              ...editFormData,\n                              benefits: e.target.value\n                            })}\n                            rows={2}\n                          />\n                        </div>\n\n                        <div className=\"flex items-center space-x-4\">\n                          <div className=\"flex items-center space-x-2\">\n                            <input\n                              type=\"checkbox\"\n                              id=\"isActive\"\n                              checked={editFormData.isActive}\n                              onChange={(e) => setEditFormData({\n                                ...editFormData,\n                                isActive: e.target.checked\n                              })}\n                              className=\"rounded\"\n                            />\n                            <Label htmlFor=\"isActive\">Active</Label>\n                          </div>\n\n                          <div className=\"flex items-center space-x-2\">\n                            <input\n                              type=\"checkbox\"\n                              id=\"isFeatured\"\n                              checked={editFormData.isFeatured}\n                              onChange={(e) => setEditFormData({\n                                ...editFormData,\n                                isFeatured: e.target.checked\n                              })}\n                              className=\"rounded\"\n                            />\n                            <Label htmlFor=\"isFeatured\">Featured</Label>\n                          </div>\n                        </div>\n\n                        <div className=\"flex justify-end space-x-2\">\n                          <DialogTrigger asChild>\n                            <Button type=\"button\" variant=\"outline\">\n                              Cancel\n                            </Button>\n                          </DialogTrigger>\n                          <Button type=\"submit\" disabled={updateJobMutation.isPending}>\n                            {updateJobMutation.isPending ? \"Updating...\" : \"Update Job\"}\n                          </Button>\n                        </div>\n                      </form>\n                    </DialogContent>\n                  </Dialog>\n\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleDeleteJob(job)}\n                    disabled={deleteJobMutation.isPending}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n\n      {jobs.length === 0 && (\n        <div className=\"text-center py-8 text-muted-foreground\">\n          No job postings found.\n        </div>\n      )}\n    </div>\n  );\n}","path":null,"size_bytes":16567,"size_tokens":null},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","path":null,"size_bytes":1128,"size_tokens":null},"client/src/components/auth/AuthModal.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { z } from \"zod\";\n\nconst registerSchema = z.object({\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n  confirmPassword: z.string().min(6, \"Please confirm your password\"),\n  firstName: z.string().min(1, \"First name is required\"),\n  middleName: z.string().optional(),\n  lastName: z.string().min(1, \"Last name is required\"),\n  phone: z.string().min(10, \"Phone number is required (minimum 10 digits)\").regex(/^[\\+\\d]+$/, \"Phone number should contain only digits and + symbol\"),\n  role: z.enum([\"jobseeker\", \"employer\", \"admin\"], {\n    required_error: \"Please select a role\"\n  })\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n\nconst loginSchema = z.object({\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string().min(1, \"Password is required\")\n});\n\ninterface AuthModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nexport default function AuthModal({ isOpen, onClose, onSuccess }: AuthModalProps) {\n  const [activeTab, setActiveTab] = useState(\"login\");\n  const [loginData, setLoginData] = useState({ email: \"\", password: \"\" });\n  const [registerData, setRegisterData] = useState({\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    firstName: \"\",\n    middleName: \"\",\n    lastName: \"\",\n    role: \"\" as any,\n    phone: \"\"\n  });\n  const [errors, setErrors] = useState<any>({});\n\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const { refreshUser } = useAuth();\n\n  const loginMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return await apiRequest(\"/api/auth/login\", \"POST\", data);\n    },\n    onSuccess: async (data) => {\n      // Force refresh user state and invalidate all auth-related queries\n      await refreshUser();\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\n      queryClient.invalidateQueries(); // Invalidate all queries to force refresh\n\n      toast({\n        title: \"Success\",\n        description: \"Logged in successfully!\"\n      });\n\n      // Small delay to ensure state updates\n      setTimeout(() => {\n        onSuccess?.();\n        onClose();\n        window.location.reload();\n      }, 100);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Login Failed\",\n        description: error.message || \"Failed to login\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return await apiRequest(\"/api/auth/register\", \"POST\", data);\n    },\n    onSuccess: async (data) => {\n      // Force refresh user state and invalidate all auth-related queries\n      await refreshUser();\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/me\"] });\n      queryClient.invalidateQueries(); // Invalidate all queries to force refresh\n\n      toast({\n        title: \"Success\",\n        description: \"Account created successfully!\"\n      });\n\n      // Small delay to ensure state updates\n      setTimeout(() => {\n        onSuccess?.();\n        onClose();\n        window.location.reload();\n      }, 100);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Registration Failed\",\n        description: error.message || \"Failed to create account\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const handleLogin = (e: React.FormEvent) => {\n    e.preventDefault();\n    setErrors({});\n\n    try {\n      const validatedData = loginSchema.parse(loginData);\n      loginMutation.mutate(validatedData);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        const fieldErrors: any = {};\n        error.errors.forEach((err) => {\n          if (err.path) {\n            fieldErrors[err.path[0]] = err.message;\n          }\n        });\n        setErrors(fieldErrors);\n      }\n    }\n  };\n\n  const handleRegister = (e: React.FormEvent) => {\n    e.preventDefault();\n    setErrors({});\n\n    try {\n      // Add prefix to phone number before validation and remove spaces\n      const cleanPhone = registerData.phone.replace(/\\s+/g, '');\n      const formattedRegisterData = {\n        ...registerData,\n        phone: `+63${cleanPhone}`.replace(/^(\\+63)+/, '+63') // Ensure only one +63 prefix\n      };\n      const validatedData = registerSchema.parse(formattedRegisterData);\n      registerMutation.mutate(validatedData);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        const fieldErrors: any = {};\n        error.errors.forEach((err) => {\n          if (err.path) {\n            fieldErrors[err.path[0]] = err.message;\n          }\n        });\n        setErrors(fieldErrors);\n      }\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Welcome to Pili Jobs</DialogTitle>\n        </DialogHeader>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"login\">Login</TabsTrigger>\n            <TabsTrigger value=\"register\">Register</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"login\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Login</CardTitle>\n                <CardDescription>\n                  Sign in to your account to access all features\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <form onSubmit={handleLogin} className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"login-email\">Email</Label>\n                    <Input\n                      id=\"login-email\"\n                      type=\"email\"\n                      value={loginData.email}\n                      onChange={(e) => setLoginData({ ...loginData, email: e.target.value })}\n                      placeholder=\"Enter your email\"\n                    />\n                    {errors.email && (\n                      <p className=\"text-sm text-red-500\">{errors.email}</p>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"login-password\">Password</Label>\n                    <Input\n                      id=\"login-password\"\n                      type=\"password\"\n                      value={loginData.password}\n                      onChange={(e) => setLoginData({ ...loginData, password: e.target.value })}\n                      placeholder=\"Enter your password\"\n                    />\n                    {errors.password && (\n                      <p className=\"text-sm text-red-500\">{errors.password}</p>\n                    )}\n                  </div>\n\n                  <Button \n                    type=\"submit\" \n                    className=\"w-full\"\n                    disabled={loginMutation.isPending}\n                  >\n                    {loginMutation.isPending ? \"Signing in...\" : \"Sign In\"}\n                  </Button>\n                </form>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"register\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Create Account</CardTitle>\n                <CardDescription>\n                  Join Pili Jobs to start your journey\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <form onSubmit={handleRegister} className=\"space-y-4\">\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"firstName\">First Name</Label>\n                      <Input\n                        id=\"firstName\"\n                        value={registerData.firstName}\n                        onChange={(e) => setRegisterData({ ...registerData, firstName: e.target.value })}\n                        placeholder=\"John\"\n                        data-testid=\"input-firstName\"\n                      />\n                      {errors.firstName && (\n                        <p className=\"text-sm text-red-500\">{errors.firstName}</p>\n                      )}\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"middleName\">Middle Name</Label>\n                      <Input\n                        id=\"middleName\"\n                        value={registerData.middleName}\n                        onChange={(e) => setRegisterData({ ...registerData, middleName: e.target.value })}\n                        placeholder=\"Optional\"\n                        data-testid=\"input-middleName\"\n                      />\n                      {errors.middleName && (\n                        <p className=\"text-sm text-red-500\">{errors.middleName}</p>\n                      )}\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"lastName\">Last Name</Label>\n                      <Input\n                        id=\"lastName\"\n                        value={registerData.lastName}\n                        onChange={(e) => setRegisterData({ ...registerData, lastName: e.target.value })}\n                        placeholder=\"Doe\"\n                        data-testid=\"input-lastName\"\n                      />\n                      {errors.lastName && (\n                        <p className=\"text-sm text-red-500\">{errors.lastName}</p>\n                      )}\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"register-email\">Email</Label>\n                    <Input\n                      id=\"register-email\"\n                      type=\"email\"\n                      value={registerData.email}\n                      onChange={(e) => setRegisterData({ ...registerData, email: e.target.value })}\n                      placeholder=\"john@example.com\"\n                    />\n                    {errors.email && (\n                      <p className=\"text-sm text-red-500\">{errors.email}</p>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"register-password\">Password</Label>\n                    <Input\n                      id=\"register-password\"\n                      type=\"password\"\n                      value={registerData.password}\n                      onChange={(e) => setRegisterData({ ...registerData, password: e.target.value })}\n                      placeholder=\"Create a password\"\n                    />\n                    {errors.password && (\n                      <p className=\"text-sm text-red-500\">{errors.password}</p>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"confirm-password\">Confirm Password</Label>\n                    <Input\n                      id=\"confirm-password\"\n                      type=\"password\"\n                      value={registerData.confirmPassword}\n                      onChange={(e) => setRegisterData({ ...registerData, confirmPassword: e.target.value })}\n                      placeholder=\"Confirm your password\"\n                    />\n                    {errors.confirmPassword && (\n                      <p className=\"text-sm text-red-500\">{errors.confirmPassword}</p>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"role\">I am a</Label>\n                    <Select \n                      value={registerData.role} \n                      onValueChange={(value) => setRegisterData({ ...registerData, role: value })}\n                    >\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select your role\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"jobseeker\">Job Seeker</SelectItem>\n                        <SelectItem value=\"employer\">Employer</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    {errors.role && (\n                      <p className=\"text-sm text-red-500\">{errors.role}</p>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"phone\">Phone Number</Label>\n                    <div className=\"flex\">\n                      <span className=\"inline-flex items-center px-3 text-sm text-gray-900 bg-gray-200 border border-r-0 border-gray-300 rounded-l-md\">\n                        +63\n                      </span>\n                      <Input\n                        id=\"phone\"\n                        type=\"tel\"\n                        value={registerData.phone}\n                        onChange={(e) => setRegisterData(prev => ({ ...prev, phone: e.target.value.replace(/\\s+/g, '') }))}\n                        placeholder=\"9171234567\"\n                        className=\"rounded-l-none\"\n                      />\n                    </div>\n                    {errors.phone && (\n                      <p className=\"text-sm text-red-500\">{errors.phone}</p>\n                    )}\n                  </div>\n\n                  <Button \n                    type=\"submit\" \n                    className=\"w-full\"\n                    disabled={registerMutation.isPending}\n                  >\n                    {registerMutation.isPending ? \"Creating Account...\" : \"Create Account\"}\n                  </Button>\n                </form>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </DialogContent>\n    </Dialog>\n  );\n}","path":null,"size_bytes":14554,"size_tokens":null},"server/auth.ts":{"content":"import bcrypt from \"bcryptjs\";\nimport jwt from \"jsonwebtoken\";\nimport { Request, Response, NextFunction } from \"express\";\nimport { db } from \"./db\";\nimport { users, userSessions, type User } from \"@shared/schema\";\nimport { eq } from \"drizzle-orm\";\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"pili-jobs-dev-secret-key-2025\";\nconst SESSION_DURATION = 7 * 24 * 60 * 60 * 1000; // 7 days\n\nexport interface AuthenticatedRequest extends Request {\n  user?: number; // User ID\n  userObject?: User; // Full user object if needed\n}\n\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, 12);\n}\n\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\nexport function generateToken(payload: any): string {\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: \"7d\" });\n}\n\nexport function verifyToken(token: string): any {\n  try {\n    return jwt.verify(token, JWT_SECRET);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport async function createSession(userId: number): Promise<string> {\n  const sessionId = generateToken({ userId, type: \"session\" });\n  const expiresAt = new Date(Date.now() + SESSION_DURATION);\n  \n  await db.insert(userSessions).values({\n    id: sessionId,\n    userId,\n    expiresAt,\n  });\n  \n  return sessionId;\n}\n\nexport async function validateSession(sessionId: string): Promise<User | null> {\n  try {\n    const [session] = await db\n      .select()\n      .from(userSessions)\n      .where(eq(userSessions.id, sessionId));\n    \n    if (!session || session.expiresAt < new Date()) {\n      if (session) {\n        await db.delete(userSessions).where(eq(userSessions.id, sessionId));\n      }\n      return null;\n    }\n    \n    const [user] = await db\n      .select()\n      .from(users)\n      .where(eq(users.id, session.userId));\n    \n    return user || null;\n  } catch (error) {\n    return null;\n  }\n}\n\nexport async function destroySession(sessionId: string): Promise<void> {\n  await db.delete(userSessions).where(eq(userSessions.id, sessionId));\n}\n\nexport const requireAuth = async (req: AuthenticatedRequest, res: Response, next: NextFunction) => {\n  const sessionToken = req.cookies?.session;\n  \n  if (!sessionToken) {\n    return res.status(401).json({ message: \"Authentication required\" });\n  }\n  \n  const userObject = await validateSession(sessionToken);\n  if (!userObject) {\n    return res.status(401).json({ message: \"Invalid or expired session\" });\n  }\n  \n  req.user = userObject.id;\n  req.userObject = userObject;\n  next();\n};\n\nexport function requireRole(roles: string[]) {\n  return async (req: AuthenticatedRequest, res: Response, next: NextFunction) => {\n    await requireAuth(req, res, () => {\n      if (!req.userObject) {\n        return res.status(401).json({ message: \"Authentication required\" });\n      }\n      \n      if (!roles.includes(req.userObject.role)) {\n        return res.status(403).json({ \n          message: \"Insufficient permissions\", \n          required: roles,\n          current: req.userObject.role \n        });\n      }\n      \n      next();\n    });\n  };\n}\n\nexport const requireJobSeeker = requireRole([\"job_seeker\"]);\nexport const requireEmployer = requireRole([\"employer\", \"admin\"]);\nexport const requireAdmin = requireRole([\"admin\"]);","path":null,"size_bytes":3299,"size_tokens":null},"server/db.sqlite.ts":{"content":"import { drizzle } from \"drizzle-orm/better-sqlite3\";\nimport { sqliteTable } from \"drizzle-orm/sqlite-core\";\nimport Database from \"better-sqlite3\";\nimport * as schema from \"@shared/schema\";\n\n// Use SQLite for local development\nconst sqlite = new Database(\"./pili_jobs.db\");\nexport const db = drizzle(sqlite, { schema });\nexport const pool = null; // Not used for SQLite\n","path":null,"size_bytes":370,"size_tokens":null},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","path":null,"size_bytes":2765,"size_tokens":null},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar-background)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","path":null,"size_bytes":2627,"size_tokens":null},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","path":null,"size_bytes":5742,"size_tokens":null},"client/src/components/JobViewModal.tsx":{"content":"import { useEffect } from \"react\";\nimport { useMutation, useQueryClient, useQuery } from \"@tanstack/react-query\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { \n  MapPin, \n  Clock, \n  DollarSign, \n  Building2, \n  Calendar,\n  Eye,\n  Users,\n  Phone,\n  Mail,\n  Heart,\n  Briefcase\n} from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { Job } from \"@shared/schema\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ninterface JobViewModalProps {\n  job: Job | null;\n  isOpen: boolean;\n  onClose: () => void;\n  onApply: () => void;\n}\n\nexport default function JobViewModal({ job, isOpen, onClose, onApply }: JobViewModalProps) {\n  const { isAuthenticated, user } = useAuth();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Debug: Log job data when modal opens\n  useEffect(() => {\n    if (isOpen && job) {\n      console.log(\"JobViewModal - Job data:\", job);\n      console.log(\"JobViewModal - Job ID:\", job.id);\n    }\n  }, [isOpen, job]);\n\n  // Track view when modal opens\n  useEffect(() => {\n    if (isOpen && job) {\n      incrementViewMutation.mutate(job.id);\n    }\n  }, [isOpen, job?.id]);\n\n  const incrementViewMutation = useMutation({\n    mutationFn: (jobId: number) => apiRequest(`/api/jobs/${jobId}/view`, \"POST\"),\n    onSuccess: () => {\n      // Invalidate job stats to update view counts\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/stats\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/jobs\"] });\n    }\n  });\n\n  // Fetch saved jobs for the current user\n  const { data: savedJobsData = [] } = useQuery<Job[]>({\n    queryKey: ['/api/jobseeker/saved-jobs'],\n    enabled: isAuthenticated && user?.role === 'jobseeker',\n  });\n\n  // Create a Set of saved job IDs for quick lookup\n  const savedJobIds = new Set(savedJobsData.map(savedJob => savedJob.id));\n\n  // Save job mutation\n  const saveJobMutation = useMutation({\n    mutationFn: (jobId: number) => apiRequest(`/api/jobseeker/saved-jobs/${jobId}`, 'POST'),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Job saved successfully!\"\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/jobseeker/saved-jobs'] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to save job\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  // Remove saved job mutation\n  const removeSavedJobMutation = useMutation({\n    mutationFn: (jobId: number) => apiRequest(`/api/jobseeker/saved-jobs/${jobId}`, 'DELETE'),\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Job removed from saved list!\"\n      });\n      queryClient.invalidateQueries({ queryKey: ['/api/jobseeker/saved-jobs'] });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to remove saved job\",\n        variant: \"destructive\"\n      });\n    }\n  });\n\n  const handleSaveJob = () => {\n    if (!job) return;\n\n    if (!isAuthenticated) {\n      toast({\n        title: \"Authentication Required\",\n        description: \"Please log in to save jobs\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (user?.role !== 'jobseeker') {\n      toast({\n        title: \"Error\",\n        description: \"Only job seekers can save jobs\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    if (savedJobIds.has(job.id)) {\n      removeSavedJobMutation.mutate(job.id);\n    } else {\n      saveJobMutation.mutate(job.id);\n    }\n  };\n\n\n  if (!job) return null;\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl font-bold\">{job.title}</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Company and Basic Info */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center\">\n                    <Building2 className=\"h-8 w-8 text-blue-600\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-900\">{job.company}</h3>\n                    <div className=\"flex flex-wrap items-center gap-4 text-sm text-gray-500 mt-1\">\n                      <span className=\"flex items-center\">\n                        <MapPin className=\"mr-1 h-4 w-4\" />\n                        {job.location}\n                      </span>\n                      <span className=\"flex items-center\">\n                        <Clock className=\"mr-1 h-4 w-4\" />\n                        {job.type}\n                      </span>\n                      <span className=\"flex items-center\">\n                        <span className=\"mr-1 text-xs\">₱</span>\n                        {job.salary}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                  <Badge variant=\"secondary\" className=\"w-fit\">\n                    {job.category}\n                  </Badge>\n                  {job.isFeatured && (\n                    <Badge variant=\"destructive\" className=\"w-fit\">\n                      Featured\n                    </Badge>\n                  )}\n                </div>\n              </div>\n\n              {/* Job Stats */}\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t\">\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-sm text-gray-500\">\n                    <Eye className=\"h-4 w-4\" />\n                    <span>{job.viewCount} views</span>\n                  </div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-sm text-gray-500\">\n                    <Users className=\"h-4 w-4\" />\n                    <span>{job.applicantCount} applicants</span>\n                  </div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-sm text-gray-500\">\n                    <Calendar className=\"h-4 w-4\" />\n                    <span>Posted {formatDate(job.postedAt)}</span>\n                  </div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"flex items-center justify-center gap-1 text-sm text-gray-500\">\n                    <Briefcase className=\"h-4 w-4\" />\n                    <span className={job.isActive ? \"text-green-600\" : \"text-red-600\"}>\n                      {job.isActive ? \"Active\" : \"Closed\"}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Job Description */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <h4 className=\"text-lg font-semibold mb-3\">Job Description</h4>\n              <div className=\"prose prose-sm max-w-none\">\n                <p className=\"text-gray-700 whitespace-pre-wrap\">{job.description}</p>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Requirements */}\n          {job.requirements && (\n            <Card>\n              <CardContent className=\"p-6\">\n                <h4 className=\"text-lg font-semibold mb-3\">Requirements</h4>\n                <div className=\"prose prose-sm max-w-none\">\n                  <p className=\"text-gray-700 whitespace-pre-wrap\">{job.requirements}</p>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Benefits */}\n          {job.benefits && (\n            <Card>\n              <CardContent className=\"p-6\">\n                <h4 className=\"text-lg font-semibold mb-3\">Benefits</h4>\n                <div className=\"prose prose-sm max-w-none\">\n                  <p className=\"text-gray-700 whitespace-pre-wrap\">{job.benefits}</p>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Contact Information */}\n          <Card>\n            <CardContent className=\"p-6\">\n              <h4 className=\"text-lg font-semibold mb-3\">Contact Information</h4>\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center gap-2 text-gray-600\">\n                  <Mail className=\"h-4 w-4\" />\n                  <span>{job.email}</span>\n                </div>\n                {job.phone && (\n                  <div className=\"flex items-center gap-2 text-gray-600\">\n                    <Phone className=\"h-4 w-4\" />\n                    <span>{job.phone}</span>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Action Buttons */}\n          <DialogFooter className=\"flex-col sm:flex-row gap-3\">\n            <Button variant=\"outline\" onClick={onClose} className=\"flex-1\">\n              Close\n            </Button>\n            {isAuthenticated && user?.role === 'jobseeker' && (\n              <Button\n                variant=\"outline\"\n                onClick={handleSaveJob}\n                disabled={saveJobMutation.isPending || removeSavedJobMutation.isPending}\n                className={`flex items-center gap-2 ${\n                  savedJobIds.has(job.id) \n                    ? 'text-red-600 border-red-600 hover:bg-red-50' \n                    : 'text-gray-600 hover:text-red-600 hover:border-red-600'\n                }`}\n              >\n                <Heart \n                  className={`h-4 w-4 ${\n                    savedJobIds.has(job.id) ? 'fill-current' : ''\n                  }`} \n                />\n                {savedJobIds.has(job.id) ? 'Saved' : 'Save Job'}\n              </Button>\n            )}\n            <Button onClick={onApply} className=\"bg-green-600 hover:bg-green-700 flex-1\">\n              Apply for this Position\n            </Button>\n          </DialogFooter>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","path":null,"size_bytes":10843,"size_tokens":null},"client/src/components/SavedJobs.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Heart, MapPin, DollarSign, Clock, Trash2, ExternalLink } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport ApplicationModal from \"@/components/ApplicationModal\";\nimport type { Job } from \"@shared/schema\";\n\ninterface SavedJob {\n  id: number;\n  userId: number;\n  jobId: number;\n  savedAt: string;\n  job: {\n    id: number;\n    title: string;\n    company: string;\n    location: string;\n    salary: string;\n    type: string;\n    category: string;\n    description: string;\n    requirements: string;\n    benefits: string;\n    postedAt: string;\n    updatedAt: string;\n  };\n}\n\nexport default function SavedJobs() {\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const [selectedJob, setSelectedJob] = useState<Job | null>(null);\n  const [isApplicationModalOpen, setIsApplicationModalOpen] = useState(false);\n\n  const { data: savedJobs = [], isLoading } = useQuery<SavedJob[]>({\n    queryKey: [\"/api/jobseeker/saved-jobs\"],\n    enabled: !!user && user.role === \"jobseeker\",\n    onSuccess: (data) => {\n      console.log(\"Saved jobs data:\", data);\n    },\n    onError: (error) => {\n      console.error(\"Error fetching saved jobs:\", error);\n    }\n  });\n\n  const removeSavedJobMutation = useMutation({\n    mutationFn: (jobId: number) =>\n      apiRequest(`/api/jobseeker/saved-jobs/${jobId}`, \"DELETE\"),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/jobseeker/saved-jobs\"] });\n      toast({\n        title: \"Job removed\",\n        description: \"Job has been removed from your saved list\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to remove saved job\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleRemoveSavedJob = (jobId: number) => {\n    removeSavedJobMutation.mutate(jobId);\n  };\n\n  const handleApply = (savedJob: SavedJob) => {\n    // The savedJob.job already contains the full Job object from the API\n    setSelectedJob(savedJob.job as Job);\n    setIsApplicationModalOpen(true);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <div className=\"text-center\">Loading saved jobs...</div>\n      </div>\n    );\n  }\n\n  if (!savedJobs.length) {\n    return (\n      <div className=\"container mx-auto p-6\">\n        <Card>\n          <CardContent className=\"text-center py-8\">\n            <Heart className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              No saved jobs yet\n            </h3>\n            <p className=\"text-gray-500\">\n              Save jobs you're interested in to apply to them later.\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold\">Saved Jobs</h1>\n          <p className=\"text-muted-foreground\">\n            {savedJobs.length} job{savedJobs.length !== 1 ? \"s\" : \"\"} saved\n          </p>\n        </div>\n      </div>\n\n      <div className=\"grid gap-6\">\n        {savedJobs.map((savedJob) => {\n          // Safety check to prevent errors if job data is missing\n          if (!savedJob || !savedJob.job) {\n            return null;\n          }\n          \n          return (\n            <Card key={savedJob.id} className=\"hover:shadow-md transition-shadow\">\n              <CardHeader>\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <CardTitle className=\"text-xl\">{savedJob.job.title}</CardTitle>\n                    <p className=\"text-lg font-medium text-primary mt-1\">\n                      {savedJob.job.company}\n                    </p>\n                  </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleRemoveSavedJob(savedJob.jobId)}\n                    disabled={removeSavedJobMutation.isPending}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\n                <div className=\"flex items-center text-sm text-muted-foreground\">\n                  <MapPin className=\"mr-2 h-4 w-4\" />\n                  {savedJob.job.location}\n                </div>\n                <div className=\"flex items-center text-sm text-muted-foreground\">\n                  {savedJob.job.salary}\n                </div>\n                <div className=\"flex items-center text-sm text-muted-foreground\">\n                  <Clock className=\"mr-2 h-4 w-4\" />\n                  {savedJob.job.type}\n                </div>\n                <div className=\"flex items-center\">\n                  <Badge variant=\"secondary\">{savedJob.job.category}</Badge>\n                </div>\n              </div>\n\n              <p className=\"text-sm text-gray-600 mb-4 line-clamp-2\">\n                {savedJob.job.description}\n              </p>\n\n              <div className=\"flex items-center justify-between\">\n                <p className=\"text-xs text-muted-foreground\">\n                  Posted {new Date(savedJob.job.postedAt).toLocaleDateString()}\n                  {savedJob.savedAt && (\n                    <>\n                      {\" • Saved \"}\n                      {new Date(savedJob.savedAt).toLocaleDateString()}\n                    </>\n                  )}\n                </p>\n                <Button size=\"sm\" onClick={() => handleApply(savedJob)}>\n                  <ExternalLink className=\"mr-2 h-4 w-4\" />\n                  Apply Now\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n          );\n        })}\n      </div>\n\n      <ApplicationModal\n        job={selectedJob}\n        isOpen={isApplicationModalOpen}\n        onClose={() => {\n          setIsApplicationModalOpen(false);\n          setSelectedJob(null);\n        }}\n      />\n    </div>\n  );\n}","path":null,"size_bytes":6665,"size_tokens":null},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","path":null,"size_bytes":1977,"size_tokens":null},"client/src/components/Header.tsx":{"content":"import { useState } from \"react\";\nimport { Menu, User, LogOut, Settings } from \"lucide-react\";\nimport piliLogo from \"@assets/pili-logo.png\";\nimport { Button } from \"@/components/ui/button\";\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuSeparator, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport AuthModal from \"@/components/auth/AuthModal\";\nimport UserProfileModal from \"@/components/UserProfileModal\";\n\ninterface HeaderProps {\n  userType: \"seeker\" | \"employer\";\n  setUserType: (type: \"seeker\" | \"employer\") => void;\n}\n\nexport default function Header({ userType, setUserType }: HeaderProps) {\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const [showProfileModal, setShowProfileModal] = useState(false); // State for the profile modal\n  const { user, isAuthenticated, logout } = useAuth();\n\n  const getUserInitials = () => {\n    if (!user?.firstName && !user?.lastName) return \"U\";\n    return `${user?.firstName?.[0] || \"\"}${user?.lastName?.[0] || \"\"}`.toUpperCase();\n  };\n\n  const getUserDisplayName = () => {\n    if (user?.firstName || user?.lastName) {\n      return `${user.firstName || \"\"} ${user.lastName || \"\"}`.trim();\n    }\n    return user?.email || \"User\";\n  };\n\n  return (\n    <>\n      <header className=\"bg-white shadow-sm border-b z-30 relative\">\n        <nav className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex items-center space-x-2\">\n                <img src={piliLogo} alt=\"Pili Seal\" className=\"w-8 h-8\" />\n                <h1 className=\"text-xl font-bold text-gray-900\">Pili Jobs</h1>\n              </div>\n              <span className=\"hidden sm:inline text-sm text-gray-500\">Camarines Sur</span>\n            </div>\n\n            {/* Navigation removed - dashboards are shown based on user role */}\n\n            <div className=\"flex items-center space-x-3\">\n              {!isAuthenticated && (\n                <div className=\"hidden sm:flex bg-gray-100 rounded-lg p-1\">\n                  <Button\n                    variant={userType === \"seeker\" ? \"default\" : \"ghost\"}\n                    size=\"sm\"\n                    onClick={() => setUserType(\"seeker\")}\n                    className={userType === \"seeker\" ? \"bg-white text-gray-900 shadow-sm\" : \"text-gray-600 hover:text-gray-900\"}\n                  >\n                    Job Seeker\n                  </Button>\n                  <Button\n                    variant={userType === \"employer\" ? \"default\" : \"ghost\"}\n                    size=\"sm\"\n                    onClick={() => setUserType(\"employer\")}\n                    className={userType === \"employer\" ? \"bg-white text-gray-900 shadow-sm\" : \"text-gray-600 hover:text-gray-900\"}\n                  >\n                    Employer\n                  </Button>\n                </div>\n              )}\n\n              {isAuthenticated ? (\n                <DropdownMenu>\n                  <DropdownMenuTrigger asChild>\n                    <Button variant=\"ghost\" className=\"relative h-8 w-8 rounded-full\">\n                      <Avatar className=\"h-8 w-8\">\n                        <AvatarFallback className=\"bg-primary text-primary-foreground\">\n                          {getUserInitials()}\n                        </AvatarFallback>\n                      </Avatar>\n                    </Button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent className=\"w-56\" align=\"end\" forceMount>\n                    <div className=\"flex items-center justify-start gap-2 p-2\">\n                      <div className=\"flex flex-col space-y-1 leading-none\">\n                        <p className=\"font-medium\">{getUserDisplayName()}</p>\n                        <p className=\"w-[200px] truncate text-sm text-muted-foreground\">\n                          {user?.email}\n                        </p>\n                        <p className=\"text-xs text-muted-foreground capitalize\">\n                          {user?.role?.replace(\"_\", \" \")}\n                        </p>\n                      </div>\n                    </div>\n                    <DropdownMenuSeparator />\n                    <DropdownMenuItem onClick={() => setShowProfileModal(true)} data-profile-edit> {/* Changed to open profile modal and added data attribute */}\n                      <User className=\"mr-2 h-4 w-4\" /> {/* Replaced Settings icon with User icon */}\n                      <span>Edit Profile</span> {/* Changed text to Edit Profile */}\n                    </DropdownMenuItem>\n                    <DropdownMenuSeparator />\n                    <DropdownMenuItem onClick={() => logout()}>\n                      <LogOut className=\"mr-2 h-4 w-4\" />\n                      <span>Log out</span>\n                    </DropdownMenuItem>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n              ) : (\n                <Button onClick={() => setShowAuthModal(true)}>\n                  <User className=\"mr-2 h-4 w-4\" />\n                  Login\n                </Button>\n              )}\n\n              <Button variant=\"ghost\" size=\"sm\" className=\"md:hidden p-2 text-gray-600\">\n                <Menu className=\"h-5 w-5\" />\n              </Button>\n            </div>\n          </div>\n        </nav>\n      </header>\n\n      <AuthModal\n        isOpen={showAuthModal}\n        onClose={() => setShowAuthModal(false)}\n        userType={userType}\n      />\n\n      <UserProfileModal\n        isOpen={showProfileModal}\n        onClose={() => setShowProfileModal(false)}\n      />\n    </>\n  );\n}","path":null,"size_bytes":5741,"size_tokens":null},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","path":null,"size_bytes":2712,"size_tokens":null},"replit.md":{"content":"# Pili Jobs - Local Job Board Platform\n\n## Overview\n\nPili Jobs is a modern web-based job board platform designed specifically for Pili, Camarines Sur. The platform connects local job seekers with employers, featuring job search and filtering, application management, employer verification, and role-based dashboards for job seekers, employers, and administrators.\n\n**Key Features:**\n- Job search with filtering by location (barangay-level), category, salary, and keywords\n- Application tracking and management\n- Employer verification system with document upload\n- SMS notifications via TextBee integration\n- Job matching and recommendation engine for job seekers\n- Admin dashboard with analytics and user management\n- Saved jobs and job alerts functionality\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Technology Stack:**\n- React 18 with TypeScript for type safety\n- Vite for development and build tooling\n- TanStack React Query for server state management and data fetching\n- Wouter for lightweight client-side routing\n- Tailwind CSS for styling with shadcn/ui component library\n- Recharts for data visualization in admin dashboard\n\n**Design Patterns:**\n- Component-based architecture with reusable UI components\n- Custom hooks for authentication (`useAuth`) and toast notifications\n- Modal-based workflows for job applications, user profiles, and employer verification\n- Role-based UI rendering (job seeker, employer, admin dashboards)\n- Centralized API request handling through `queryClient.ts`\n\n**Key Architectural Decisions:**\n- **Single-page application** with client-side routing for fast navigation\n- **Role-based dashboards** shown conditionally based on authenticated user's role\n- **Form validation** using Zod schemas with React Hook Form integration\n- **Optimistic updates** and cache invalidation with React Query for responsive UX\n- **Mobile-responsive design** with Tailwind CSS breakpoints\n\n### Backend Architecture\n\n**Technology Stack:**\n- Express.js with TypeScript for the REST API\n- Drizzle ORM for database operations\n- SQLite (better-sqlite3) for local data storage\n- JWT-based authentication with session management\n- bcrypt.js for password hashing\n- Zod for request validation\n\n**Design Patterns:**\n- **RESTful API design** with clear resource endpoints\n- **Middleware-based request processing** (cookie parsing, authentication, logging)\n- **Storage layer abstraction** through `DatabaseStorage` class\n- **Session-based authentication** with HTTP-only cookies\n- **Role-based access control** with middleware guards (`requireAuth`, `requireEmployer`, `requireAdmin`)\n\n**Key Architectural Decisions:**\n- **SQLite database** chosen for simplicity and portability in local development\n- **Drizzle ORM** provides type-safe database queries and schema management\n- **Session storage** uses JWT tokens stored in HTTP-only cookies for security\n- **File uploads** converted to base64 and stored directly in database\n- **Database schema** uses SQLite-specific features (integer autoincrement, timestamp modes)\n\n**API Structure:**\n- `/api/auth/*` - Authentication endpoints (login, register, logout, session validation)\n- `/api/jobs/*` - Job CRUD operations with search, filtering, and pagination\n- `/api/applications/*` - Job application management\n- `/api/jobseeker/*` - Job seeker specific features (saved jobs, recommendations, applications)\n- `/api/employer/*` - Employer features (job management, candidate scouting, verification)\n- `/api/admin/*` - Admin operations (user management, statistics, verification approval)\n\n### Data Storage\n\n**Database: PostgreSQL (Neon) with Drizzle ORM**\n\n**Migration History:**\n- **October 2025**: Migrated from SQLite to PostgreSQL for Vercel serverless compatibility\n\n**Schema Design:**\n- **users** - Authentication and user profiles with role-based access (jobseeker, employer, admin)\n- **userSessions** - JWT session management with expiration tracking\n- **jobs** - Job listings with employer reference and metadata (views, applicants, featured status)\n- **applications** - Job applications with applicant details and status tracking\n- **employers** - Employer profiles and verification documents\n- **categories** - Job categories for filtering\n- **savedJobs** - User's saved job listings\n- **jobAlerts** - Job alert preferences for notifications\n- **jobMatches** - ML-based job matching scores for recommendations\n\n**Key Decisions:**\n- **PostgreSQL (Neon)** chosen for serverless compatibility with Vercel deployment\n- **Drizzle ORM** provides type safety and migration management\n- **Base64 file storage** for resumes and verification documents (simplifies deployment but increases database size)\n- **Soft deletes** implemented through `isActive` flags rather than hard deletion\n- **Timestamp tracking** on all major entities (createdAt, updatedAt)\n\n### Authentication & Authorization\n\n**Authentication Flow:**\n1. User registers with email/password and role selection\n2. Password hashed with bcrypt (12 rounds)\n3. Login creates JWT session token stored in HTTP-only cookie\n4. Session validated on each request via middleware\n5. Token expiration checked against database session record\n\n**Authorization Levels:**\n- **Public** - Job browsing and search\n- **Authenticated** - Job applications, saved jobs, profile management\n- **Employer** - Job posting, application management, candidate scouting\n- **Admin** - User management, verification approval, system analytics\n\n**Security Measures:**\n- HTTP-only cookies prevent XSS attacks\n- Password hashing with bcrypt\n- Role-based middleware guards on protected routes\n- Session expiration (7 days) with database tracking\n- CORS configured for development/production environments\n\n## External Dependencies\n\n### SMS Notifications\n- **TextBee API** - Cost-effective SMS gateway using Android device\n- Used for: Application confirmations, employer notifications, status updates\n- Configuration: API key and device ID stored in environment variables\n- Free tier: 50 messages/day, 300/month with 1 device\n\n### UI Component Library\n- **shadcn/ui** - Radix UI primitives with Tailwind CSS styling\n- Provides accessible, customizable components (dialogs, forms, tables, etc.)\n\n### Database & ORM\n- **@neondatabase/serverless** - PostgreSQL serverless driver for Vercel\n- **Drizzle Kit** - Schema management and migrations\n- **Drizzle ORM** - Type-safe database queries with PostgreSQL support\n\n### Development Tools\n- **Vite** - Fast development server and build tool\n- **ESBuild** - Production bundling\n- **TSX** - TypeScript execution for development\n\n## Deployment\n\n### Vercel Deployment (Production)\nThe application is configured for serverless deployment on Vercel:\n- **Serverless API**: All routes handled through `api/[...path].ts`\n- **Static Frontend**: Built with Vite to `dist/public`\n- **Database**: PostgreSQL (Neon) for serverless compatibility\n- **Configuration**: See `vercel.json` and `README.vercel.md`\n\n### Environment Configuration\nRequired environment variables:\n- `DATABASE_URL` - PostgreSQL connection string (Neon or other PostgreSQL provider)\n- `JWT_SECRET` - Secret key for JWT token signing\n- `TEXTBEE_API_KEY` - TextBee SMS service API key (optional)\n- `TEXTBEE_DEVICE_ID` - TextBee device identifier (optional)\n- `NODE_ENV` - Environment mode (development/production)\n- `PORT` - Server port (default: 5000)","path":null,"size_bytes":7419,"size_tokens":null},"scripts/seed.ts":{"content":"import * as dotenv from \"dotenv\";\n// Load env vars FIRST before any other imports\ndotenv.config();\n\n// Now import after env vars are loaded\nasync function main() {\n  try {\n    console.log(\"Starting database seeding...\");\n    // Dynamic import to ensure env vars are loaded first\n    const { seedDatabase } = await import(\"../api/server/seed.js\");\n    await seedDatabase();\n    console.log(\"Seeding completed successfully!\");\n    process.exit(0);\n  } catch (error) {\n    console.error(\"Seeding failed:\", error);\n    process.exit(1);\n  }\n}\n\nmain();\n","path":null,"size_bytes":547,"size_tokens":null},"api/[...path].ts":{"content":"import type { VercelRequest, VercelResponse } from \"@vercel/node\";\nimport express, { type Request, Response, NextFunction } from \"express\";\nimport cookieParser from \"cookie-parser\";\nimport { registerRoutes } from \"./server/routes\";\n\nconst app = express();\napp.use(express.json({ limit: \"10mb\" }));\napp.use(express.urlencoded({ extended: false, limit: \"10mb\" }));\napp.use(cookieParser());\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      console.log(logLine);\n    }\n  });\n\n  next();\n});\n\nlet serverInitialized = false;\n\nasync function initializeServer() {\n  if (serverInitialized) return;\n\n  await registerRoutes(app); // ✅ we load express routes here\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n    res.status(status).json({ message });\n  });\n\n  serverInitialized = true;\n}\n\nexport default async function handler(req: VercelRequest, res: VercelResponse) {\n  try {\n    await initializeServer();\n    return app(req as any, res as any);\n  } catch (error) {\n    console.error(\"Handler error:\", error);\n    return res.status(500).json({\n      message: \"Internal server error\",\n      error: error instanceof Error ? error.message : \"Unknown error\",\n    });\n  }\n}\n","path":null,"size_bytes":1989,"size_tokens":null},"README.vercel.md":{"content":"# Deploying to Vercel\n\n## Prerequisites\n\n1. A PostgreSQL database (e.g., Neon, Supabase, or Vercel Postgres)\n2. Your environment variables ready\n\n## Step-by-Step Deployment Guide\n\n### 1. Prepare Your Database\n\nThis application requires PostgreSQL (not SQLite). You can use:\n- **Neon** (recommended): https://neon.tech\n- **Vercel Postgres**: https://vercel.com/docs/storage/vercel-postgres\n- **Supabase**: https://supabase.com\n\n### 2. Set Environment Variables in Vercel\n\nGo to your Vercel project → **Settings** → **Environment Variables** and add:\n\n```\nDATABASE_URL=your_postgresql_connection_string\nJWT_SECRET=your-super-secret-jwt-key-here\nTEXTBEE_API_KEY=your_textbee_api_key (optional)\nTEXTBEE_DEVICE_ID=your_textbee_device_id (optional)\nNODE_ENV=production\n```\n\n### 3. Deploy from GitHub\n\n1. **Connect your repository** to Vercel\n2. Vercel will auto-detect the configuration from `vercel.json`\n3. The build settings should be:\n   - **Framework Preset**: Other\n   - **Build Command**: `npm run build`\n   - **Output Directory**: `dist`\n   - **Install Command**: `npm install`\n\n### 4. Push Database Schema\n\nAfter your first deployment, you need to push the database schema:\n\n```bash\n# Locally, with your production DATABASE_URL\nnpm run db:push\n```\n\nOr set up the database from your Vercel deployment:\n1. Go to your deployed site\n2. Navigate to `/api/admin/seed-database` (requires admin account)\n\n### 5. Verify Deployment\n\n- Your frontend will be at: `https://your-project.vercel.app`\n- API routes will be at: `https://your-project.vercel.app/api/*`\n\n## Important Notes\n\n### Database Migration from SQLite\n\nIf you previously used SQLite locally, your data won't automatically transfer. You need to:\n\n1. **Export data** from SQLite (if needed)\n2. **Set up PostgreSQL** database\n3. **Import data** to PostgreSQL (if needed)\n\n### Build Configuration\n\nThe `vercel.json` file configures:\n- Build command: `npm run build`\n- API routes: All `/api/*` requests route to the serverless function in `api/[...path].ts`\n- Output directory: `dist` (frontend build)\n\n### Serverless Functions\n\nAll API routes are handled by a single serverless function in `api/[...path].ts`. This function:\n- Initializes Express server\n- Registers all routes from `server/routes.ts`\n- Handles requests serverlessly\n\n## Troubleshooting\n\n### Build Fails\n\n1. **Check environment variables**: Make sure `DATABASE_URL` is set\n2. **Check build logs**: Look for missing dependencies\n3. **Test locally**: Run `npm run build` locally first\n\n### Database Connection Errors\n\n1. **Verify DATABASE_URL**: Make sure it's a valid PostgreSQL connection string\n2. **Check database permissions**: Ensure your database user has proper permissions\n3. **Whitelist Vercel IPs**: Some database providers require whitelisting Vercel's IP ranges\n\n### API Routes Not Working\n\n1. **Check function logs**: Go to Vercel → Deployments → Function Logs\n2. **Verify routes**: Make sure `/api/*` paths are working\n3. **Check CORS**: If calling from external domain, CORS might be blocking\n\n## Local Development\n\nFor local development, continue using:\n\n```bash\nnpm run dev\n```\n\nThis runs the full Express server with Vite for hot reloading.\n","path":null,"size_bytes":3185,"size_tokens":null},"api/server/db.sqlite.ts":{"content":"import { drizzle } from \"drizzle-orm/better-sqlite3\";\nimport { sqliteTable } from \"drizzle-orm/sqlite-core\";\nimport Database from \"better-sqlite3\";\nimport * as schema from \"@shared/schema\";\n\n// Use SQLite for local development\nconst sqlite = new Database(\"./pili_jobs.db\");\nexport const db = drizzle(sqlite, { schema });\nexport const pool = null; // Not used for SQLite\n","path":null,"size_bytes":370,"size_tokens":null},"api/server/db.ts":{"content":"import { drizzle } from 'drizzle-orm/neon-serverless';\nimport { neonConfig, Pool } from '@neondatabase/serverless';\nimport * as schema from \"@shared/schema\";\nimport ws from 'ws';\n\nconst databaseUrl = process.env.DATABASE_URL?.trim();\n\nif (!databaseUrl) {\n  throw new Error('DATABASE_URL environment variable is not set');\n}\n\n// Validate the URL format\ntry {\n  new URL(databaseUrl);\n} catch (error) {\n  console.error('Invalid DATABASE_URL format:', databaseUrl);\n  throw new Error('DATABASE_URL must be a valid PostgreSQL connection string');\n}\n\n// Configure for serverless environment\nneonConfig.webSocketConstructor = ws;\nneonConfig.poolQueryViaFetch = true;\nneonConfig.fetchConnectionCache = true;\n\n// Create pool with serverless-optimized settings\nexport const pool = new Pool({ \n  connectionString: databaseUrl,\n  max: 1, // Limit connections in serverless\n  idleTimeoutMillis: 30000,\n  connectionTimeoutMillis: 10000,\n});\n\nexport const db = drizzle(pool, { schema });\n","path":null,"size_bytes":973,"size_tokens":null},"api/server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\n// Load environment variables\nimport * as dotenv from \"dotenv\";\ndotenv.config();\n\nconst app = express();\napp.use(express.json({ limit: \"10mb\" }));\napp.use(express.urlencoded({ extended: false, limit: \"10mb\" }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || \"5000\", 10);\n  server.listen(\n    {\n      port,\n      host: \"0.0.0.0\",\n    },\n    () => {\n      log(`serving on port ${port}`);\n    }\n  );\n})();\n","path":null,"size_bytes":2181,"size_tokens":null},"api/server/seed.ts":{"content":"import bcrypt from \"bcryptjs\";\nimport { db } from \"./db\";\nimport {\n  jobs,\n  applications,\n  users,\n  categories,\n  employers,\n} from \"@shared/schema\";\nimport { eq } from \"drizzle-orm\";\n\nexport async function seedDatabase() {\n  try {\n    console.log(\"Starting database seeding...\");\n\n    // Create sample users\n    const hashedPassword = await bcrypt.hash(\"password123\", 10);\n\n    // Admin user\n    const [adminUser] = await db\n      .insert(users)\n      .values({\n        email: \"admin@pilijobs.com\",\n        passwordHash: hashedPassword,\n        role: \"admin\",\n        firstName: \"Admin\",\n        lastName: \"User\",\n        phone: \"+63912345678\",\n        address: \"Pili Centro\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    // Employer users\n    const [employer1] = await db\n      .insert(users)\n      .values({\n        email: \"employer1@company.com\",\n        passwordHash: hashedPassword,\n        role: \"employer\",\n        firstName: \"John\",\n        lastName: \"Manager\",\n        phone: \"+639123456790\",\n        address: \"Bagumbayan, Pili\",\n        isActive: true,\n        isVerified: true,\n        verificationStatus: \"approved\",\n      })\n      .returning();\n\n    const [employer2] = await db\n      .insert(users)\n      .values({\n        email: \"employer2@business.com\",\n        passwordHash: hashedPassword,\n        role: \"employer\",\n        firstName: \"Jane\",\n        lastName: \"Smith\",\n        phone: \"+639123456791\",\n        address: \"San Jose, Pili\",\n        isActive: true,\n        isVerified: true,\n        verificationStatus: \"approved\",\n      })\n      .returning();\n\n    const [employer3] = await db\n      .insert(users)\n      .values({\n        email: \"employer3@restaurant.com\",\n        passwordHash: hashedPassword,\n        role: \"employer\",\n        firstName: \"Carlos\",\n        lastName: \"Rodriguez\",\n        phone: \"+639123456792\",\n        address: \"Santiago, Pili\",\n        isActive: true,\n        isVerified: true,\n        verificationStatus: \"approved\",\n      })\n      .returning();\n\n    // Job seekers with COMPLETE profiles for testing matching\n    const [jobseeker1] = await db\n      .insert(users)\n      .values({\n        email: \"maria.tech@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Maria\",\n        lastName: \"Cruz\",\n        phone: \"+639123456793\",\n        address: \"Santa Cruz Norte, Pili\",\n        skills: \"Web Development, JavaScript, React, HTML, CSS, Customer Service\",\n        desiredRoles: \"Web Developer, Software Developer, IT Support\",\n        experienceLevel: \"Entry\",\n        preferredLocation: \"Any Location\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    const [jobseeker2] = await db\n      .insert(users)\n      .values({\n        email: \"pedro.hospitality@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Pedro\",\n        lastName: \"Santos\",\n        phone: \"+639123456794\",\n        address: \"Santiago, Pili\",\n        skills: \"Customer Service, Food Service, Communication, Teamwork, Cash Handling\",\n        desiredRoles: \"Restaurant Server, Cashier, Customer Service Representative\",\n        experienceLevel: \"Mid\",\n        preferredLocation: \"Santiago\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    const [jobseeker3] = await db\n      .insert(users)\n      .values({\n        email: \"anna.admin@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Anna\",\n        lastName: \"Reyes\",\n        phone: \"+639123456795\",\n        address: \"Bagumbayan, Pili\",\n        skills: \"Microsoft Office, Data Entry, Filing, Communication, Organization, Customer Service\",\n        desiredRoles: \"Administrative Assistant, Secretary, Office Clerk\",\n        experienceLevel: \"Mid\",\n        preferredLocation: \"Bagumbayan\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    const [jobseeker4] = await db\n      .insert(users)\n      .values({\n        email: \"jose.driver@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Jose\",\n        lastName: \"Mendoza\",\n        phone: \"+639123456796\",\n        address: \"Palestina, Pili\",\n        skills: \"Driving, Navigation, Customer Service, Time Management, Vehicle Maintenance\",\n        desiredRoles: \"Delivery Driver, Truck Driver, Personal Driver\",\n        experienceLevel: \"Senior\",\n        preferredLocation: \"Any Location\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    const [jobseeker5] = await db\n      .insert(users)\n      .values({\n        email: \"lisa.teacher@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Lisa\",\n        lastName: \"Garcia\",\n        phone: \"+639123456797\",\n        address: \"Santo Domingo, Pili\",\n        skills: \"Teaching, Mathematics, English, Communication, Classroom Management, Tutoring\",\n        desiredRoles: \"Teacher, Tutor, Education Coordinator\",\n        experienceLevel: \"Mid\",\n        preferredLocation: \"Santo Domingo\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    const [jobseeker6] = await db\n      .insert(users)\n      .values({\n        email: \"marco.sales@email.com\",\n        passwordHash: hashedPassword,\n        role: \"jobseeker\",\n        firstName: \"Marco\",\n        lastName: \"Villanueva\",\n        phone: \"+639123456798\",\n        address: \"San Jose, Pili\",\n        skills: \"Sales, Retail, Customer Service, Product Knowledge, Inventory Management, Communication\",\n        desiredRoles: \"Sales Associate, Retail Clerk, Store Manager\",\n        experienceLevel: \"Entry\",\n        preferredLocation: \"San Jose\",\n        isActive: true,\n        isVerified: true,\n      })\n      .returning();\n\n    // Create diverse jobs across categories\n    const jobsData = [\n      // Technology jobs\n      {\n        title: \"Junior Web Developer\",\n        description: \"We're looking for a motivated Junior Web Developer to join our team. You'll work on building responsive websites and web applications using modern technologies.\",\n        company: \"Pili Tech Solutions\",\n        location: \"Bagumbayan\",\n        salary: \"₱20,000 - ₱30,000\",\n        type: \"Full-time\",\n        category: \"Technology\",\n        employerId: employer1.id,\n        requirements: \"Web Development, JavaScript, HTML, CSS, React or similar framework\",\n        requiredSkills: \"Web Development, JavaScript, React, HTML, CSS\",\n        benefits: \"Health insurance, 13th month pay, Professional development\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: true,\n      },\n      {\n        title: \"IT Support Specialist\",\n        description: \"Provide technical support to our clients, troubleshoot hardware and software issues, and maintain network infrastructure.\",\n        company: \"Pili Computer Services\",\n        location: \"San Jose\",\n        salary: \"₱18,000 - ₱25,000\",\n        type: \"Full-time\",\n        category: \"Technology\",\n        employerId: employer2.id,\n        requirements: \"IT Support, Computer Hardware, Windows, Networking, Problem Solving\",\n        requiredSkills: \"IT Support, Computer Hardware, Networking, Windows\",\n        benefits: \"Health coverage, Training programs, Performance bonus\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Food Service jobs\n      {\n        title: \"Restaurant Server\",\n        description: \"Join our team as a restaurant server. Take orders, serve customers, and ensure excellent dining experience for our guests.\",\n        company: \"Pili Family Restaurant\",\n        location: \"Santiago\",\n        salary: \"₱15,000 - ₱20,000\",\n        type: \"Full-time\",\n        category: \"Food Service\",\n        employerId: employer3.id,\n        requirements: \"Customer Service, Food Service, Communication, Teamwork\",\n        requiredSkills: \"Customer Service, Food Service, Communication\",\n        benefits: \"Meal allowance, Service charge, Overtime pay, Tips\",\n        email: \"employer3@restaurant.com\",\n        phone: \"+639123456792\",\n        isActive: true,\n        isFeatured: true,\n      },\n      {\n        title: \"Barista\",\n        description: \"Prepare and serve coffee beverages, maintain cleanliness, and provide excellent customer service in our cafe.\",\n        company: \"Pili Coffee House\",\n        location: \"Bagumbayan\",\n        salary: \"₱14,000 - ₱18,000\",\n        type: \"Full-time\",\n        category: \"Food Service\",\n        employerId: employer3.id,\n        requirements: \"Customer Service, Food Service, Coffee Preparation, Cash Handling\",\n        requiredSkills: \"Customer Service, Food Service, Cash Handling\",\n        benefits: \"Free meals, Tips, Flexible schedule\",\n        email: \"employer3@restaurant.com\",\n        phone: \"+639123456792\",\n        isActive: true,\n        isFeatured: false,\n      },\n      {\n        title: \"Kitchen Staff\",\n        description: \"Assist in food preparation, maintain kitchen cleanliness, and follow food safety protocols.\",\n        company: \"Pili Grill House\",\n        location: \"Santiago\",\n        salary: \"₱13,000 - ₱17,000\",\n        type: \"Full-time\",\n        category: \"Food Service\",\n        employerId: employer3.id,\n        requirements: \"Food Preparation, Kitchen Operations, Hygiene Standards, Teamwork\",\n        requiredSkills: \"Food Preparation, Kitchen Operations, Teamwork\",\n        benefits: \"Meal allowance, 13th month pay\",\n        email: \"employer3@restaurant.com\",\n        phone: \"+639123456792\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Administrative jobs\n      {\n        title: \"Administrative Assistant\",\n        description: \"Support office operations with administrative tasks, document preparation, data entry, and customer communication.\",\n        company: \"Pili Municipal Office\",\n        location: \"Bagumbayan\",\n        salary: \"₱18,000 - ₱25,000\",\n        type: \"Full-time\",\n        category: \"Administrative\",\n        employerId: employer1.id,\n        requirements: \"Microsoft Office, Data Entry, Communication, Organization, Filing\",\n        requiredSkills: \"Microsoft Office, Data Entry, Organization, Communication\",\n        benefits: \"Government benefits, Paid leaves, Training opportunities\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: true,\n      },\n      {\n        title: \"Office Clerk\",\n        description: \"Handle filing, data entry, phone calls, and general office support tasks.\",\n        company: \"Pili Business Center\",\n        location: \"San Jose\",\n        salary: \"₱15,000 - ₱20,000\",\n        type: \"Full-time\",\n        category: \"Administrative\",\n        employerId: employer2.id,\n        requirements: \"Microsoft Office, Filing, Data Entry, Phone Etiquette, Organization\",\n        requiredSkills: \"Microsoft Office, Data Entry, Filing, Organization\",\n        benefits: \"Health insurance, 13th month pay\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Transportation jobs\n      {\n        title: \"Delivery Driver\",\n        description: \"Deliver products to customers in Pili and surrounding areas. Must have valid driver's license and motorcycle.\",\n        company: \"Pili Express Delivery\",\n        location: \"Palestina\",\n        salary: \"₱16,000 - ₱22,000\",\n        type: \"Full-time\",\n        category: \"Transportation\",\n        employerId: employer2.id,\n        requirements: \"Driving, Navigation, Customer Service, Time Management, Valid License\",\n        requiredSkills: \"Driving, Navigation, Time Management, Customer Service\",\n        benefits: \"Fuel allowance, Maintenance support, Insurance coverage\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: true,\n      },\n      {\n        title: \"Tricycle Driver\",\n        description: \"Transport passengers within Pili. Must have professional driver's license and own tricycle.\",\n        company: \"Pili Transport Cooperative\",\n        location: \"Santiago\",\n        salary: \"₱500 - ₱800 per day\",\n        type: \"Contract\",\n        category: \"Transportation\",\n        employerId: employer1.id,\n        requirements: \"Driving, Navigation, Customer Service, Valid Professional License\",\n        requiredSkills: \"Driving, Customer Service, Navigation\",\n        benefits: \"Flexible schedule, Fuel subsidy\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Education jobs\n      {\n        title: \"Math Tutor\",\n        description: \"Provide one-on-one or group tutoring for high school students in mathematics.\",\n        company: \"Pili Learning Center\",\n        location: \"Santo Domingo\",\n        salary: \"₱400 - ₱600 per hour\",\n        type: \"Part-time\",\n        category: \"Education\",\n        employerId: employer1.id,\n        requirements: \"Mathematics, Teaching, Communication, Patience, Tutoring\",\n        requiredSkills: \"Mathematics, Teaching, Tutoring, Communication\",\n        benefits: \"Flexible schedule, Professional development, Performance bonus\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: false,\n      },\n      {\n        title: \"English Teacher\",\n        description: \"Teach English to elementary and high school students. Full curriculum development and classroom management.\",\n        company: \"Pili Private School\",\n        location: \"Bagumbayan\",\n        salary: \"₱20,000 - ₱28,000\",\n        type: \"Full-time\",\n        category: \"Education\",\n        employerId: employer1.id,\n        requirements: \"English, Teaching, Classroom Management, Communication, Lesson Planning\",\n        requiredSkills: \"English, Teaching, Communication, Classroom Management\",\n        benefits: \"Health insurance, Summer vacation pay, Professional development\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: true,\n      },\n\n      // Retail jobs\n      {\n        title: \"Sales Associate\",\n        description: \"Assist customers, manage inventory, handle transactions, and maintain store appearance.\",\n        company: \"Pili Shopping Center\",\n        location: \"San Jose\",\n        salary: \"₱15,000 - ₱20,000\",\n        type: \"Full-time\",\n        category: \"Retail\",\n        employerId: employer2.id,\n        requirements: \"Sales, Customer Service, Retail, Product Knowledge, Communication\",\n        requiredSkills: \"Sales, Customer Service, Retail, Communication\",\n        benefits: \"Health insurance, Employee discount, Performance bonus\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: true,\n      },\n      {\n        title: \"Cashier\",\n        description: \"Process customer transactions, handle cash and credit payments, maintain accurate records.\",\n        company: \"Pili Supermarket\",\n        location: \"Bagumbayan\",\n        salary: \"₱14,000 - ₱18,000\",\n        type: \"Full-time\",\n        category: \"Retail\",\n        employerId: employer2.id,\n        requirements: \"Cash Handling, Customer Service, Attention to Detail, Basic Math\",\n        requiredSkills: \"Cash Handling, Customer Service\",\n        benefits: \"13th month pay, Employee discount\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: false,\n      },\n      {\n        title: \"Inventory Clerk\",\n        description: \"Manage stock levels, receive shipments, organize warehouse, track inventory.\",\n        company: \"Pili Warehouse\",\n        location: \"Palestina\",\n        salary: \"₱16,000 - ₱21,000\",\n        type: \"Full-time\",\n        category: \"Retail\",\n        employerId: employer1.id,\n        requirements: \"Inventory Management, Organization, Data Entry, Physical Work\",\n        requiredSkills: \"Inventory Management, Organization, Data Entry\",\n        benefits: \"Health insurance, 13th month pay\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Healthcare jobs\n      {\n        title: \"Nursing Assistant\",\n        description: \"Assist nurses with patient care, monitoring, and daily activities in our healthcare facility.\",\n        company: \"Pili Health Clinic\",\n        location: \"Bagumbayan\",\n        salary: \"₱18,000 - ₱24,000\",\n        type: \"Full-time\",\n        category: \"Healthcare\",\n        employerId: employer1.id,\n        requirements: \"Patient Care, Healthcare, Communication, Compassion, Basic First Aid\",\n        requiredSkills: \"Patient Care, Healthcare, Communication\",\n        benefits: \"Health insurance, Hazard pay, Professional development\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Construction jobs\n      {\n        title: \"Construction Worker\",\n        description: \"General construction labor including carpentry, masonry, and site cleanup.\",\n        company: \"Pili Builders Inc\",\n        location: \"Santiago\",\n        salary: \"₱400 - ₱600 per day\",\n        type: \"Contract\",\n        category: \"Construction\",\n        employerId: employer2.id,\n        requirements: \"Construction, Physical Labor, Teamwork, Safety Awareness\",\n        requiredSkills: \"Construction, Physical Labor, Teamwork\",\n        benefits: \"Daily pay, Meal allowance, Safety equipment provided\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Freelance jobs\n      {\n        title: \"Graphic Designer\",\n        description: \"Create marketing materials, logos, and social media graphics for various clients on a project basis.\",\n        company: \"Pili Creative Studio\",\n        location: \"Any Location\",\n        salary: \"₱2,000 - ₱5,000 per project\",\n        type: \"Freelance\",\n        category: \"Creative\",\n        employerId: employer1.id,\n        requirements: \"Graphic Design, Adobe Photoshop, Illustrator, Creativity, Communication\",\n        requiredSkills: \"Graphic Design, Adobe Photoshop, Creativity\",\n        benefits: \"Flexible schedule, Work from home, Portfolio building\",\n        email: \"employer1@company.com\",\n        phone: \"+639123456790\",\n        isActive: true,\n        isFeatured: false,\n      },\n\n      // Customer service\n      {\n        title: \"Customer Service Representative\",\n        description: \"Handle customer inquiries, complaints, and provide product information via phone and email.\",\n        company: \"Pili Call Center\",\n        location: \"San Jose\",\n        salary: \"₱17,000 - ₱23,000\",\n        type: \"Full-time\",\n        category: \"Customer Service\",\n        employerId: employer2.id,\n        requirements: \"Customer Service, Communication, Problem Solving, Computer Skills\",\n        requiredSkills: \"Customer Service, Communication, Problem Solving\",\n        benefits: \"Health insurance, Night differential, Performance bonus\",\n        email: \"employer2@business.com\",\n        phone: \"+639123456791\",\n        isActive: true,\n        isFeatured: true,\n      },\n    ];\n\n    const createdJobs = [];\n    for (const jobData of jobsData) {\n      const [job] = await db.insert(jobs).values(jobData).returning();\n      createdJobs.push(job);\n    }\n\n    console.log(\"Database seeded successfully!\");\n    console.log(\"\\n=== TEST LOGIN CREDENTIALS ===\");\n    console.log(\"\\nAdmin Account:\");\n    console.log(\"  Email: admin@pilijobs.com\");\n    console.log(\"  Password: password123\");\n    console.log(\"\\nEmployer Accounts:\");\n    console.log(\"  Email: employer1@company.com / Password: password123\");\n    console.log(\"  Email: employer2@business.com / Password: password123\");\n    console.log(\"  Email: employer3@restaurant.com / Password: password123\");\n    console.log(\"\\nJob Seeker Accounts (WITH COMPLETE PROFILES for testing matching):\");\n    console.log(\"  1. Maria Cruz (Tech) - maria.tech@email.com / password123\");\n    console.log(\"     Skills: Web Development, JavaScript, React\");\n    console.log(\"     Best matches: Web Developer, IT Support jobs\");\n    console.log(\"\\n  2. Pedro Santos (Hospitality) - pedro.hospitality@email.com / password123\");\n    console.log(\"     Skills: Customer Service, Food Service\");\n    console.log(\"     Best matches: Restaurant Server, Barista, Cashier jobs\");\n    console.log(\"\\n  3. Anna Reyes (Admin) - anna.admin@email.com / password123\");\n    console.log(\"     Skills: Microsoft Office, Data Entry, Organization\");\n    console.log(\"     Best matches: Administrative Assistant, Office Clerk jobs\");\n    console.log(\"\\n  4. Jose Mendoza (Driver) - jose.driver@email.com / password123\");\n    console.log(\"     Skills: Driving, Navigation, Time Management\");\n    console.log(\"     Best matches: Delivery Driver, Tricycle Driver jobs\");\n    console.log(\"\\n  5. Lisa Garcia (Teacher) - lisa.teacher@email.com / password123\");\n    console.log(\"     Skills: Teaching, Mathematics, English\");\n    console.log(\"     Best matches: Teacher, Tutor jobs\");\n    console.log(\"\\n  6. Marco Villanueva (Sales) - marco.sales@email.com / password123\");\n    console.log(\"     Skills: Sales, Retail, Customer Service\");\n    console.log(\"     Best matches: Sales Associate, Retail jobs\");\n    console.log(\"\\nTotal Jobs Created: \" + createdJobs.length);\n    console.log(\"================================\\n\");\n\n    return { success: true, message: \"Database seeded successfully!\" };\n  } catch (error) {\n    console.error(\"Error seeding database:\", error);\n    throw new Error(\"Failed to seed database\");\n  }\n}\n","path":null,"size_bytes":21980,"size_tokens":null},"api/server/for-vercel-entry.ts":{"content":"// Minimal re-export used by the Vercel serverless function.\n// We bundle this file during `npm run build` and import the built\n// artifact from the API function so Vercel has a runtime JS module\n// it can load (avoids importing raw TS files outside the `api/` dir).\nexport { registerRoutes } from \"./routes\";\n","path":null,"size_bytes":310,"size_tokens":null},"api/server/textbee.ts":{"content":"import fetch from \"node-fetch\";\nimport * as dotenv from \"dotenv\";\ndotenv.config();\n\nconst TEXTBEE_API_URL = \"https://api.textbee.dev\";\nconst TEXTBEE_API_KEY = process.env.TEXTBEE_API_KEY;\nconst TEXTBEE_DEVICE_ID = process.env.TEXTBEE_DEVICE_ID;\n\nexport async function sendApplicationConfirmationSMS(\n  phone: string,\n  applicantName: string,\n  jobTitle: string,\n  company: string\n): Promise<boolean> {\n  if (!TEXTBEE_API_KEY || !TEXTBEE_DEVICE_ID) {\n    console.warn(\n      \"TEXTBEE_API_KEY or TEXTBEE_DEVICE_ID not configured, skipping SMS\"\n    );\n    return false;\n  }\n\n  try {\n    const message = `Hi ${applicantName}! Your application for ${jobTitle} at ${company} has been received. We'll be in touch soon!`;\n\n    const response = await fetch(\n      `${TEXTBEE_API_URL}/api/v1/gateway/devices/${TEXTBEE_DEVICE_ID}/send-sms`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": TEXTBEE_API_KEY,\n        },\n        body: JSON.stringify({\n          recipients: [phone],\n          message: message,\n        }),\n      }\n    );\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      console.error(\"Failed to send SMS:\", result);\n      return false;\n    }\n\n    console.log(\"SMS sent successfully:\", result);\n    return true;\n  } catch (error) {\n    console.error(\"Error sending SMS:\", error);\n    return false;\n  }\n}\n\nexport async function sendEmployerNotificationSMS(\n  phone: string,\n  applicantName: string,\n  jobTitle: string\n): Promise<boolean> {\n  if (!TEXTBEE_API_KEY || !TEXTBEE_DEVICE_ID) {\n    console.warn(\n      \"TEXTBEE_API_KEY or TEXTBEE_DEVICE_ID not configured, skipping SMS\"\n    );\n    return false;\n  }\n\n  try {\n    const message = `New application received from ${applicantName} for ${jobTitle}. Check your dashboard to review.`;\n\n    const response = await fetch(\n      `${TEXTBEE_API_URL}/api/v1/gateway/devices/${TEXTBEE_DEVICE_ID}/send-sms`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": TEXTBEE_API_KEY,\n        },\n        body: JSON.stringify({\n          recipients: [phone],\n          message: message,\n        }),\n      }\n    );\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      console.error(\"Failed to send SMS:\", result);\n      return false;\n    }\n\n    console.log(\"SMS sent successfully:\", result);\n    return true;\n  } catch (error) {\n    console.error(\"Error sending SMS:\", error);\n    return false;\n  }\n}\n\nexport async function sendApplicationStatusUpdateSMS(\n  phone: string,\n  applicantName: string,\n  jobTitle: string,\n  company: string,\n  status: string\n): Promise<boolean> {\n  if (!TEXTBEE_API_KEY || !TEXTBEE_DEVICE_ID) {\n    console.warn(\n      \"TEXTBEE_API_KEY or TEXTBEE_DEVICE_ID not configured, skipping SMS\"\n    );\n    return false;\n  }\n\n  try {\n    let statusMessage = \"\";\n    switch (status) {\n      case \"reviewed\":\n        statusMessage = \"Your application has been reviewed\";\n        break;\n      case \"interviewing\":\n        statusMessage = \"You have been selected for an interview\";\n        break;\n      case \"hired\":\n        statusMessage = \"Congratulations! You have been hired\";\n        break;\n      case \"rejected\":\n        statusMessage =\n          \"Thank you for your interest. Unfortunately, your application was not selected\";\n        break;\n      default:\n        statusMessage = `Your application status has been updated to: ${status}`;\n    }\n\n    const message = `Hi ${applicantName}! ${statusMessage} for ${jobTitle} at ${company}.`;\n\n    const response = await fetch(\n      `${TEXTBEE_API_URL}/api/v1/gateway/devices/${TEXTBEE_DEVICE_ID}/send-sms`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": TEXTBEE_API_KEY,\n        },\n        body: JSON.stringify({\n          recipients: [phone],\n          message: message,\n        }),\n      }\n    );\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      console.error(\"Failed to send SMS:\", result);\n      return false;\n    }\n\n    console.log(\"SMS sent successfully:\", result);\n    return true;\n  } catch (error) {\n    console.error(\"Error sending SMS:\", error);\n    return false;\n  }\n}\n\nexport async function sendEmployerVerificationApprovalSMS(\n  phone: string,\n  employerName: string\n): Promise<boolean> {\n  if (!TEXTBEE_API_KEY || !TEXTBEE_DEVICE_ID) {\n    console.warn(\n      \"TEXTBEE_API_KEY or TEXTBEE_DEVICE_ID not configured, skipping SMS\"\n    );\n    return false;\n  }\n\n  try {\n    const message = `Hi ${employerName}! Great news! Your employer verification has been approved. You can now post jobs and access all features on Pili Jobs. Welcome aboard!`;\n\n    const response = await fetch(\n      `${TEXTBEE_API_URL}/api/v1/gateway/devices/${TEXTBEE_DEVICE_ID}/send-sms`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": TEXTBEE_API_KEY,\n        },\n        body: JSON.stringify({\n          recipients: [phone],\n          message: message,\n        }),\n      }\n    );\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      console.error(\"Failed to send SMS:\", result);\n      return false;\n    }\n\n    console.log(\"Verification approval SMS sent successfully:\", result);\n    return true;\n  } catch (error) {\n    console.error(\"Error sending verification approval SMS:\", error);\n    return false;\n  }\n}\n\nexport async function sendEmployerVerificationRejectionSMS(\n  phone: string,\n  employerName: string,\n  reason?: string\n): Promise<boolean> {\n  if (!TEXTBEE_API_KEY || !TEXTBEE_DEVICE_ID) {\n    console.warn(\n      \"TEXTBEE_API_KEY or TEXTBEE_DEVICE_ID not configured, skipping SMS\"\n    );\n    return false;\n  }\n\n  try {\n    const reasonText = reason ? ` Reason: ${reason}.` : \"\";\n    const message = `Hi ${employerName}! Your employer verification request has been reviewed but was not approved.${reasonText} Please contact support or resubmit your documents with the required information.`;\n\n    const response = await fetch(\n      `${TEXTBEE_API_URL}/api/v1/gateway/devices/${TEXTBEE_DEVICE_ID}/send-sms`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-api-key\": TEXTBEE_API_KEY,\n        },\n        body: JSON.stringify({\n          recipients: [phone],\n          message: message,\n        }),\n      }\n    );\n\n    const result = await response.json();\n\n    if (!response.ok) {\n      console.error(\"Failed to send SMS:\", result);\n      return false;\n    }\n\n    console.log(\"Verification rejection SMS sent successfully:\", result);\n    return true;\n  } catch (error) {\n    console.error(\"Error sending verification rejection SMS:\", error);\n    return false;\n  }\n}\n","path":null,"size_bytes":6805,"size_tokens":null},"api/server/auth.ts":{"content":"import bcrypt from \"bcryptjs\";\nimport jwt from \"jsonwebtoken\";\nimport { Request, Response, NextFunction } from \"express\";\nimport { db } from \"./db\";\nimport { users, userSessions, type User } from \"@shared/schema\";\nimport { eq } from \"drizzle-orm\";\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"pili-jobs-dev-secret-key-2025\";\nconst SESSION_DURATION = 7 * 24 * 60 * 60 * 1000; // 7 days\n\nexport interface AuthenticatedRequest extends Request {\n  user?: number; // User ID\n  userObject?: User; // Full user object if needed\n}\n\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, 12);\n}\n\nexport async function verifyPassword(password: string, hash: string): Promise<boolean> {\n  return bcrypt.compare(password, hash);\n}\n\nexport function generateToken(payload: any): string {\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: \"7d\" });\n}\n\nexport function verifyToken(token: string): any {\n  try {\n    return jwt.verify(token, JWT_SECRET);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport async function createSession(userId: number): Promise<string> {\n  const sessionId = generateToken({ userId, type: \"session\" });\n  const expiresAt = new Date(Date.now() + SESSION_DURATION);\n  \n  await db.insert(userSessions).values({\n    id: sessionId,\n    userId,\n    expiresAt,\n  });\n  \n  return sessionId;\n}\n\nexport async function validateSession(sessionId: string): Promise<User | null> {\n  try {\n    const [session] = await db\n      .select()\n      .from(userSessions)\n      .where(eq(userSessions.id, sessionId));\n    \n    if (!session || session.expiresAt < new Date()) {\n      if (session) {\n        await db.delete(userSessions).where(eq(userSessions.id, sessionId));\n      }\n      return null;\n    }\n    \n    const [user] = await db\n      .select()\n      .from(users)\n      .where(eq(users.id, session.userId));\n    \n    return user || null;\n  } catch (error) {\n    return null;\n  }\n}\n\nexport async function destroySession(sessionId: string): Promise<void> {\n  await db.delete(userSessions).where(eq(userSessions.id, sessionId));\n}\n\nexport const requireAuth = async (req: AuthenticatedRequest, res: Response, next: NextFunction) => {\n  const sessionToken = req.cookies?.session;\n  \n  if (!sessionToken) {\n    return res.status(401).json({ message: \"Authentication required\" });\n  }\n  \n  const userObject = await validateSession(sessionToken);\n  if (!userObject) {\n    return res.status(401).json({ message: \"Invalid or expired session\" });\n  }\n  \n  req.user = userObject.id;\n  req.userObject = userObject;\n  next();\n};\n\nexport function requireRole(roles: string[]) {\n  return async (req: AuthenticatedRequest, res: Response, next: NextFunction) => {\n    await requireAuth(req, res, () => {\n      if (!req.userObject) {\n        return res.status(401).json({ message: \"Authentication required\" });\n      }\n      \n      if (!roles.includes(req.userObject.role)) {\n        return res.status(403).json({ \n          message: \"Insufficient permissions\", \n          required: roles,\n          current: req.userObject.role \n        });\n      }\n      \n      next();\n    });\n  };\n}\n\nexport const requireJobSeeker = requireRole([\"job_seeker\"]);\nexport const requireEmployer = requireRole([\"employer\", \"admin\"]);\nexport const requireAdmin = requireRole([\"admin\"]);","path":null,"size_bytes":3299,"size_tokens":null},"api/server/scripts/inspect-db.js":{"content":"","path":null,"size_bytes":0,"size_tokens":null},"api/server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport {\n  sendApplicationConfirmationSMS,\n  sendEmployerNotificationSMS,\n  sendApplicationStatusUpdateSMS,\n  sendEmployerVerificationApprovalSMS,\n  sendEmployerVerificationRejectionSMS,\n} from \"./textbee\";\nimport cookieParser from \"cookie-parser\";\nimport { storage } from \"./storage\";\nimport {\n  hashPassword,\n  verifyPassword,\n  createSession,\n  validateSession,\n  destroySession,\n  requireAuth,\n  requireEmployer,\n  requireAdmin,\n  type AuthenticatedRequest,\n} from \"./auth\";\nimport {\n  insertJobSchema,\n  insertApplicationSchema,\n  insertEmployerSchema,\n  insertCategorySchema,\n  insertSavedJobSchema,\n  insertJobAlertSchema,\n  updateApplicationSchema,\n  registerUserSchema,\n  loginUserSchema,\n  type Job,\n} from \"@shared/schema\";\nimport { z } from \"zod\";\nimport * as XLSX from 'xlsx';\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Middleware\n  app.use(cookieParser());\n\n  // Authentication routes\n  app.post(\"/api/auth/register\", async (req, res) => {\n    try {\n      const validatedData = registerUserSchema.parse(req.body);\n\n      // Check if user already exists\n      const existingUser = await storage.getUserByEmail(validatedData.email);\n      if (existingUser) {\n        return res\n          .status(400)\n          .json({ message: \"An account with this email already exists\" });\n      }\n\n      // Hash password and create user\n      const hashedPassword = await hashPassword(validatedData.password);\n      const user = await storage.createUser({\n        email: validatedData.email,\n        passwordHash: hashedPassword,\n        role: validatedData.role,\n        firstName: validatedData.firstName,\n        middleName: validatedData.middleName,\n        lastName: validatedData.lastName,\n        phone: validatedData.phone,\n      });\n\n      // Create session\n      const sessionToken = await createSession(user.id);\n      res.cookie(\"session\", sessionToken, {\n        httpOnly: true,\n        secure: process.env.NODE_ENV === \"production\",\n        sameSite: process.env.NODE_ENV === \"production\" ? \"none\" : \"lax\",\n        maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days\n        path: \"/\",\n      });\n\n      // Return user without password\n      const { passwordHash, ...userResponse } = user;\n      res.status(201).json({ user: userResponse });\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          message: \"Invalid registration data\",\n          errors: error.errors,\n        });\n      }\n\n      // Handle database constraint errors (both SQLite and PostgreSQL)\n      if (error && typeof error === 'object') {\n        const errorMessage = 'message' in error ? (error as Error).message : '';\n        const errorCode = 'code' in error ? (error as any).code : '';\n        \n        // PostgreSQL unique constraint violation (code 23505)\n        if (errorCode === '23505' || errorMessage.includes(\"UNIQUE constraint failed\") || errorMessage.includes(\"duplicate key\")) {\n          if (errorMessage.includes(\"email\") || errorMessage.includes(\"users_email\")) {\n            return res\n              .status(400)\n              .json({ message: \"An account with this email already exists\" });\n          }\n          if (errorMessage.includes(\"phone\") || errorMessage.includes(\"users_phone\")) {\n            return res.status(400).json({\n              message: \"An account with this phone number already exists\",\n            });\n          }\n          // Generic unique constraint error\n          return res.status(400).json({\n            message: \"An account with this information already exists\",\n          });\n        }\n      }\n\n      console.error(\"Registration error:\", error);\n      res\n        .status(500)\n        .json({ message: \"Failed to register user. Please try again.\" });\n    }\n  });\n\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const validatedData = loginUserSchema.parse(req.body);\n\n      const user = await storage.getUserByEmail(validatedData.email);\n      if (!user) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      const isValidPassword = await verifyPassword(\n        validatedData.password,\n        user.passwordHash\n      );\n      if (!isValidPassword) {\n        return res.status(401).json({ message: \"Invalid credentials\" });\n      }\n\n      // Create session\n      const sessionToken = await createSession(user.id);\n      res.cookie(\"session\", sessionToken, {\n        httpOnly: true,\n        secure: process.env.NODE_ENV === \"production\",\n        sameSite: process.env.NODE_ENV === \"production\" ? \"none\" : \"lax\",\n        maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days\n        path: \"/\",\n      });\n\n      // Return user without password\n      const { passwordHash, ...userResponse } = user;\n      res.json({ user: userResponse });\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          message: \"Invalid login data\",\n          errors: error.errors,\n        });\n      }\n      console.error(\"Login error:\", error);\n      res.status(500).json({ message: \"Failed to login\" });\n    }\n  });\n\n  app.post(\n    \"/api/auth/logout\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const sessionToken = req.cookies.session;\n        if (sessionToken) {\n          await destroySession(sessionToken);\n        }\n        res.clearCookie(\"session\", {\n          httpOnly: true,\n          secure: process.env.NODE_ENV === \"production\",\n          sameSite: process.env.NODE_ENV === \"production\" ? \"none\" : \"lax\",\n          path: \"/\",\n        });\n        res.json({ message: \"Logged out successfully\" });\n      } catch (error) {\n        console.error(\"Logout error:\", error);\n        res.status(500).json({ message: \"Failed to logout\" });\n      }\n    }\n  );\n\n  app.get(\n    \"/api/auth/me\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        const { passwordHash, ...userResponse } = user;\n        res.json({ user: userResponse });\n      } catch (error) {\n        console.error(\"Get user error:\", error);\n        res.status(500).json({ message: \"Failed to get user\" });\n      }\n    }\n  );\n\n  app.put(\n    \"/api/auth/profile\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const { \n          firstName, \n          lastName, \n          email, \n          phone, \n          address,\n          skills,\n          desiredRoles,\n          experienceLevel,\n          preferredLocation\n        } = req.body;\n\n        // Check if email is being changed and if it's already taken by another user\n        if (email) {\n          const existingUser = await storage.getUserByEmail(email);\n          if (existingUser && existingUser.id !== req.user!) {\n            return res.status(400).json({ message: \"Email already in use\" });\n          }\n        }\n\n        const updatedUser = await storage.updateUser(req.user!, {\n          firstName,\n          lastName,\n          email,\n          phone,\n          address,\n          skills,\n          desiredRoles,\n          experienceLevel,\n          preferredLocation,\n          updatedAt: new Date(),\n        });\n\n        if (!updatedUser) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        const { passwordHash, ...userResponse } = updatedUser;\n        res.json({ user: userResponse });\n      } catch (error) {\n        console.error(\"Update profile error:\", error);\n        res.status(500).json({ message: \"Failed to update profile\" });\n      }\n    }\n  );\n\n  // Get applications for current job seeker\n  app.get(\n    \"/api/jobseeker/applications\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role === \"employer\" || user.role === \"admin\") {\n          return res\n            .status(403)\n            .json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        const applications = await storage.getApplicationsByApplicant(\n          user.email\n        );\n        res.json(applications);\n      } catch (error) {\n        console.error(\"Get job seeker applications error:\", error);\n        res.status(500).json({ message: \"Failed to fetch applications\" });\n      }\n    }\n  );\n\n  // Get all jobs with optional search, filters, and pagination\n  app.get(\"/api/jobs\", async (req, res) => {\n    try {\n      const { q, location, type, category, salary, page, limit, jobTypes } =\n        req.query;\n\n      // Parse pagination parameters\n      const currentPage = parseInt(page as string) || 1;\n      const pageSize = parseInt(limit as string) || 10;\n      const offset = (currentPage - 1) * pageSize;\n\n      // Parse jobTypes from comma-separated string\n      const jobTypeArray = jobTypes\n        ? (jobTypes as string).split(\",\").filter((t) => t.trim())\n        : [];\n\n      // Debug logging\n      console.log(\"Search parameters:\", {\n        q: q,\n        location: location,\n        type: type,\n        category: category,\n        salary: salary,\n        jobTypes: jobTypeArray,\n      });\n\n      let jobs;\n      let totalCount;\n\n      // Check if any filter is applied\n      const searchQuery = q ? q.toString().trim() : \"\";\n      const hasFilters =\n        searchQuery ||\n        (location &&\n          location !== \"Pili (All Areas)\" &&\n          location.toString().trim()) ||\n        (type && type.toString().trim()) ||\n        (category &&\n          category !== \"All Categories\" &&\n          category.toString().trim()) ||\n        (salary && salary !== \"Any Salary\" && salary.toString().trim()) ||\n        jobTypeArray.length > 0;\n\n      if (hasFilters) {\n        // Get total count for search results (without pagination)\n        const allSearchResults = await storage.searchJobs(searchQuery, {\n          location: location as string,\n          type: type as string,\n          category: category as string,\n          salary: salary as string,\n          jobTypes: jobTypeArray,\n        });\n        totalCount = allSearchResults.length;\n\n        // Get paginated search results\n        jobs = await storage.searchJobs(\n          searchQuery,\n          {\n            location: location as string,\n            type: type as string,\n            category: category as string,\n            salary: salary as string,\n            jobTypes: jobTypeArray,\n          },\n          {\n            limit: pageSize,\n            offset: offset,\n          }\n        );\n      } else {\n        // Get all jobs with pagination\n        const allJobs = await storage.getAllJobs();\n        totalCount = allJobs.length;\n\n        // Apply pagination to all jobs\n        jobs = allJobs.slice(offset, offset + pageSize);\n      }\n\n      // Check if user is authenticated and is a job seeker\n      const sessionToken = req.cookies?.session;\n      let userId: number | null = null;\n      if (sessionToken) {\n        try {\n          const userObject = await validateSession(sessionToken);\n          if (userObject) {\n            userId = userObject.id;\n          }\n        } catch (error) {\n          // Session invalid, continue without user context\n        }\n      }\n\n      // If authenticated job seeker with complete profile, add match scores and sort\n      if (userId) {\n        const user = await storage.getUserById(userId);\n        if (user && user.role === 'jobseeker') {\n          const hasCompleteProfile = user.skills && user.desiredRoles && user.experienceLevel && user.preferredLocation;\n\n          if (hasCompleteProfile) {\n            // Calculate match scores for all jobs\n            const jobsWithScores = await Promise.all(\n              jobs.map(async (job) => {\n                const scores = await storage.calculateJobMatch(userId, job.id);\n                return {\n                  ...job,\n                  matchScore: scores.matchScore,\n                  skillMatch: scores.skillMatch,\n                  locationMatch: scores.locationMatch,\n                  roleMatch: scores.roleMatch\n                };\n              })\n            );\n\n            // Sort by match score (highest first), then by date for 0% matches\n            jobs = jobsWithScores.sort((a, b) => {\n              if (b.matchScore !== a.matchScore) {\n                return b.matchScore - a.matchScore;\n              }\n              // For equal match scores (including 0), sort by newest first\n              return new Date(b.postedAt).getTime() - new Date(a.postedAt).getTime();\n            });\n          }\n        }\n      }\n\n      // Disable caching for authenticated users to ensure match scores are always fresh\n      if (userId) {\n        res.setHeader('Cache-Control', 'no-cache, no-store, must-revalidate');\n        res.setHeader('Pragma', 'no-cache');\n        res.setHeader('Expires', '0');\n      }\n\n      res.json({\n        jobs,\n        pagination: {\n          currentPage,\n          pageSize,\n          totalCount,\n          totalPages: Math.ceil(totalCount / pageSize),\n          hasNext: currentPage < Math.ceil(totalCount / pageSize),\n          hasPrevious: currentPage > 1,\n        },\n      });\n    } catch (error) {\n      console.error(\"Error fetching jobs:\", error);\n      res.status(500).json({ message: \"Failed to fetch jobs\" });\n    }\n  });\n\n  // Get a specific job\n  app.get(\"/api/jobs/:id\", async (req, res) => {\n    try {\n      const jobId = parseInt(req.params.id);\n      const job = await storage.getJob(jobId);\n\n      if (!job) {\n        return res.status(404).json({ message: \"Job not found\" });\n      }\n\n      res.json(job);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch job\" });\n    }\n  });\n\n  // Create a new job (employers and admins only)\n  app.post(\n    \"/api/jobs\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const validatedData = insertJobSchema.parse(req.body);\n\n        // Set the employerId to the current user if not provided (for admins)\n        if (!validatedData.employerId) {\n          validatedData.employerId = req.user!;\n        }\n\n        const job = await storage.createJob(validatedData);\n        res.status(201).json(job);\n      } catch (error) {\n        if (error instanceof z.ZodError) {\n          return res.status(400).json({\n            message: \"Invalid job data\",\n            errors: error.errors,\n          });\n        }\n        console.error(\"Create job error:\", error);\n        res.status(500).json({ message: \"Failed to create job\" });\n      }\n    }\n  );\n\n  // Apply for a job\n  app.post(\"/api/jobs/:id/apply\", async (req, res) => {\n    try {\n      const jobId = parseInt(req.params.id);\n      const job = await storage.getJob(jobId);\n\n      if (!job) {\n        return res.status(404).json({ message: \"Job not found\" });\n      }\n\n      const applicationData = {\n        ...req.body,\n        jobId: jobId,\n      };\n\n      const validatedData = insertApplicationSchema.parse(applicationData);\n      const application = await storage.createApplication(validatedData);\n\n      // Send SMS confirmation to applicant\n      try {\n        const smsSuccess = await sendApplicationConfirmationSMS(\n          validatedData.phone,\n          `${validatedData.firstName} ${validatedData.lastName}`,\n          job.title,\n          job.company\n        );\n\n        if (smsSuccess) {\n          // Update application to mark SMS as sent\n          await storage.updateApplication(application.id, {\n            smsNotificationSent: true,\n          });\n        }\n\n        // Send notification to employer if phone number is available\n        let employerPhone = job.phone;\n\n        // If job doesn't have phone, try to get employer's registered phone\n        if (!employerPhone && job.employerId) {\n          const employer = await storage.getUserById(job.employerId);\n          employerPhone = employer?.phone || null;\n        }\n\n        if (employerPhone) {\n          await sendEmployerNotificationSMS(\n            employerPhone,\n            `${validatedData.firstName} ${validatedData.lastName}`,\n            job.title\n          );\n        }\n      } catch (smsError) {\n        console.error(\"SMS notification error:\", smsError);\n        // Don't fail the application submission if SMS fails\n      }\n\n      res.status(201).json(application);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          message: \"Invalid application data\",\n          errors: error.errors,\n        });\n      }\n      res.status(500).json({ message: \"Failed to submit application\" });\n    }\n  });\n\n  // Get applications for a job\n  app.get(\"/api/jobs/:id/applications\", async (req, res) => {\n    try {\n      const jobId = parseInt(req.params.id);\n      const applications = await storage.getApplicationsForJob(jobId);\n      res.json(applications);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch applications\" });\n    }\n  });\n\n  // Get enhanced stats for dashboard\n  app.get(\"/api/stats\", async (req, res) => {\n    try {\n      const stats = await storage.getJobStats();\n\n      // Convert to expected format with real data\n      const formattedStats = {\n        activeJobs: stats.activeJobs,\n        employers: stats.totalEmployers,\n        hiredThisMonth: stats.applicationsToday, // Use real daily applications as proxy\n        jobSeekers: stats.totalJobSeekers, // Use real job seeker count\n        totalJobs: stats.totalJobs,\n        totalApplications: stats.totalApplications,\n        categoriesWithCounts: stats.categoriesWithCounts,\n        recentJobs: stats.recentJobs.slice(0, 3), // Only show 3 recent jobs\n      };\n\n      res.json(formattedStats);\n    } catch (error) {\n      console.error(\"Error fetching stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch stats\" });\n    }\n  });\n\n  // Increment job view count\n  app.post(\"/api/jobs/:id/view\", async (req, res) => {\n    try {\n      const jobId = parseInt(req.params.id);\n      await storage.incrementJobViews(jobId);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Error incrementing job views:\", error);\n      res.status(500).json({ message: \"Failed to update view count\" });\n    }\n  });\n\n  // Get featured jobs\n  app.get(\"/api/jobs/featured\", async (req, res) => {\n    try {\n      const featuredJobs = await storage.getFeaturedJobs();\n      res.json(featuredJobs);\n    } catch (error) {\n      console.error(\"Error fetching featured jobs:\", error);\n      res.status(500).json({ message: \"Failed to fetch featured jobs\" });\n    }\n  });\n\n  // Seed database (admin only)\n  app.post(\"/api/admin/seed-database\", requireAdmin, async (req, res) => {\n    try {\n      const { seedDatabase } = await import(\"./seed\");\n      const result = await seedDatabase();\n      res.json(result);\n    } catch (error) {\n      console.error(\"Error seeding database:\", error);\n      res.status(500).json({ message: \"Failed to seed database\" });\n    }\n  });\n\n  // Get activity trends (admin only)\n  app.get(\"/api/admin/activity-trends\", requireAdmin, async (req, res) => {\n    try {\n      const activityData = await storage.getActivityTrends();\n      res.json(activityData);\n    } catch (error) {\n      console.error(\"Error fetching activity trends:\", error);\n      res.status(500).json({ message: \"Failed to fetch activity trends\" });\n    }\n  });\n\n  // File upload for resumes with validation\n  app.post(\"/api/upload/resume\", async (req, res) => {\n    try {\n      // Handle JSON with base64 data\n      const resumeData = req.body;\n\n      if (!resumeData || typeof resumeData.content !== \"string\") {\n        return res\n          .status(400)\n          .json({ message: \"Invalid resume data - content field required\" });\n      }\n\n      // Validate file type from base64 header\n      const allowedTypes = [\n        \"data:application/pdf\",\n        \"data:application/msword\",\n        \"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n        \"data:text/plain\",\n      ];\n      const hasValidType = allowedTypes.some((type) =>\n        resumeData.content.startsWith(type)\n      );\n\n      if (!hasValidType) {\n        return res.status(400).json({\n          message:\n            \"Invalid file type. Only PDF, Word documents, and text files are allowed.\",\n        });\n      }\n\n      // Check file size (approximate from base64)\n      const base64Data = resumeData.content.split(\",\")[1] || resumeData.content;\n      const sizeInBytes = (base64Data.length * 3) / 4;\n      const maxSize = 5 * 1024 * 1024; // 5MB\n\n      if (sizeInBytes > maxSize) {\n        return res\n          .status(400)\n          .json({ message: \"File too large. Maximum size is 5MB.\" });\n      }\n\n      // Store the complete base64 data URL for later download\n      const uniqueId = `resume_${Date.now()}_${Math.random()\n        .toString(36)\n        .substr(2, 9)}`;\n\n      res.json({\n        success: true,\n        filePath: resumeData.content, // Store the complete base64 data URL\n        fileId: uniqueId,\n        message: \"Resume uploaded successfully\",\n      });\n    } catch (error) {\n      console.error(\"Error uploading resume:\", error);\n      res.status(500).json({ message: \"Failed to upload resume\" });\n    }\n  });\n\n  // File upload for cover letters with validation\n  app.post(\"/api/upload/cover-letter\", async (req, res) => {\n    try {\n      // Handle JSON with base64 data\n      const coverLetterData = req.body;\n\n      if (!coverLetterData || typeof coverLetterData.content !== \"string\") {\n        return res\n          .status(400)\n          .json({ message: \"Invalid cover letter data - content field required\" });\n      }\n\n      // Validate file type from base64 header\n      const allowedTypes = [\n        \"data:application/pdf\",\n        \"data:application/msword\",\n        \"data:application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n        \"data:text/plain\",\n      ];\n      const hasValidType = allowedTypes.some((type) =>\n        coverLetterData.content.startsWith(type)\n      );\n\n      if (!hasValidType) {\n        return res.status(400).json({\n          message:\n            \"Invalid file type. Only PDF, Word documents, and text files are allowed.\",\n        });\n      }\n\n      // Check file size (approximate from base64)\n      const base64Data = coverLetterData.content.split(\",\")[1] || coverLetterData.content;\n      const sizeInBytes = (base64Data.length * 3) / 4;\n      const maxSize = 2 * 1024 * 1024; // 2MB\n\n      if (sizeInBytes > maxSize) {\n        return res\n          .status(400)\n          .json({ message: \"File too large. Maximum size is 2MB.\" });\n      }\n\n      // Store the complete base64 data URL for later download\n      const uniqueId = `cover_letter_${Date.now()}_${Math.random()\n        .toString(36)\n        .substr(2, 9)}`;\n\n      res.json({\n        success: true,\n        filePath: coverLetterData.content, // Store the complete base64 data URL\n        fileId: uniqueId,\n        message: \"Cover letter uploaded successfully\",\n      });\n    } catch (error) {\n      console.error(\"Error uploading cover letter:\", error);\n      res.status(500).json({ message: \"Failed to upload cover letter\" });\n    }\n  });\n\n  // Download resume endpoint\n  app.get(\"/api/download/resume/:applicationId\", async (req, res) => {\n    try {\n      const applicationId = parseInt(req.params.applicationId);\n      const application = await storage.getApplicationById(applicationId);\n\n      if (!application || !application.resume) {\n        return res.status(404).json({ message: \"Resume not found\" });\n      }\n\n      // Check if resume is a base64 data URL\n      if (application.resume.startsWith(\"data:\")) {\n        const mimeMatch = application.resume.match(/data:([^;]+);base64,(.+)/);\n        if (mimeMatch) {\n          const mimeType = mimeMatch[1];\n          const base64Data = mimeMatch[2];\n          const buffer = Buffer.from(base64Data, \"base64\");\n\n          // Set appropriate headers\n          let extension = \".pdf\";\n          if (mimeType === \"application/msword\") {\n            extension = \".doc\";\n          } else if (\n            mimeType ===\n            \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n          ) {\n            extension = \".docx\";\n          } else if (mimeType === \"text/plain\") {\n            extension = \".txt\";\n          }\n\n          const fileName = `${application.firstName}_${application.lastName}_resume${extension}`;\n\n          res.setHeader(\"Content-Type\", mimeType);\n          res.setHeader(\n            \"Content-Disposition\",\n            `attachment; filename=\"${fileName}\"`\n          );\n          res.setHeader(\"Content-Length\", buffer.length);\n\n          return res.send(buffer);\n        }\n      }\n\n      // Fallback for old text-based resume storage\n      res.setHeader(\"Content-Type\", \"text/plain\");\n      res.setHeader(\n        \"Content-Disposition\",\n        `attachment; filename=\"${application.firstName}_${application.lastName}_resume.txt\"`\n      );\n      res.send(application.resume);\n    } catch (error) {\n      console.error(\"Error downloading resume:\", error);\n      res.status(500).json({ message: \"Failed to download resume\" });\n    }\n  });\n\n  // Download cover letter endpoint\n  app.get(\"/api/download/cover-letter/:applicationId\", async (req, res) => {\n    try {\n      const applicationId = parseInt(req.params.applicationId);\n      const application = await storage.getApplicationById(applicationId);\n\n      if (!application || !application.coverLetter) {\n        return res.status(404).json({ message: \"Cover letter not found\" });\n      }\n\n      // Check if cover letter is a base64 data URL (file upload)\n      if (application.coverLetter.startsWith(\"data:\")) {\n        const mimeMatch = application.coverLetter.match(/data:([^;]+);base64,(.+)/);\n        if (mimeMatch) {\n          const mimeType = mimeMatch[1];\n          const base64Data = mimeMatch[2];\n          const buffer = Buffer.from(base64Data, \"base64\");\n\n          // Set appropriate headers\n          let extension = \".pdf\";\n          if (mimeType === \"application/msword\") {\n            extension = \".doc\";\n          } else if (\n            mimeType ===\n            \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n          ) {\n            extension = \".docx\";\n          } else if (mimeType === \"text/plain\") {\n            extension = \".txt\";\n          }\n\n          const fileName = `${application.firstName}_${application.lastName}_cover_letter${extension}`;\n\n          res.setHeader(\"Content-Type\", mimeType);\n          res.setHeader(\n            \"Content-Disposition\",\n            `attachment; filename=\"${fileName}\"`\n          );\n          res.setHeader(\"Content-Length\", buffer.length);\n\n          return res.send(buffer);\n        }\n      }\n\n      // Fallback for text-based cover letter storage\n      res.setHeader(\"Content-Type\", \"text/plain\");\n      res.setHeader(\n        \"Content-Disposition\",\n        `attachment; filename=\"${application.firstName}_${application.lastName}_cover_letter.txt\"`\n      );\n      res.send(application.coverLetter);\n    } catch (error) {\n      console.error(\"Error downloading cover letter:\", error);\n      res.status(500).json({ message: \"Failed to download cover letter\" });\n    }\n  });\n\n  // Get job seeker applications - properly filtered by authenticated user\n  app.get(\n    \"/api/jobseeker/applications\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role !== \"jobseeker\") {\n          return res\n            .status(403)\n            .json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        const applications = await storage.getApplicationsByApplicant(\n          user.email\n        );\n        res.json(applications);\n      } catch (error) {\n        console.error(\"Error fetching job seeker applications:\", error);\n        res.status(500).json({ message: \"Failed to fetch applications\" });\n      }\n    }\n  );\n\n  // Update application status (for employers)\n  app.patch(\"/api/applications/:id\", async (req, res) => {\n    try {\n      const applicationId = parseInt(req.params.id);\n      const { status, notes } = req.body;\n\n      // Get the current application to access applicant and job details\n      const currentApplication = await storage.getApplicationById(\n        applicationId\n      );\n      if (!currentApplication) {\n        return res.status(404).json({ message: \"Application not found\" });\n      }\n\n      // Get job details for the notification\n      const job = await storage.getJob(currentApplication.jobId);\n      if (!job) {\n        return res.status(404).json({ message: \"Job not found\" });\n      }\n\n      const updatedApplication = await storage.updateApplication(\n        applicationId,\n        {\n          status,\n          notes,\n          updatedAt: new Date(),\n        }\n      );\n\n      // Send SMS notification to job seeker about status change\n      if (updatedApplication && currentApplication.phone) {\n        try {\n          await sendApplicationStatusUpdateSMS(\n            currentApplication.phone,\n            `${currentApplication.firstName} ${currentApplication.lastName}`,\n            job.title,\n            job.company,\n            status\n          );\n        } catch (smsError) {\n          console.error(\"SMS notification error:\", smsError);\n          // Don't fail the status update if SMS fails\n        }\n      }\n\n      res.json(updatedApplication);\n    } catch (error) {\n      console.error(\"Error updating application:\", error);\n      res.status(500).json({ message: \"Failed to update application\" });\n    }\n  });\n\n  // Update job posting (for employers)\n  app.patch(\n    \"/api/jobs/:id\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const jobId = parseInt(req.params.id);\n        const jobData = req.body;\n\n        // Verify the job belongs to the current employer\n        const existingJob = await storage.getJob(jobId);\n        if (!existingJob) {\n          return res.status(404).json({ message: \"Job not found\" });\n        }\n\n        const user = await storage.getUserById(req.user!);\n        if (existingJob.employerId !== req.user! && user?.role !== \"admin\") {\n          return res\n            .status(403)\n            .json({ message: \"Not authorized to update this job\" });\n        }\n\n        const updatedJob = await storage.updateJob(jobId, {\n          ...jobData,\n          updatedAt: new Date(),\n        });\n\n        res.json(updatedJob);\n      } catch (error) {\n        console.error(\"Error updating job:\", error);\n        res.status(500).json({ message: \"Failed to update job\" });\n      }\n    }\n  );\n\n  // Delete a job posting (for employers)\n  app.delete(\n    \"/api/jobs/:id\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const jobId = parseInt(req.params.id);\n\n        // Verify the job belongs to the current employer\n        const existingJob = await storage.getJob(jobId);\n        if (!existingJob) {\n          return res.status(404).json({ message: \"Job not found\" });\n        }\n\n        const user = await storage.getUserById(req.user!);\n        if (existingJob.employerId !== req.user! && user?.role !== \"admin\") {\n          return res\n            .status(403)\n            .json({ message: \"Not authorized to delete this job\" });\n        }\n\n        const success = await storage.deleteJob(jobId);\n        if (!success) {\n          return res.status(500).json({ message: \"Failed to delete job\" });\n        }\n\n        res.json({ message: \"Job deleted successfully\" });\n      } catch (error) {\n        console.error(\"Error deleting job:\", error);\n        res.status(500).json({ message: \"Failed to delete job\" });\n      }\n    }\n  );\n\n  // Job Matching Routes\n  app.post(\n    \"/api/jobseeker/match-feedback\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const { jobId, feedback } = req.body;\n\n        if (!jobId || !feedback || !['thumbs_up', 'thumbs_down'].includes(feedback)) {\n          return res.status(400).json({ message: \"Invalid request\" });\n        }\n\n        await storage.updateMatchFeedback(req.user!, jobId, feedback);\n        res.json({ message: \"Feedback recorded\" });\n      } catch (error) {\n        console.error(\"Error recording feedback:\", error);\n        res.status(500).json({ message: \"Failed to record feedback\" });\n      }\n    }\n  );\n\n  // Get job recommendations for job seekers\n  app.get(\n    \"/api/jobseeker/recommendations\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role !== \"jobseeker\") {\n          return res.status(403).json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        console.log(\"Fetching recommendations for user:\", user.id, user.email);\n        console.log(\"User profile:\", {\n          skills: user.skills,\n          desiredRoles: user.desiredRoles,\n          experienceLevel: user.experienceLevel,\n          preferredLocation: user.preferredLocation\n        });\n\n        // Check if user has required profile data\n        if (!user.skills || !user.desiredRoles || !user.experienceLevel || !user.preferredLocation) {\n          console.log(\"User profile incomplete, returning empty recommendations\");\n          return res.json([]);\n        }\n\n        const recommendations = await storage.getJobRecommendations(user.id);\n        console.log(`Returning ${recommendations.length} recommendations`);\n        res.json(recommendations);\n      } catch (error) {\n        console.error(\"Error fetching job recommendations:\", error);\n        res.status(500).json({ message: \"Failed to fetch recommendations\" });\n      }\n    }\n  );\n\n  // Employer scouting - find job seekers by skills\n  app.post(\n    \"/api/employer/scout-candidates\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const { skills, experienceLevel, location } = req.body;\n\n        if (!skills || !Array.isArray(skills) || skills.length === 0) {\n          return res.status(400).json({ message: \"At least one skill is required\" });\n        }\n\n        const candidates = await storage.scoutCandidates({\n          skills,\n          experienceLevel,\n          location,\n        });\n\n        res.json(candidates);\n      } catch (error) {\n        console.error(\"Error scouting candidates:\", error);\n        res.status(500).json({ message: \"Failed to scout candidates\" });\n      }\n    }\n  );\n\n  // Employer-specific routes\n  app.get(\n    \"/api/employer/jobs\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const employerJobs = await storage.getJobsByEmployer(req.user!);\n        res.json(employerJobs);\n      } catch (error) {\n        console.error(\"Error fetching employer jobs:\", error);\n        res.status(500).json({ message: \"Failed to fetch employer jobs\" });\n      }\n    }\n  );\n\n  app.get(\n    \"/api/employer/applications\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const applications = await storage.getApplicationsByEmployer(req.user!);\n        res.json(applications);\n      } catch (error) {\n        console.error(\"Error fetching employer applications:\", error);\n        res.status(500).json({ message: \"Failed to fetch applications\" });\n      }\n    }\n  );\n\n  // Get jobs by category\n  app.get(\"/api/jobs/category/:category\", async (req, res) => {\n    try {\n      const category = req.params.category;\n      const jobs = await storage.getJobsByCategory(category);\n      res.json(jobs);\n    } catch (error) {\n      console.error(\"Error fetching jobs by category:\", error);\n      res.status(500).json({ message: \"Failed to fetch jobs by category\" });\n    }\n  });\n\n  // Categories routes\n  app.get(\"/api/categories\", async (req, res) => {\n    try {\n      const categories = await storage.getAllCategories();\n      res.json(categories);\n    } catch (error) {\n      console.error(\"Error fetching categories:\", error);\n      res.status(500).json({ message: \"Failed to fetch categories\" });\n    }\n  });\n\n  // Admin routes (requires admin role)\n  app.get(\n    \"/api/admin/stats\",\n    requireAdmin,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const stats = await storage.getAdminStats();\n        res.json(stats);\n      } catch (error) {\n        console.error(\"Error fetching admin stats:\", error);\n        res.status(500).json({ message: \"Failed to fetch admin stats\" });\n      }\n    }\n  );\n\n  app.get(\n    \"/api/admin/export-analytics\",\n    requireAdmin,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        console.log(\"Starting analytics export...\");\n        \n        // Fetch all analytics data with error handling\n        const stats = await storage.getAdminStats();\n        const categoryStats = await storage.getCategoryStats();\n        const jobTypeStats = await storage.getJobTypeStats();\n        const trends = await storage.getTrends();\n        const users = await storage.getAllUsers();\n        const jobs = await storage.getAllJobs({ includeInactive: true });\n        const applications = await storage.getAllApplicationsAdmin();\n\n        console.log(\"Data fetched successfully\");\n\n        // Create workbook\n        const workbook = XLSX.utils.book_new();\n\n        // Overview sheet\n        const overviewData = [\n          ['Metric', 'Value'],\n          ['Total Users', stats?.totalUsers || 0],\n          ['Total Employers', stats?.totalEmployers || 0],\n          ['Total Job Seekers', stats?.totalJobSeekers || 0],\n          ['Total Jobs', stats?.totalJobs || 0],\n          ['Active Jobs', stats?.activeJobs || 0],\n          ['Featured Jobs', stats?.featuredJobs || 0],\n          ['Total Applications', stats?.totalApplications || 0],\n          ['Pending Applications', stats?.pendingApplications || 0],\n          ['Applications Today', stats?.applicationsToday || 0],\n          ['Jobs Posted Today', stats?.jobsPostedToday || 0],\n          ['Users Registered Today', stats?.usersRegisteredToday || 0],\n          ['Job Views Today', stats?.jobViewsToday || 0],\n        ];\n        const overviewSheet = XLSX.utils.aoa_to_sheet(overviewData);\n        XLSX.utils.book_append_sheet(workbook, overviewSheet, 'Overview');\n\n        // Category stats sheet\n        const categoryData = [\n          ['Category', 'Job Count', 'Application Count', 'Avg Salary'],\n          ...(categoryStats || []).map(c => [c.category, c.jobCount, c.applicationCount, c.avgSalary])\n        ];\n        const categorySheet = XLSX.utils.aoa_to_sheet(categoryData);\n        XLSX.utils.book_append_sheet(workbook, categorySheet, 'Category Stats');\n\n        // Job type stats sheet\n        const jobTypeData = [\n          ['Type', 'Count', 'Percentage'],\n          ...(jobTypeStats || []).map(t => [t.type, t.count, `${t.percentage}%`])\n        ];\n        const jobTypeSheet = XLSX.utils.aoa_to_sheet(jobTypeData);\n        XLSX.utils.book_append_sheet(workbook, jobTypeSheet, 'Job Type Stats');\n\n        // Trends sheet\n        const trendsData = [\n          ['Date', 'Applications', 'Jobs', 'Users'],\n          ...(trends || []).filter(t => t.date !== 'No Data').map(t => [t.date, t.applications, t.jobs, t.users || 0])\n        ];\n        const trendsSheet = XLSX.utils.aoa_to_sheet(trendsData);\n        XLSX.utils.book_append_sheet(workbook, trendsSheet, 'Trends');\n\n        // Detailed Users sheet with all fields\n        const detailedUsersData = [\n          ['ID', 'First Name', 'Last Name', 'Email', 'Phone', 'Role', 'Address', 'Skills', 'Desired Roles', 'Experience Level', 'Preferred Location', 'Verification Status', 'Status', 'Created Date', 'Updated Date'],\n          ...(users || []).map(u => [\n            u.id,\n            u.firstName || 'N/A',\n            u.lastName || 'N/A',\n            u.email,\n            u.phone || 'N/A',\n            u.role,\n            u.address || 'N/A',\n            u.skills || 'N/A',\n            u.desiredRoles || 'N/A',\n            u.experienceLevel || 'N/A',\n            u.preferredLocation || 'N/A',\n            u.verificationStatus || 'N/A',\n            u.isActive ? 'Active' : 'Inactive',\n            new Date(u.createdAt).toLocaleString(),\n            new Date(u.updatedAt).toLocaleString()\n          ])\n        ];\n        const detailedUsersSheet = XLSX.utils.aoa_to_sheet(detailedUsersData);\n        XLSX.utils.book_append_sheet(workbook, detailedUsersSheet, 'Detailed Users');\n\n        // Detailed Jobs sheet with all fields\n        const detailedJobsData = [\n          ['ID', 'Title', 'Company', 'Category', 'Type', 'Location', 'Salary', 'Description', 'Requirements', 'Required Skills', 'Benefits', 'Email', 'Phone', 'Employer ID', 'Applications', 'Views', 'Featured', 'Status', 'Posted Date', 'Updated Date', 'Expires At'],\n          ...(jobs || []).map(j => [\n            j.id,\n            j.title,\n            j.company,\n            j.category,\n            j.type,\n            j.location,\n            j.salary,\n            (j.description || '').substring(0, 200) + '...',\n            (j.requirements || '').substring(0, 200) + '...',\n            j.requiredSkills || 'N/A',\n            (j.benefits || '').substring(0, 200) + '...',\n            j.email || 'N/A',\n            j.phone || 'N/A',\n            j.employerId,\n            j.applicantCount || 0,\n            j.viewCount || 0,\n            j.isFeatured ? 'Yes' : 'No',\n            j.isActive ? 'Active' : 'Inactive',\n            new Date(j.postedAt).toLocaleString(),\n            new Date(j.updatedAt).toLocaleString(),\n            j.expiresAt ? new Date(j.expiresAt).toLocaleString() : 'N/A'\n          ])\n        ];\n        const detailedJobsSheet = XLSX.utils.aoa_to_sheet(detailedJobsData);\n        XLSX.utils.book_append_sheet(workbook, detailedJobsSheet, 'Detailed Jobs');\n\n        // Detailed Applications sheet with all fields\n        const detailedApplicationsData = [\n          ['ID', 'Job ID', 'Job Title', 'Applicant ID', 'First Name', 'Last Name', 'Email', 'Phone', 'Address', 'Status', 'Notes', 'SMS Sent', 'Applied Date', 'Updated Date'],\n          ...(applications || []).map(a => [\n            a.id,\n            a.jobId,\n            a.jobTitle || 'N/A',\n            a.applicantId || 'N/A',\n            a.firstName,\n            a.lastName,\n            a.email,\n            a.phone,\n            a.address || 'N/A',\n            a.status,\n            a.notes || 'N/A',\n            a.smsNotificationSent ? 'Yes' : 'No',\n            new Date(a.appliedAt).toLocaleString(),\n            new Date(a.updatedAt).toLocaleString()\n          ])\n        ];\n        const detailedApplicationsSheet = XLSX.utils.aoa_to_sheet(detailedApplicationsData);\n        XLSX.utils.book_append_sheet(workbook, detailedApplicationsSheet, 'Detailed Applications');\n\n        // Job Seekers Only sheet\n        const jobSeekers = users.filter(u => u.role === 'jobseeker');\n        const jobSeekersData = [\n          ['ID', 'Name', 'Email', 'Phone', 'Address', 'Skills', 'Desired Roles', 'Experience', 'Location Preference', 'Status', 'Registered'],\n          ...jobSeekers.map(u => [\n            u.id,\n            `${u.firstName || ''} ${u.lastName || ''}`.trim(),\n            u.email,\n            u.phone || 'N/A',\n            u.address || 'N/A',\n            u.skills || 'N/A',\n            u.desiredRoles || 'N/A',\n            u.experienceLevel || 'N/A',\n            u.preferredLocation || 'N/A',\n            u.isActive ? 'Active' : 'Inactive',\n            new Date(u.createdAt).toLocaleDateString()\n          ])\n        ];\n        const jobSeekersSheet = XLSX.utils.aoa_to_sheet(jobSeekersData);\n        XLSX.utils.book_append_sheet(workbook, jobSeekersSheet, 'Job Seekers');\n\n        // Employers Only sheet\n        const employers = users.filter(u => u.role === 'employer');\n        const employersData = [\n          ['ID', 'Name', 'Email', 'Phone', 'Verification Status', 'Jobs Posted', 'Status', 'Registered'],\n          ...employers.map(u => {\n            const employerJobs = jobs.filter(j => j.employerId === u.id);\n            return [\n              u.id,\n              `${u.firstName || ''} ${u.lastName || ''}`.trim() || 'N/A',\n              u.email,\n              u.phone || 'N/A',\n              u.verificationStatus || 'N/A',\n              employerJobs.length,\n              u.isActive ? 'Active' : 'Inactive',\n              new Date(u.createdAt).toLocaleDateString()\n            ];\n          })\n        ];\n        const employersSheet = XLSX.utils.aoa_to_sheet(employersData);\n        XLSX.utils.book_append_sheet(workbook, employersSheet, 'Employers');\n\n        // Application Status Summary\n        const statusCounts = applications.reduce((acc, app) => {\n          acc[app.status] = (acc[app.status] || 0) + 1;\n          return acc;\n        }, {} as Record<string, number>);\n        const statusData = [\n          ['Status', 'Count'],\n          ...Object.entries(statusCounts).map(([status, count]) => [status, count])\n        ];\n        const statusSheet = XLSX.utils.aoa_to_sheet(statusData);\n        XLSX.utils.book_append_sheet(workbook, statusSheet, 'Application Status');\n\n        // Active Jobs by Employer\n        const activeJobsByEmployer = jobs\n          .filter(j => j.isActive)\n          .reduce((acc, job) => {\n            const employer = users.find(u => u.id === job.employerId);\n            const employerName = employer ? `${employer.firstName || ''} ${employer.lastName || ''}`.trim() || employer.email : 'Unknown';\n            if (!acc[employerName]) {\n              acc[employerName] = { count: 0, applications: 0, views: 0 };\n            }\n            acc[employerName].count++;\n            acc[employerName].applications += job.applicantCount || 0;\n            acc[employerName].views += job.viewCount || 0;\n            return acc;\n          }, {} as Record<string, { count: number; applications: number; views: number }>);\n        \n        const employerJobsData = [\n          ['Employer', 'Active Jobs', 'Total Applications', 'Total Views'],\n          ...Object.entries(activeJobsByEmployer).map(([employer, data]) => [\n            employer,\n            data.count,\n            data.applications,\n            data.views\n          ])\n        ];\n        const employerJobsSheet = XLSX.utils.aoa_to_sheet(employerJobsData);\n        XLSX.utils.book_append_sheet(workbook, employerJobsSheet, 'Jobs by Employer');\n\n        console.log(\"Generating Excel file...\");\n        \n        // Generate buffer\n        const excelBuffer = XLSX.write(workbook, { type: 'buffer', bookType: 'xlsx' });\n\n        console.log(\"Excel file generated successfully\");\n\n        // Set headers for download\n        res.setHeader('Content-Type', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n        res.setHeader('Content-Disposition', `attachment; filename=pili-jobs-analytics-${new Date().toISOString().split('T')[0]}.xlsx`);\n\n        res.send(excelBuffer);\n      } catch (error) {\n        console.error(\"Error exporting analytics:\", error);\n        res.status(500).json({ message: \"Failed to export analytics\", error: error instanceof Error ? error.message : 'Unknown error' });\n      }\n    }\n  );\n\n  app.get(\"/api/admin/category-stats\", requireAdmin, async (req, res) => {\n    try {\n      const stats = await storage.getCategoryStats();\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Error fetching category stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch category stats\" });\n    }\n  });\n\n  app.get(\"/api/admin/job-type-stats\", requireAdmin, async (req, res) => {\n    try {\n      const stats = await storage.getJobTypeStats();\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Error fetching job type stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch job type stats\" });\n    }\n  });\n\n  app.get(\"/api/admin/trends\", requireAdmin, async (req, res) => {\n    try {\n      const trends = await storage.getTrends();\n      res.json(trends);\n    } catch (error) {\n      console.error(\"Error fetching trends:\", error);\n      res.status(500).json({ message: \"Failed to fetch trends\" });\n    }\n  });\n\n  app.get(\"/api/admin/recent-activity\", requireAdmin, async (req, res) => {\n    try {\n      const activity = await storage.getRecentActivity();\n      res.json(activity);\n    } catch (error) {\n      console.error(\"Error fetching recent activity:\", error);\n      res.status(500).json({ message: \"Failed to fetch recent activity\" });\n    }\n  });\n\n  // Database viewer endpoints\n  app.get(\"/api/admin/database/tables\", requireAdmin, async (req, res) => {\n    try {\n      const tables = await storage.getAllTablesData();\n      res.json(tables);\n    } catch (error) {\n      console.error(\"Error fetching all tables:\", error);\n      res.status(500).json({ message: \"Failed to fetch tables data\" });\n    }\n  });\n\n  app.get(\n    \"/api/admin/database/table/:tableName\",\n    requireAdmin,\n    async (req, res) => {\n      try {\n        const { tableName } = req.params;\n        const tableData = await storage.getTableData(tableName);\n        res.json(tableData);\n      } catch (error) {\n        console.error(\"Error fetching table data:\", error);\n        res.status(500).json({ message: \"Failed to fetch table data\" });\n      }\n    }\n  );\n\n  app.get(\"/api/admin/users\", requireAdmin, async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      res.json(users);\n    } catch (error) {\n      console.error(\"Error fetching users:\", error);\n      res.status(500).json({ message: \"Failed to fetch users\" });\n    }\n  });\n\n  app.get(\"/api/admin/jobs\", requireAdmin, async (req, res) => {\n    try {\n      const jobs = await storage.getAllJobs({ includeInactive: true });\n      res.json(jobs);\n    } catch (error) {\n      console.error(\"Error fetching all jobs:\", error);\n      res.status(500).json({ message: \"Failed to fetch jobs\" });\n    }\n  });\n\n  app.get(\"/api/admin/applications\", requireAdmin, async (req, res) => {\n    try {\n      const applications = await storage.getAllApplicationsAdmin();\n      res.json(applications);\n    } catch (error) {\n      console.error(\"Error fetching all applications:\", error);\n      res.status(500).json({ message: \"Failed to fetch applications\" });\n    }\n  });\n\n  app.post(\"/api/admin/clear-data\", requireAdmin, async (req, res) => {\n    try {\n      await storage.clearAllData();\n      res.json({ message: \"All data cleared successfully\" });\n    } catch (error) {\n      console.error(\"Error clearing data:\", error);\n      res.status(500).json({ message: \"Failed to clear data\" });\n    }\n  });\n\n  // Admin CRUD for Users\n  app.put(\"/api/admin/users/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const userData = req.body;\n      const updatedUser = await storage.updateUser(id, userData);\n      if (!updatedUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      const { passwordHash, ...userResponse } = updatedUser;\n      res.json(userResponse);\n    } catch (error) {\n      console.error(\"Update user error:\", error);\n      res.status(500).json({ message: \"Failed to update user\" });\n    }\n  });\n\n  app.delete(\"/api/admin/users/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const success = await storage.deleteUser(id);\n      if (!success) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      res.json({ message: \"User deleted successfully\" });\n    } catch (error) {\n      console.error(\"Delete user error:\", error);\n      res.status(500).json({ message: \"Failed to delete user\" });\n    }\n  });\n\n  // Admin CRUD for Jobs\n  app.put(\"/api/admin/jobs/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const jobData = req.body;\n      const updatedJob = await storage.updateJob(id, jobData);\n      if (!updatedJob) {\n        return res.status(404).json({ message: \"Job not found\" });\n      }\n      res.json(updatedJob);\n    } catch (error) {\n      console.error(\"Update job error:\", error);\n      res.status(500).json({ message: \"Failed to update job\" });\n    }\n  });\n\n  app.delete(\"/api/admin/jobs/:id\", requireAdmin, async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const success = await storage.deleteJob(id);\n      if (!success) {\n        return res.status(404).json({ message: \"Job not found\" });\n      }\n      res.json({ message: \"Job deleted successfully\" });\n    } catch (error) {\n      console.error(\"Delete job error:\", error);\n      res.status(500).json({ message: \"Failed to delete job\" });\n    }\n  });\n\n  // Employer verification submission\n  app.post(\n    \"/api/employer/verification\",\n    requireEmployer,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        // Handle both JSON and multipart form data\n        let barangayPermit, businessPermit;\n\n        if (req.headers[\"content-type\"]?.includes(\"multipart/form-data\")) {\n          // Handle multipart form data (files)\n          barangayPermit = req.body.barangayPermit;\n          businessPermit = req.body.businessPermit;\n        } else {\n          // Handle JSON with base64 data\n          barangayPermit = req.body.barangayPermit;\n          businessPermit = req.body.businessPermit;\n        }\n\n        if (!barangayPermit || !businessPermit) {\n          return res.status(400).json({ message: \"Both permits are required\" });\n        }\n\n        const updatedUser = await storage.updateUser(req.user!, {\n          barangayPermit,\n          businessPermit,\n          verificationStatus: \"pending\",\n          updatedAt: new Date(),\n        });\n\n        if (!updatedUser) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        res.json({ message: \"Verification documents submitted successfully\" });\n      } catch (error) {\n        console.error(\"Error submitting verification:\", error);\n        res.status(500).json({ message: \"Failed to submit verification\" });\n      }\n    }\n  );\n\n  // Admin verification management routes\n  app.get(\n    \"/api/admin/verification-requests\",\n    requireAdmin,\n    async (req, res) => {\n      try {\n        const pendingVerifications = await storage.getPendingVerifications();\n        res.json(pendingVerifications);\n      } catch (error) {\n        console.error(\"Error fetching verification requests:\", error);\n        res\n          .status(500)\n          .json({ message: \"Failed to fetch verification requests\" });\n      }\n    }\n  );\n\n  app.post(\n    \"/api/admin/verification/:userId/approve\",\n    requireAdmin,\n    async (req, res) => {\n      try {\n        const userId = parseInt(req.params.userId);\n        const updatedUser = await storage.updateUser(userId, {\n          verificationStatus: \"approved\",\n          updatedAt: new Date(),\n        });\n\n        if (!updatedUser) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        // Send SMS notification to employer\n        if (updatedUser.phone) {\n          const employerName = `${updatedUser.firstName || ''} ${updatedUser.lastName || ''}`.trim() || updatedUser.email;\n          await sendEmployerVerificationApprovalSMS(updatedUser.phone, employerName);\n          console.log(`Verification approval SMS sent to ${updatedUser.email} at ${updatedUser.phone}`);\n        } else {\n          console.log(`No phone number found for user ${updatedUser.email}, skipping SMS notification`);\n        }\n\n        res.json({ message: \"Employer verification approved\" });\n      } catch (error) {\n        console.error(\"Error approving verification:\", error);\n        res.status(500).json({ message: \"Failed to approve verification\" });\n      }\n    }\n  );\n\n  app.post(\n    \"/api/admin/verification/:userId/reject\",\n    requireAdmin,\n    async (req, res) => {\n      try {\n        const userId = parseInt(req.params.userId);\n        const { reason } = req.body;\n\n        const updatedUser = await storage.updateUser(userId, {\n          verificationStatus: \"rejected\",\n          updatedAt: new Date(),\n        });\n\n        if (!updatedUser) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        // Send SMS notification to employer\n        if (updatedUser.phone) {\n          const employerName = `${updatedUser.firstName || ''} ${updatedUser.lastName || ''}`.trim() || updatedUser.email;\n          await sendEmployerVerificationRejectionSMS(updatedUser.phone, employerName, reason);\n          console.log(`Verification rejection SMS sent to ${updatedUser.email} at ${updatedUser.phone}`);\n        } else {\n          console.log(`No phone number found for user ${updatedUser.email}, skipping SMS notification`);\n        }\n\n        res.json({ message: \"Employer verification rejected\" });\n      } catch (error) {\n        console.error(\"Error rejecting verification:\", error);\n        res.status(500).json({ message: \"Failed to reject verification\" });\n      }\n    }\n  );\n\n  app.get(\n    \"/api/admin/verification/:userId/documents\",\n    requireAdmin,\n    async (req, res) => {\n      try {\n        const userId = parseInt(req.params.userId);\n        const user = await storage.getUserById(userId);\n\n        if (!user) {\n          return res.status(404).json({ message: \"User not found\" });\n        }\n\n        res.json({\n          barangayPermit: user.barangayPermit,\n          businessPermit: user.businessPermit,\n        });\n      } catch (error) {\n        console.error(\"Error fetching verification documents:\", error);\n        res.status(500).json({ message: \"Failed to fetch documents\" });\n      }\n    }\n  );\n\n  // Saved jobs routes\n  app.get(\n    \"/api/jobseeker/saved-jobs\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role !== \"jobseeker\") {\n          return res\n            .status(403)\n            .json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        const savedJobs = await storage.getSavedJobs(user.id);\n        res.json(savedJobs);\n      } catch (error) {\n        console.error(\"Error fetching saved jobs:\", error);\n        res.status(500).json({ message: \"Failed to fetch saved jobs\" });\n      }\n    }\n  );\n\n  app.post(\n    \"/api/jobseeker/saved-jobs/:jobId\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role !== \"jobseeker\") {\n          return res\n            .status(403)\n            .json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        const jobId = parseInt(req.params.jobId);\n        const savedJob = await storage.saveJob(user.id, jobId);\n        res.json(savedJob);\n      } catch (error) {\n        console.error(\"Error saving job:\", error);\n        res.status(500).json({ message: \"Failed to save job\" });\n      }\n    }\n  );\n\n  app.delete(\n    \"/api/jobseeker/saved-jobs/:jobId\",\n    requireAuth,\n    async (req: AuthenticatedRequest, res) => {\n      try {\n        const user = await storage.getUserById(req.user!);\n        if (!user || user.role !== \"jobseeker\") {\n          return res\n            .status(403)\n            .json({ message: \"Access denied - job seeker role required\" });\n        }\n\n        const jobId = parseInt(req.params.jobId);\n        const success = await storage.unsaveJob(user.id, jobId);\n        res.json({ success });\n      } catch (error) {\n        console.error(\"Error removing saved job:\", error);\n        res.status(500).json({ message: \"Failed to remove saved job\" });\n      }\n    }\n  );\n\n  // Seed database route (development only)\n  app.post(\"/api/seed\", async (req, res) => {\n    try {\n      if (process.env.NODE_ENV === \"production\") {\n        return res\n          .status(403)\n          .json({ message: \"Seeding not allowed in production\" });\n      }\n\n      // Import and run seeder\n      const { seedDatabase } = await import(\"./seed\");\n      await seedDatabase();\n\n      res.json({ message: \"Database seeded successfully\" });\n    } catch (error) {\n      console.error(\"Error seeding database:\", error);\n      res.status(500).json({ message: \"Failed to seed database\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}","path":null,"size_bytes":60532,"size_tokens":null},"api/server/db.local.ts":{"content":"import { drizzle } from 'drizzle-orm/better-sqlite3';\nimport Database from 'better-sqlite3';\nimport * as schema from \"@shared/schema\";\n\n// Use SQLite for local development\nconst sqlite = new Database('pili_jobs.db');\nexport const db = drizzle(sqlite, { schema });\nexport const pool = null; // Not used for SQLite","path":null,"size_bytes":312,"size_tokens":null},"api/server/storage.ts":{"content":"import {\n  jobs,\n  applications,\n  employers,\n  categories,\n  savedJobs,\n  jobAlerts,\n  jobMatches,\n  users,\n  userSessions,\n  sessions,\n  type Job,\n  type InsertJob,\n  type UpdateJob,\n  type Application,\n  type InsertApplication,\n  type UpdateApplication,\n  type Employer,\n  type InsertEmployer,\n  type Category,\n  type InsertCategory,\n  type SavedJob,\n  type InsertSavedJob,\n  type JobAlert,\n  type InsertJobAlert,\n  type User,\n  type InsertUser,\n  type RegisterUser,\n  type UserSession,\n  type InsertUserSession,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport {\n  eq,\n  and,\n  or,\n  ilike,\n  desc,\n  asc,\n  sql,\n  count,\n  like,\n  inArray,\n  gte,\n  lt,\n  isNotNull,\n} from \"drizzle-orm\";\nimport { RunResult } from \"better-sqlite3\";\n\n// Ensure we're using PostgreSQL in production\nif (process.env.NODE_ENV === 'production' && !process.env.DATABASE_URL) {\n  throw new Error('DATABASE_URL is required in production');\n}\n\n// Extend RunResult to include rowCount\ninterface CustomRunResult extends RunResult {\n  rowCount?: number;\n}\n\nexport interface IStorage {\n  // Job methods\n  getAllJobs(options?: {\n    includeInactive?: boolean;\n    featuredFirst?: boolean;\n    limit?: number;\n    offset?: number;\n  }): Promise<Job[]>;\n  getJob(id: number): Promise<Job | undefined>;\n  createJob(job: InsertJob): Promise<Job>;\n  updateJob(id: number, job: UpdateJob): Promise<Job | undefined>;\n  deleteJob(id: number): Promise<boolean>;\n  incrementJobViews(id: number): Promise<void>;\n  searchJobs(\n    query: string,\n    filters?: {\n      location?: string;\n      type?: string;\n      category?: string;\n      salary?: string;\n      featuredOnly?: boolean;\n      jobTypes?: string[];\n    },\n    options?: {\n      limit?: number;\n      offset?: number;\n      sortBy?:\n        | \"newest\"\n        | \"oldest\"\n        | \"salary_high\"\n        | \"salary_low\"\n        | \"views\"\n        | \"applications\";\n    }\n  ): Promise<Job[]>;\n  getFeaturedJobs(): Promise<Job[]>;\n  getJobsByCategory(category: string): Promise<Job[]>;\n  getJobsByEmployer(employerId: number): Promise<Job[]>;\n  getApplicationsByEmployer(\n    employerId: number\n  ): Promise<Array<Application & { jobTitle: string }>>;\n\n  // Application methods\n  getApplicationsForJob(jobId: number): Promise<Application[]>;\n  getApplicationsByApplicant(email: string): Promise<\n    Array<\n      Application & {\n        job: {\n          title: string;\n          company: string;\n          location: string;\n          type: string;\n          salary: string;\n        };\n      }\n    >\n  >;\n  createApplication(application: InsertApplication): Promise<Application>;\n  updateApplication(\n    id: number,\n    application: UpdateApplication\n  ): Promise<Application | undefined>;\n  deleteApplication(id: number): Promise<boolean>;\n  getApplicationsByEmail(email: string): Promise<Application[]>;\n  getApplicationById(id: number): Promise<Application | undefined>;\n  getApplicationsByEmployer(employerId: number): Promise<Application[]>;\n\n  // Employer methods\n  createEmployer(employer: InsertEmployer): Promise<Employer>;\n  getEmployer(id: number): Promise<Employer | undefined>;\n  getEmployerByEmail(email: string): Promise<Employer | undefined>;\n  updateEmployer(\n    id: number,\n    employer: Partial<Employer>\n  ): Promise<Employer | undefined>;\n\n  // Category methods\n  getAllCategories(): Promise<Category[]>;\n  createCategory(category: InsertCategory): Promise<Category>;\n  updateCategoryJobCount(\n    categoryName: string,\n    increment: number\n  ): Promise<void>;\n\n  // User methods\n  createUser(user: InsertUser): Promise<User>;\n  getUserById(id: number): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  updateUser(id: number, user: Partial<User>): Promise<User | undefined>;\n  deleteUser(id: number): Promise<boolean>;\n\n  // Saved jobs methods\n  saveJob(userId: number, jobId: number): Promise<SavedJob>;\n  unsaveJob(userId: number, jobId: number): Promise<boolean>;\n  getSavedJobs(userId: number): Promise<Array<{ id: number; userId: number; jobId: number; savedAt: Date; job: Job }>>;\n  isJobSaved(userEmail: string, jobId: number): Promise<boolean>;\n\n  // Job alerts methods\n  createJobAlert(alert: InsertJobAlert): Promise<JobAlert>;\n  getUserJobAlerts(userId: number): Promise<JobAlert[]>;\n  updateJobAlert(\n    id: number,\n    alert: Partial<JobAlert>\n  ): Promise<JobAlert | undefined>;\n  deleteJobAlert(id: number): Promise<boolean>;\n\n  // Analytics methods\n  getJobStats(): Promise<{\n    totalJobs: number;\n    activeJobs: number;\n    totalApplications: number;\n    totalEmployers: number;\n    totalJobSeekers: number;\n    applicationsToday: number;\n    categoriesWithCounts: Array<{ category: string; count: number }>;\n    recentJobs: Job[];\n  }>;\n\n  // Verification methods\n  getPendingVerifications(): Promise<User[]>;\n\n  // Admin methods\n  getAdminStats(): Promise<{\n    totalUsers: number;\n    totalJobs: number;\n    totalApplications: number;\n    activeJobs: number;\n    pendingApplications: number;\n    featuredJobs: number;\n    totalEmployers: number;\n    totalJobSeekers: number;\n    applicationsToday: number;\n    jobsPostedToday: number;\n    usersRegisteredToday: number;\n    jobViewsToday: number;\n  }>;\n  getCategoryStats(): Promise<\n    Array<{\n      category: string;\n      jobCount: number;\n      applicationCount: number;\n      avgSalary: string;\n    }>\n  >;\n  getJobTypeStats(): Promise<\n    Array<{\n      type: string;\n      count: number;\n      percentage: number;\n    }>\n  >;\n  getTrends(): Promise<\n    Array<{\n      date: string;\n      applications: number;\n      jobs: number;\n    }>\n  >;\n  getRecentActivity(): Promise<\n    Array<{\n      id: number;\n      type: \"application\" | \"job_posted\" | \"user_registered\";\n      message: string;\n      timestamp: string;\n    }>\n  >;\n  getAllUsers(): Promise<User[]>;\n  getAllApplicationsAdmin(): Promise<Array<Application & { jobTitle: string }>>;\n  getAllApplicationsWithJobs(): Promise<Array<Application & { job: Job }>>;\n  updateApplication(\n    id: number,\n    application: UpdateApplication\n  ): Promise<Application | undefined>;\n  updateJob(id: number, job: UpdateJob): Promise<Job | undefined>;\n  clearAllData(): Promise<void>;\n  getActivityTrends(): Promise<\n    Array<{\n      day: string;\n      jobs: number;\n      applications: number;\n    }>\n  >;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Job methods\n  async getAllJobs(options?: {\n    includeInactive?: boolean;\n    featuredFirst?: boolean;\n    limit?: number;\n    offset?: number;\n  }): Promise<Job[]> {\n    const baseQuery = db.select().from(jobs);\n\n    if (!options?.includeInactive) {\n      if (options?.featuredFirst) {\n        return await baseQuery\n          .where(eq(jobs.isActive, true))\n          .orderBy(desc(jobs.isFeatured), desc(jobs.postedAt))\n          .limit(options?.limit || 1000)\n          .offset(options?.offset || 0);\n      } else {\n        return await baseQuery\n          .where(eq(jobs.isActive, true))\n          .orderBy(desc(jobs.postedAt))\n          .limit(options?.limit || 1000)\n          .offset(options?.offset || 0);\n      }\n    } else {\n      if (options?.featuredFirst) {\n        return await baseQuery\n          .orderBy(desc(jobs.isFeatured), desc(jobs.postedAt))\n          .limit(options?.limit || 1000)\n          .offset(options?.offset || 0);\n      } else {\n        return await baseQuery\n          .orderBy(desc(jobs.postedAt))\n          .limit(options?.limit || 1000)\n          .offset(options?.offset || 0);\n      }\n    }\n  }\n\n  async getJob(id: number): Promise<Job | undefined> {\n    const result = await db.select().from(jobs).where(eq(jobs.id, id));\n    return result[0] || undefined;\n  }\n\n  async createJob(insertJob: InsertJob): Promise<Job> {\n    const result = await db\n      .insert(jobs)\n      .values({\n        ...insertJob,\n        postedAt: new Date(), // Store as Date object\n        isFeatured: false,\n        viewCount: 0,\n        updatedAt: new Date(),\n      })\n      .returning();\n\n    // Update category count\n    await this.updateCategoryJobCount(insertJob.category, 1);\n\n    return result[0];\n  }\n\n  async updateJob(id: number, jobUpdate: UpdateJob): Promise<Job | undefined> {\n    const result = await db\n      .update(jobs)\n      .set({ ...jobUpdate, updatedAt: new Date() })\n      .where(eq(jobs.id, id))\n      .returning();\n    return result[0] || undefined;\n  }\n\n  async deleteJob(id: number): Promise<boolean> {\n    const job = await this.getJob(id);\n    if (!job) return false;\n\n    // PostgreSQL: delete returns array of deleted rows with .returning()\n    const result = await db.delete(jobs).where(eq(jobs.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async incrementJobViews(jobId: number): Promise<void> {\n    try {\n      await db\n        .update(jobs)\n        .set({ viewCount: sql`${jobs.viewCount} + 1`, updatedAt: new Date() })\n        .where(eq(jobs.id, jobId));\n    } catch (error) {\n      console.error(\"Error incrementing job views:\", error);\n    }\n  }\n\n  async searchJobs(\n    query: string,\n    filters?: {\n      location?: string;\n      type?: string;\n      category?: string;\n      salary?: string;\n      jobTypes?: string[];\n      featuredOnly?: boolean;\n    },\n    options?: {\n      limit?: number;\n      offset?: number;\n      sortBy?:\n        | \"newest\"\n        | \"oldest\"\n        | \"salary_high\"\n        | \"salary_low\"\n        | \"views\"\n        | \"applications\";\n    }\n  ): Promise<Job[]> {\n    let conditions = [eq(jobs.isActive, true)];\n\n    // Add text search if query provided\n    if (query && query.trim()) {\n      const searchTerm = `%${query.trim().toLowerCase()}%`;\n      conditions.push(\n        or(\n          sql`LOWER(${jobs.title}) LIKE ${searchTerm}`,\n          sql`LOWER(${jobs.company}) LIKE ${searchTerm}`,\n          sql`LOWER(${jobs.description}) LIKE ${searchTerm}`,\n          sql`LOWER(${jobs.category}) LIKE ${searchTerm}`\n        )!\n      );\n    }\n\n    // Apply filters\n    if (\n      filters?.location &&\n      filters.location !== \"Pili (All Areas)\" &&\n      filters.location.trim() !== \"\"\n    ) {\n      const locationTerm = `%${filters.location.trim().toLowerCase()}%`;\n      conditions.push(sql`LOWER(${jobs.location}) LIKE ${locationTerm}`);\n    }\n\n    if (filters?.type) {\n      conditions.push(eq(jobs.type, filters.type));\n    }\n\n    if (filters?.category && filters.category !== \"All Categories\") {\n      conditions.push(eq(jobs.category, filters.category));\n    }\n\n    if (filters?.salary && filters.salary !== \"Any Salary\") {\n      // Handle salary range filtering\n      if (filters.salary.includes(\"-\")) {\n        // For salary ranges like \"₱15,000 - ₱25,000\"\n        const salaryTerm = `%${filters.salary.toLowerCase()}%`;\n        conditions.push(sql`LOWER(${jobs.salary}) LIKE ${salaryTerm}`);\n      } else {\n        conditions.push(eq(jobs.salary, filters.salary));\n      }\n    }\n\n    // Handle multiple job types\n    if (filters?.jobTypes && filters.jobTypes.length > 0) {\n      const jobTypeConditions = filters.jobTypes.map((jobType) =>\n        eq(jobs.type, jobType)\n      );\n      conditions.push(or(...jobTypeConditions)!);\n    }\n\n    if (filters?.featuredOnly) {\n      conditions.push(eq(jobs.isFeatured, true));\n    }\n\n    // Determine sort order\n    let orderByClause;\n    switch (options?.sortBy) {\n      case \"oldest\":\n        orderByClause = asc(jobs.postedAt);\n        break;\n      case \"views\":\n        orderByClause = desc(jobs.viewCount);\n        break;\n      case \"applications\":\n        orderByClause = desc(jobs.applicantCount);\n        break;\n      default:\n        orderByClause = [desc(jobs.isFeatured), desc(jobs.postedAt)];\n    }\n\n    // Build complete query\n    const baseQuery = db\n      .select()\n      .from(jobs)\n      .where(and(...conditions))\n      .orderBy(\n        ...(Array.isArray(orderByClause) ? orderByClause : [orderByClause])\n      );\n\n    // Apply pagination if specified\n    if (options?.limit && options?.offset) {\n      return await baseQuery.limit(options.limit).offset(options.offset);\n    } else if (options?.limit) {\n      return await baseQuery.limit(options.limit);\n    } else if (options?.offset) {\n      return await baseQuery.offset(options.offset);\n    } else {\n      return await baseQuery;\n    }\n  }\n\n  async getFeaturedJobs(): Promise<Job[]> {\n    return await db\n      .select()\n      .from(jobs)\n      .where(and(eq(jobs.isActive, true), eq(jobs.isFeatured, true)))\n      .orderBy(desc(jobs.postedAt));\n  }\n\n  async getJobsByCategory(category: string): Promise<Job[]> {\n    return await db\n      .select()\n      .from(jobs)\n      .where(and(eq(jobs.category, category), eq(jobs.isActive, true)))\n      .orderBy(desc(jobs.postedAt));\n  }\n\n  async getJobsByEmployer(employerId: number): Promise<Job[]> {\n    return await db\n      .select()\n      .from(jobs)\n      .where(eq(jobs.employerId, employerId))\n      .orderBy(desc(jobs.postedAt));\n  }\n\n  async getApplicationsByEmployer(\n    employerId: number\n  ): Promise<Array<Application & { jobTitle: string }>> {\n    const applicationsWithJobTitles = await db\n      .select({\n        id: applications.id,\n        jobId: applications.jobId,\n        applicantId: applications.applicantId,\n        firstName: applications.firstName,\n        middleName: applications.middleName,\n        lastName: applications.lastName,\n        email: applications.email,\n        phone: applications.phone,\n        address: applications.address,\n        coverLetter: applications.coverLetter,\n        resume: applications.resume,\n        status: applications.status,\n        channelId: applications.channelId,\n        notes: applications.notes,\n        smsNotificationSent: applications.smsNotificationSent,\n        appliedAt: applications.appliedAt,\n        updatedAt: applications.updatedAt,\n        jobTitle: jobs.title,\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .where(eq(jobs.employerId, employerId))\n      .orderBy(desc(applications.appliedAt));\n\n    return applicationsWithJobTitles;\n  }\n\n  // Application methods\n  async getApplicationsForJob(jobId: number): Promise<Application[]> {\n    return await db\n      .select({\n        id: applications.id,\n        jobId: applications.jobId,\n        applicantId: applications.applicantId,\n        firstName: applications.firstName,\n        middleName: applications.middleName,\n        lastName: applications.lastName,\n        email: applications.email,\n        phone: applications.phone,\n        address: applications.address,\n        coverLetter: applications.coverLetter,\n        resume: applications.resume,\n        status: applications.status,\n        channelId: applications.channelId,\n        notes: applications.notes,\n        smsNotificationSent: applications.smsNotificationSent,\n        appliedAt: applications.appliedAt,\n        updatedAt: applications.updatedAt,\n      })\n      .from(applications)\n      .where(eq(applications.jobId, jobId))\n      .orderBy(desc(applications.appliedAt));\n  }\n\n  // Scout Candidates for Employers\n  async scoutCandidates(filters: {\n    skills: string[];\n    experienceLevel?: string;\n    location?: string;\n  }): Promise<Array<{\n    id: number;\n    firstName: string;\n    lastName: string;\n    email: string;\n    phone: string | null;\n    address: string | null;\n    skills: string | null;\n    desiredRoles: string | null;\n    experienceLevel: string | null;\n    preferredLocation: string | null;\n    matchScore: number;\n    matchingSkills: string[];\n  }>> {\n    // Get all job seekers with profiles\n    const jobSeekers = await db\n      .select({\n        id: users.id,\n        firstName: users.firstName,\n        lastName: users.lastName,\n        email: users.email,\n        phone: users.phone,\n        address: users.address,\n        skills: users.skills,\n        desiredRoles: users.desiredRoles,\n        experienceLevel: users.experienceLevel,\n        preferredLocation: users.preferredLocation,\n      })\n      .from(users)\n      .where(\n        and(\n          eq(users.role, 'jobseeker'),\n          eq(users.isActive, true),\n          isNotNull(users.skills)\n        )\n      );\n\n    const searchSkills = filters.skills.map(s => s.toLowerCase().trim());\n\n    // Score each candidate\n    const scoredCandidates = jobSeekers.map(candidate => {\n      const candidateSkills = (candidate.skills || '').toLowerCase().split(',').map(s => s.trim());\n      const candidateRoles = (candidate.desiredRoles || '').toLowerCase().split(',').map(r => r.trim());\n\n      // Combine all candidate text for comprehensive matching\n      const allCandidateText = `${candidate.skills || ''} ${candidate.desiredRoles || ''}`.toLowerCase();\n\n      // Find matching skills with VERY flexible matching\n      const matchingSkills: string[] = [];\n      let totalMatches = 0;\n\n      for (const searchSkill of searchSkills) {\n        let found = false;\n\n        // Check each candidate skill for partial match\n        for (const candidateSkill of candidateSkills) {\n          if (candidateSkill.includes(searchSkill) || searchSkill.includes(candidateSkill)) {\n            if (!matchingSkills.includes(candidateSkill)) {\n              matchingSkills.push(candidateSkill);\n            }\n            found = true;\n            totalMatches += 3; // Full skill match\n          }\n        }\n\n        // Also check roles\n        for (const role of candidateRoles) {\n          if (role.includes(searchSkill) || searchSkill.includes(role)) {\n            if (!matchingSkills.includes(role)) {\n              matchingSkills.push(role);\n            }\n            found = true;\n            totalMatches += 2; // Role match\n          }\n        }\n\n        // Check for word-level matches in all text\n        if (!found && allCandidateText.includes(searchSkill)) {\n          matchingSkills.push(searchSkill);\n          totalMatches += 1; // Partial match\n        }\n      }\n\n      // Calculate skill match percentage - very generous scoring\n      let skillMatchScore = 0;\n      if (searchSkills.length > 0 && matchingSkills.length > 0) {\n        // Give 100% if any match is found\n        const matchRatio = totalMatches / (searchSkills.length * 3);\n        skillMatchScore = Math.min(100, Math.round(matchRatio * 100));\n\n        // Boost score if we have direct matches\n        if (matchingSkills.length >= searchSkills.length) {\n          skillMatchScore = 100;\n        }\n      }\n\n      // Experience level match (bonus)\n      let experienceBonus = 0;\n      if (filters.experienceLevel && candidate.experienceLevel === filters.experienceLevel) {\n        experienceBonus = 20;\n      }\n\n      // Location removed since all candidates are from Pili\n\n      const matchScore = Math.min(100, skillMatchScore + experienceBonus);\n\n      return {\n        ...candidate,\n        matchScore,\n        matchingSkills,\n      };\n    });\n\n    // Filter candidates with at least one matching skill and sort by score\n    return scoredCandidates\n      .filter(candidate => candidate.matchingSkills.length > 0)\n      .sort((a, b) => b.matchScore - a.matchScore);\n  }\n\n  // Job Matching Methods\n  async calculateJobMatch(userId: number, jobId: number): Promise<{\n    matchScore: number;\n    skillMatch: number;\n    locationMatch: number;\n    roleMatch: number;\n  }> {\n    const user = await this.getUserById(userId);\n    const job = await this.getJob(jobId);\n\n    if (!user || !job) {\n      return { matchScore: 0, skillMatch: 0, locationMatch: 0, roleMatch: 0 };\n    }\n\n    // Parse user skills and roles into individual words (including 2-letter words for max sensitivity)\n    const userSkills = (user.skills || '').toLowerCase().split(',').map(s => s.trim()).filter(s => s);\n    const userSkillWords = userSkills.flatMap(skill => skill.split(/\\s+/)).filter(w => w.length > 1);\n\n    // Build comprehensive job text for matching - include ALL text fields\n    const jobText = `${job.title || ''} ${job.description || ''} ${job.requirements || ''} ${job.category || ''} ${job.requiredSkills || ''} ${job.benefits || ''} ${job.company || ''}`.toLowerCase();\n\n    // Calculate skill match (50% weight) - ULTRA sensitive matching\n    let skillMatch = 0;\n    if (userSkills.length > 0 || userSkillWords.length > 0) {\n      let matchCount = 0;\n      let totalWords = userSkillWords.length;\n\n      // Check each skill phrase\n      for (const skill of userSkills) {\n        if (jobText.includes(skill)) {\n          matchCount += 3; // Full phrase match gets triple points\n        }\n      }\n\n      // Check individual skill words - ANY word match counts!\n      for (const word of userSkillWords) {\n        if (jobText.includes(word)) {\n          matchCount += 1;\n        }\n      }\n\n      // Give high score even for a single match\n      if (matchCount > 0) {\n        // Even 1 match out of 10 words = 30% skill match\n        skillMatch = Math.min(100, (matchCount / Math.max(1, totalWords)) * 300);\n      }\n    }\n\n    // Calculate role match (50% weight) - ULTRA sensitive (location removed since all in Pili)\n    let roleMatch = 0;\n    const desiredRoles = (user.desiredRoles || '').toLowerCase().split(',').map(r => r.trim()).filter(r => r);\n    const desiredRoleWords = desiredRoles.flatMap(role => role.split(/\\s+/)).filter(w => w.length > 1);\n    const jobTitle = job.title.toLowerCase();\n    const jobCategory = (job.category || '').toLowerCase();\n    const jobTitleAndCategory = `${jobTitle} ${jobCategory} ${jobText}`;\n\n    if (desiredRoles.length > 0 || desiredRoleWords.length > 0) {\n      let roleMatchCount = 0;\n      let totalRoleWords = desiredRoleWords.length;\n\n      // Check full role phrases\n      for (const role of desiredRoles) {\n        if (jobTitleAndCategory.includes(role)) {\n          roleMatchCount += 3;\n        }\n      }\n\n      // Check individual role words - ANY word match counts!\n      for (const word of desiredRoleWords) {\n        if (jobTitleAndCategory.includes(word)) {\n          roleMatchCount += 1;\n        }\n      }\n\n      // Give high score even for a single match\n      if (roleMatchCount > 0) {\n        roleMatch = Math.min(100, (roleMatchCount / Math.max(1, totalRoleWords)) * 300);\n      }\n    }\n\n    // Calculate weighted total score (location removed since all in Pili)\n    const matchScore = (skillMatch * 0.5) + (roleMatch * 0.5);\n\n    return {\n      matchScore: Math.round(matchScore),\n      skillMatch: Math.round(skillMatch),\n      locationMatch: 0, // Not used\n      roleMatch: Math.round(roleMatch)\n    };\n  }\n\n  async getJobRecommendations(userId: number, limit: number = 20): Promise<any[]> {\n    const user = await this.getUserById(userId);\n    if (!user || user.role !== 'jobseeker') {\n      return [];\n    }\n\n    // Get all active jobs\n    const activeJobs = await this.getAllJobs({ includeInactive: false });\n\n    if (activeJobs.length === 0) {\n      console.log(\"No active jobs found for recommendations\");\n      return [];\n    }\n\n    console.log(`Found ${activeJobs.length} active jobs for recommendations`);\n\n    // Calculate match scores for each job\n    const matches = await Promise.all(\n      activeJobs.map(async (job) => {\n        const scores = await this.calculateJobMatch(userId, job.id);\n        return {\n          ...job,\n          matchScore: scores.matchScore,\n          skillMatch: scores.skillMatch,\n          locationMatch: scores.locationMatch,\n          roleMatch: scores.roleMatch\n        };\n      })\n    );\n\n    // Filter jobs with score > 6 (5-7% threshold for better matching accuracy) and sort by match score\n    const recommendations = matches\n      .filter(m => m.matchScore > 6)\n      .sort((a, b) => b.matchScore - a.matchScore)\n      .slice(0, limit);\n\n    console.log(`Filtered to ${recommendations.length} recommendations with score > 6 (6% minimum match)`);\n\n    // Store matches in database\n    for (const rec of recommendations) {\n      try {\n        await db.insert(jobMatches)\n          .values({\n            userId,\n            jobId: rec.id,\n            matchScore: rec.matchScore,\n            skillMatch: rec.skillMatch,\n            locationMatch: rec.locationMatch,\n            roleMatch: rec.roleMatch,\n          })\n          .onConflictDoUpdate({\n            target: [jobMatches.userId, jobMatches.jobId],\n            set: {\n              matchScore: rec.matchScore,\n              skillMatch: rec.skillMatch,\n              locationMatch: rec.locationMatch,\n              roleMatch: rec.roleMatch,\n            }\n          });\n      } catch (error) {\n        console.error(\"Error storing job match:\", error);\n      }\n    }\n\n    return recommendations;\n  }\n\n  async updateMatchFeedback(userId: number, jobId: number, feedback: 'thumbs_up' | 'thumbs_down'): Promise<void> {\n    await db.update(jobMatches)\n      .set({ userFeedback: feedback })\n      .where(and(\n        eq(jobMatches.userId, userId),\n        eq(jobMatches.jobId, jobId)\n      ));\n  }\n\n\n  async createApplication(\n    insertApplication: InsertApplication\n  ): Promise<Application> {\n    const result = await db\n      .insert(applications)\n      .values({\n        ...insertApplication,\n        appliedAt: new Date(), // Store as Date object\n        status: \"pending\",\n        updatedAt: new Date(),\n      })\n      .returning();\n\n    // Increment applicant count for the job\n    await db\n      .update(jobs)\n      .set({ applicantCount: sql`${jobs.applicantCount} + 1` })\n      .where(eq(jobs.id, insertApplication.jobId));\n\n    return result[0];\n  }\n\n  async updateApplication(\n    id: number,\n    applicationUpdate: UpdateApplication\n  ): Promise<Application | undefined> {\n    const result = await db\n      .update(applications)\n      .set({ ...applicationUpdate, updatedAt: new Date() })\n      .where(eq(applications.id, id))\n      .returning();\n    return result[0] || undefined;\n  }\n\n  async deleteApplication(id: number): Promise<boolean> {\n    const application = await this.getApplicationById(id);\n    if (!application) return false;\n\n    const result = await db\n      .delete(applications)\n      .where(eq(applications.id, id))\n      .returning();\n\n    // Decrement applicant count for the job\n    await db\n      .update(jobs)\n      .set({ applicantCount: sql`${jobs.applicantCount} - 1` })\n      .where(eq(jobs.id, application.jobId));\n\n    return result.length > 0;\n  }\n\n  async getApplicationsByEmail(email: string): Promise<Application[]> {\n    return await db\n      .select()\n      .from(applications)\n      .where(eq(applications.email, email))\n      .orderBy(desc(applications.appliedAt));\n  }\n\n  async getApplicationsByApplicant(email: string): Promise<\n    Array<\n      Application & {\n        job: {\n          title: string;\n          company: string;\n          location: string;\n          type: string;\n          salary: string;\n        };\n      }\n    >\n  > {\n    const applicationsWithJobs = await db\n      .select({\n        id: applications.id,\n        jobId: applications.jobId,\n        applicantId: applications.applicantId,\n        firstName: applications.firstName,\n        middleName: applications.middleName,\n        lastName: applications.lastName,\n        email: applications.email,\n        phone: applications.phone,\n        address: applications.address,\n        coverLetter: applications.coverLetter,\n        resume: applications.resume,\n        status: applications.status,\n        channelId: applications.channelId,\n        notes: applications.notes,\n        smsNotificationSent: applications.smsNotificationSent,\n        appliedAt: applications.appliedAt,\n        updatedAt: applications.updatedAt,\n        job: {\n          title: jobs.title,\n          company: jobs.company,\n          location: jobs.location,\n          type: jobs.type,\n          salary: jobs.salary,\n        },\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .where(eq(applications.email, email))\n      .orderBy(desc(applications.appliedAt));\n\n    return applicationsWithJobs;\n  }\n\n  async getApplicationById(id: number): Promise<Application | undefined> {\n    const result = await db\n      .select()\n      .from(applications)\n      .where(eq(applications.id, id));\n    return result[0] || undefined;\n  }\n\n  // Employer methods\n  async createEmployer(employer: InsertEmployer): Promise<Employer> {\n    const result = await db.insert(employers).values(employer).returning();\n    return result[0];\n  }\n\n  async getEmployer(id: number): Promise<Employer | undefined> {\n    const result = await db\n      .select()\n      .from(employers)\n      .where(eq(employers.id, id));\n    return result[0] || undefined;\n  }\n\n  async getEmployerByEmail(email: string): Promise<Employer | undefined> {\n    const result = await db\n      .select()\n      .from(employers)\n      .where(eq(employers.email, email));\n    return result[0] || undefined;\n  }\n\n  async updateEmployer(\n    id: number,\n    employerUpdate: Partial<Employer>\n  ): Promise<Employer | undefined> {\n    const result = await db\n      .update(employers)\n      .set({ ...employerUpdate, updatedAt: new Date() })\n      .where(eq(employers.id, id))\n      .returning();\n    return result[0] || undefined;\n  }\n\n  // Category methods\n  async getAllCategories(): Promise<Category[]> {\n    return await db\n      .select()\n      .from(categories)\n      .where(eq(categories.isActive, true))\n      .orderBy(desc(categories.jobCount), asc(categories.name));\n  }\n\n  async createCategory(category: InsertCategory): Promise<Category> {\n    const result = await db.insert(categories).values(category).returning();\n    return result[0];\n  }\n\n  async updateCategoryJobCount(\n    categoryName: string,\n    increment: number\n  ): Promise<void> {\n    await db\n      .update(categories)\n      .set({ jobCount: sql`${categories.jobCount} + ${increment}` })\n      .where(eq(categories.name, categoryName));\n  }\n\n  // User methods\n  async createUser(user: InsertUser): Promise<User> {\n    const userData = {\n      ...user,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      verificationStatus: user.role === \"employer\" ? \"pending\" : null,\n    };\n\n    const result = await db.insert(users).values(userData).returning();\n    return result[0];\n  }\n\n  async getUserById(id: number): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id));\n    return result[0] || undefined;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.email, email));\n    return result[0] || undefined;\n  }\n\n  async updateUser(id: number, user: Partial<User>): Promise<User | undefined> {\n    const result = await db\n      .update(users)\n      .set({ ...user, updatedAt: new Date() })\n      .where(eq(users.id, id))\n      .returning();\n    return result[0] || undefined;\n  }\n\n  async deleteUser(id: number): Promise<boolean> {\n    const result = await db.delete(users).where(eq(users.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Saved jobs methods\n  async saveJob(userId: number, jobId: number): Promise<SavedJob> {\n    const [savedJob] = await db\n      .insert(savedJobs)\n      .values({ userId, jobId })\n      .onConflictDoNothing()\n      .returning();\n    return savedJob;\n  }\n\n  async unsaveJob(userId: number, jobId: number): Promise<boolean> {\n    const result = await db\n      .delete(savedJobs)\n      .where(and(eq(savedJobs.userId, userId), eq(savedJobs.jobId, jobId)))\n      .returning();\n    return result.length > 0;\n  }\n\n  async getSavedJobs(userId: number): Promise<Array<{ id: number; userId: number; jobId: number; savedAt: Date; job: Job }>> {\n    const result = await db\n      .select({\n        id: savedJobs.id,\n        userId: savedJobs.userId,\n        jobId: savedJobs.jobId,\n        savedAt: savedJobs.savedAt,\n        job: jobs\n      })\n      .from(savedJobs)\n      .innerJoin(jobs, eq(savedJobs.jobId, jobs.id))\n      .where(eq(savedJobs.userId, userId))\n      .orderBy(desc(savedJobs.savedAt));\n\n    return result;\n  }\n\n  async isJobSaved(userEmail: string, jobId: number): Promise<boolean> {\n    // For backward compatibility, convert email to user ID\n    const user = await this.getUserByEmail(userEmail);\n    if (!user) return false;\n\n    const result = await db\n      .select()\n      .from(savedJobs)\n      .where(and(eq(savedJobs.userId, user.id), eq(savedJobs.jobId, jobId)));\n    return result.length > 0;\n  }\n\n  // Job alerts methods\n  async createJobAlert(alert: InsertJobAlert): Promise<JobAlert> {\n    const result = await db.insert(jobAlerts).values(alert).returning();\n    return result[0];\n  }\n\n  async getUserJobAlerts(userId: number): Promise<JobAlert[]> {\n    return await db\n      .select()\n      .from(jobAlerts)\n      .where(eq(jobAlerts.userId, userId))\n      .orderBy(desc(jobAlerts.createdAt));\n  }\n\n  // For backward compatibility\n  async getJobAlerts(userEmail: string): Promise<JobAlert[]> {\n    const user = await this.getUserByEmail(userEmail);\n    if (!user) return [];\n    return this.getUserJobAlerts(user.id);\n  }\n\n  async updateJobAlert(\n    id: number,\n    alertUpdate: Partial<JobAlert>\n  ): Promise<JobAlert | undefined> {\n    const result = await db\n      .update(jobAlerts)\n      .set(alertUpdate)\n      .where(eq(jobAlerts.id, id))\n      .returning();\n    return result[0] || undefined;\n  }\n\n  async deleteJobAlert(id: number): Promise<boolean> {\n    const result = await db.delete(jobAlerts).where(eq(jobAlerts.id, id)).returning();\n    return result.length > 0;\n  }\n\n  // Analytics methods\n  async getJobStats(): Promise<{\n    totalJobs: number;\n    activeJobs: number;\n    totalApplications: number;\n    totalEmployers: number;\n    totalJobSeekers: number;\n    applicationsToday: number;\n    categoriesWithCounts: Array<{ category: string; count: number }>;\n    recentJobs: Job[];\n  }> {\n    const allJobs = await this.getAllJobs();\n    const allApplications = await db.select().from(applications);\n\n    // Get real employer and job seeker counts\n    const [totalEmployers] = await db\n      .select({ count: count() })\n      .from(users)\n      .where(eq(users.role, \"employer\"));\n\n    const [totalJobSeekers] = await db\n      .select({ count: count() })\n      .from(users)\n      .where(eq(users.role, \"jobseeker\"));\n\n    // Get today's application count\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    const applicationsToday = await db\n      .select({ count: sql<number>`count(*)` })\n      .from(applications)\n      .where(gte(applications.appliedAt, today))\n      .then((rows) => rows[0]?.count || 0);\n\n    // Get category counts\n    const categoriesWithCounts = await db\n      .select({\n        category: jobs.category,\n        count: count(),\n      })\n      .from(jobs)\n      .where(eq(jobs.isActive, true))\n      .groupBy(jobs.category);\n\n    return {\n      activeJobs: allJobs.filter((job) => job.isActive).length,\n      totalJobs: allJobs.length,\n      totalApplications: allApplications.length,\n      totalEmployers: totalEmployers.count || 0,\n      totalJobSeekers: totalJobSeekers.count || 0,\n      applicationsToday: applicationsToday,\n      categoriesWithCounts: categoriesWithCounts,\n      recentJobs: allJobs\n        .filter((job) => job.isActive)\n        .sort(\n          (a, b) =>\n            new Date(b.postedAt).getTime() - new Date(a.postedAt).getTime()\n        )\n        .slice(0, 5),\n    };\n  }\n\n  // Admin methods\n  async getAdminStats() {\n    console.log(\"=== GETTING ADMIN STATS BASED ON RECENT ACTIVITY ===\");\n\n    // Get basic counts\n    const [totalUsers] = await db.select({ count: count() }).from(users);\n    const [totalJobs] = await db.select({ count: count() }).from(jobs);\n    const [totalApplications] = await db\n      .select({ count: count() })\n      .from(applications);\n    const [activeJobs] = await db\n      .select({ count: count() })\n      .from(jobs)\n      .where(eq(jobs.isActive, true));\n    const [pendingApplications] = await db\n      .select({ count: count() })\n      .from(applications)\n      .where(eq(applications.status, \"pending\"));\n    const [featuredJobs] = await db\n      .select({ count: count() })\n      .from(jobs)\n      .where(eq(jobs.isFeatured, true));\n    const [totalEmployers] = await db\n      .select({ count: count() })\n      .from(users)\n      .where(eq(users.role, \"employer\"));\n    const [totalJobSeekers] = await db\n      .select({ count: count() })\n      .from(users)\n      .where(eq(users.role, \"jobseeker\"));\n\n    // Get recent activity to determine \"today\" based on actual data\n    const recentJobs = await db\n      .select({ postedAt: jobs.postedAt })\n      .from(jobs)\n      .orderBy(desc(jobs.postedAt))\n      .limit(10);\n\n    const recentApplications = await db\n      .select({ appliedAt: applications.appliedAt })\n      .from(applications)\n      .orderBy(desc(applications.appliedAt))\n      .limit(10);\n\n    const recentUsers = await db\n      .select({ createdAt: users.createdAt })\n      .from(users)\n      .orderBy(desc(users.createdAt))\n      .limit(10);\n\n    // Find the most recent activity date to use as \"today\"\n    const allDates = [\n      ...recentJobs.map(j => j.postedAt),\n      ...recentApplications.map(a => a.appliedAt),\n      ...recentUsers.map(u => u.createdAt)\n    ].filter(Boolean);\n\n    let applicationsToday = 0;\n    let jobsPostedToday = 0;\n    let usersRegisteredToday = 0;\n\n    if (allDates.length > 0) {\n      const latestDate = new Date(Math.max(...allDates.map(d => d.getTime())));\n      const startOfDay = new Date(\n        latestDate.getFullYear(),\n        latestDate.getMonth(),\n        latestDate.getDate()\n      );\n      const endOfDay = new Date(\n        latestDate.getFullYear(),\n        latestDate.getMonth(),\n        latestDate.getDate() + 1\n      );\n\n      console.log(\"Using latest activity date as 'today':\", latestDate.toISOString());\n      console.log(\"Date range:\", startOfDay.toISOString(), \"to\", endOfDay.toISOString());\n\n      // Count activities for \"today\" (the most recent activity day)\n      applicationsToday = recentApplications.filter(a =>\n        a.appliedAt >= startOfDay && a.appliedAt < endOfDay\n      ).length;\n\n      jobsPostedToday = recentJobs.filter(j =>\n        j.postedAt >= startOfDay && j.postedAt < endOfDay\n      ).length;\n\n      usersRegisteredToday = recentUsers.filter(u =>\n        u.createdAt >= startOfDay && u.createdAt < endOfDay\n      ).length;\n\n      console.log(\"Today's counts:\", { applicationsToday, jobsPostedToday, usersRegisteredToday });\n    }\n\n    // Get total job views from all active jobs\n    const [jobViewsToday] = await db\n      .select({\n        totalViews: sql<number>`COALESCE(SUM(${jobs.viewCount}), 0)`,\n      })\n      .from(jobs)\n      .where(eq(jobs.isActive, true));\n\n    const result = {\n      totalUsers: totalUsers?.count || 0,\n      totalJobs: totalJobs?.count || 0,\n      totalApplications: totalApplications?.count || 0,\n      activeJobs: activeJobs?.count || 0,\n      pendingApplications: pendingApplications?.count || 0,\n      featuredJobs: featuredJobs?.count || 0,\n      totalEmployers: totalEmployers?.count || 0,\n      totalJobSeekers: totalJobSeekers?.count || 0,\n      applicationsToday: applicationsToday,\n      jobsPostedToday: jobsPostedToday,\n      usersRegisteredToday: usersRegisteredToday,\n      jobViewsToday: jobViewsToday?.totalViews || 0,\n    };\n\n    console.log(\"Final admin stats:\", result);\n    return result;\n  }\n\n  async getCategoryStats() {\n    const categoryStats = await db\n      .select({\n        category: jobs.category,\n        jobCount: count(jobs.id),\n        applicationCount: count(applications.id),\n      })\n      .from(jobs)\n      .leftJoin(applications, eq(jobs.id, applications.jobId))\n      .groupBy(jobs.category);\n\n    return categoryStats.map((stat) => ({\n      category: stat.category,\n      jobCount: stat.jobCount,\n      applicationCount: stat.applicationCount || 0,\n      avgSalary: \"₱15,000 - ₱30,000\", // Placeholder for now\n    }));\n  }\n\n  async getJobTypeStats() {\n    const typeStats = await db\n      .select({\n        type: jobs.type,\n        count: count(),\n      })\n      .from(jobs)\n      .where(eq(jobs.isActive, true))\n      .groupBy(jobs.type);\n\n    const totalCount = typeStats.reduce((sum, stat) => sum + stat.count, 0);\n\n    return typeStats.map((stat) => ({\n      type: stat.type,\n      count: stat.count,\n      percentage: Math.round((stat.count / totalCount) * 100),\n    }));\n  }\n\n  async getTrends() {\n    console.log(\"=== GETTING TRENDS BASED ON RECENT ACTIVITY ===\");\n\n    // Get recent activity data that we know exists\n    const recentJobs = await db\n      .select({ id: jobs.id, postedAt: jobs.postedAt, title: jobs.title })\n      .from(jobs)\n      .orderBy(desc(jobs.postedAt))\n      .limit(10);\n\n    const recentApplications = await db\n      .select({ id: applications.id, appliedAt: applications.appliedAt, jobId: applications.jobId })\n      .from(applications)\n      .orderBy(desc(applications.appliedAt))\n      .limit(10);\n\n    const recentUsers = await db\n      .select({ id: users.id, createdAt: users.createdAt, email: users.email })\n      .from(users)\n      .orderBy(desc(users.createdAt))\n      .limit(10);\n\n    console.log(\"Recent jobs:\", recentJobs);\n    console.log(\"Recent applications:\", recentApplications);\n    console.log(\"Recent users:\", recentUsers);\n\n    // Create trends data based on the actual recent activity\n    const trends = [];\n\n    // Get the most recent date from all activities\n    const allDates = [\n      ...recentJobs.map(j => j.postedAt),\n      ...recentApplications.map(a => a.appliedAt),\n      ...recentUsers.map(u => u.createdAt)\n    ].filter(Boolean);\n\n    if (allDates.length === 0) {\n      console.log(\"No recent activity found\");\n      return [{ date: 'No Data', jobs: 0, applications: 0, users: 0 }];\n    }\n\n    const latestDate = new Date(Math.max(...allDates.map(d => d.getTime())));\n    console.log(\"Latest activity date:\", latestDate.toISOString());\n\n    // Create 7 days of data centered around the most recent activity\n    for (let i = 6; i >= 0; i--) {\n      const date = new Date(latestDate.getTime() - i * 24 * 60 * 60 * 1000);\n      const startOfDay = new Date(\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate()\n      );\n      const endOfDay = new Date(\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate() + 1\n      );\n\n      // Count activities for this day\n      const jobsCount = recentJobs.filter(j =>\n        j.postedAt >= startOfDay && j.postedAt < endOfDay\n      ).length;\n\n      const applicationsCount = recentApplications.filter(a =>\n        a.appliedAt >= startOfDay && a.appliedAt < endOfDay\n      ).length;\n\n      const usersCount = recentUsers.filter(u =>\n        u.createdAt >= startOfDay && u.createdAt < endOfDay\n      ).length;\n\n      const dayData = {\n        date: `${date.getMonth() + 1}/${date.getDate()}`,\n        jobs: jobsCount,\n        applications: applicationsCount,\n        users: usersCount,\n      };\n\n      console.log(`Day ${i} (${date.toISOString()}):`, dayData);\n      trends.push(dayData);\n    }\n\n    console.log(\"Final trends based on recent activity:\", trends);\n    return trends;\n  }\n\n  async getRecentActivity() {\n    // Get recent applications\n    const recentApps = await db\n      .select({\n        id: applications.id,\n        firstName: applications.firstName,\n        lastName: applications.lastName,\n        appliedAt: applications.appliedAt,\n        jobTitle: jobs.title,\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .orderBy(desc(applications.appliedAt))\n      .limit(5);\n\n    // Get recent job postings\n    const recentJobs = await db\n      .select({\n        id: jobs.id,\n        title: jobs.title,\n        company: jobs.company,\n        postedAt: jobs.postedAt,\n      })\n      .from(jobs)\n      .orderBy(desc(jobs.postedAt))\n      .limit(5);\n\n    // Get recent user registrations\n    const recentUsers = await db\n      .select({\n        id: users.id,\n        firstName: users.firstName,\n        lastName: users.lastName,\n        role: users.role,\n        createdAt: users.createdAt,\n      })\n      .from(users)\n      .orderBy(desc(users.createdAt))\n      .limit(5);\n\n    // Combine all activities\n    const activities: any[] = [];\n\n    recentApps.forEach((app) => {\n      activities.push({\n        id: `app-${app.id}`,\n        type: \"application\",\n        message: `${app.firstName} ${app.lastName} applied for ${app.jobTitle}`,\n        timestamp: app.appliedAt,\n      });\n    });\n\n    recentJobs.forEach((job) => {\n      activities.push({\n        id: `job-${job.id}`,\n        type: \"job_posted\",\n        message: `New job posted: ${job.title} at ${job.company}`,\n        timestamp: job.postedAt,\n      });\n    });\n\n    recentUsers.forEach((user) => {\n      activities.push({\n        id: `user-${user.id}`,\n        type: \"user_registered\",\n        message: `${user.firstName} ${user.lastName} registered as ${user.role}`,\n        timestamp: user.createdAt,\n      });\n    });\n\n    // Sort by timestamp (most recent first)\n    activities.sort((a, b) => b.timestamp - a.timestamp);\n\n    return activities.slice(0, 10);\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users).orderBy(desc(users.createdAt));\n  }\n\n  async getAllApplicationsAdmin() {\n    const applicationsWithJobTitles = await db\n      .select({\n        id: applications.id,\n        firstName: applications.firstName,\n        middleName: applications.middleName,\n        lastName: applications.lastName,\n        email: applications.email,\n        phone: applications.phone,\n        address: applications.address,\n        coverLetter: applications.coverLetter,\n        status: applications.status,\n        channelId: applications.channelId,\n        smsNotificationSent: applications.smsNotificationSent,\n        appliedAt: applications.appliedAt,\n        jobTitle: jobs.title,\n        jobId: applications.jobId,\n        applicantId: applications.applicantId,\n        resume: applications.resume,\n        notes: applications.notes,\n        updatedAt: applications.updatedAt,\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .orderBy(desc(applications.appliedAt));\n\n    return applicationsWithJobTitles;\n  }\n\n  async getAllTablesData() {\n    const tableNames = [\n      \"users\",\n      \"jobs\",\n      \"applications\",\n      \"employers\",\n      \"categories\",\n      \"saved_jobs\",\n      \"job_alerts\",\n      \"user_sessions\",\n      \"sessions\",\n    ];\n    const tablesData = [];\n\n    for (const tableName of tableNames) {\n      try {\n        const tableData = await this.getTableData(tableName);\n        tablesData.push(tableData);\n      } catch (error) {\n        console.error(`Error fetching data for table ${tableName}:`, error);\n        tablesData.push({\n          name: tableName,\n          rows: [],\n          columns: [],\n          error: error instanceof Error ? error.message : 'Unknown error',\n        });\n      }\n    }\n\n    return tablesData;\n  }\n\n  async getTableData(tableName: string) {\n    let tableSchema;\n    let rows: any[] = [];\n\n    switch (tableName) {\n      case \"users\":\n        tableSchema = users;\n        rows = await db.select().from(users);\n        break;\n      case \"jobs\":\n        tableSchema = jobs;\n        rows = await db.select().from(jobs);\n        break;\n      case \"applications\":\n        tableSchema = applications;\n        rows = await db.select().from(applications);\n        break;\n      case \"employers\":\n        tableSchema = employers;\n        rows = await db.select().from(employers);\n        break;\n      case \"categories\":\n        tableSchema = categories;\n        rows = await db.select().from(categories);\n        break;\n      case \"saved_jobs\":\n        tableSchema = savedJobs;\n        rows = await db.select().from(savedJobs);\n        break;\n      case \"job_alerts\":\n        tableSchema = jobAlerts;\n        rows = await db.select().from(jobAlerts);\n        break;\n      case \"user_sessions\":\n        tableSchema = userSessions;\n        rows = await db.select().from(userSessions);\n        break;\n      case \"sessions\":\n        // Handle sessions table separately since it may not follow standard schema\n        try {\n          rows = await db.select().from(sessions);\n        } catch (err) {\n          // If sessions table doesn't exist or isn't accessible, return empty\n          rows = [];\n        }\n        return {\n          name: tableName,\n          rows: rows || [],\n          columns: rows.length > 0 ? Object.keys(rows[0]) : [],\n        };\n      default:\n        throw new Error(`Unknown table: ${tableName}`);\n    }\n\n    // Get column names from the first row if available\n    const columns = rows.length > 0 ? Object.keys(rows[0]) : [];\n\n    return {\n      name: tableName,\n      rows,\n      columns,\n    };\n  }\n\n  async getAllApplicationsWithJobs(): Promise<\n    Array<Application & { job: Job }>\n  > {\n    const applicationsWithJobs = await db\n      .select({\n        // Application fields\n        id: applications.id,\n        jobId: applications.jobId,\n        applicantId: applications.applicantId,\n        firstName: applications.firstName,\n        middleName: applications.middleName,\n        lastName: applications.lastName,\n        email: applications.email,\n        phone: applications.phone,\n        address: applications.address,\n        coverLetter: applications.coverLetter,\n        resume: applications.resume,\n        status: applications.status,\n        channelId: applications.channelId,\n        notes: applications.notes,\n        smsNotificationSent: applications.smsNotificationSent,\n        appliedAt: applications.appliedAt,\n        updatedAt: applications.updatedAt,\n        // Job fields\n        job: {\n          id: jobs.id,\n          title: jobs.title,\n          company: jobs.company,\n          location: jobs.location,\n          type: jobs.type,\n          category: jobs.category,\n          salary: jobs.salary,\n          description: jobs.description,\n          requirements: jobs.requirements,\n          requiredSkills: jobs.requiredSkills,\n          benefits: jobs.benefits,\n          email: jobs.email,\n          phone: jobs.phone,\n          employerId: jobs.employerId,\n          isActive: jobs.isActive,\n          isFeatured: jobs.isFeatured,\n          applicantCount: jobs.applicantCount,\n          viewCount: jobs.viewCount,\n          expiresAt: jobs.expiresAt,\n          postedAt: jobs.postedAt,\n          updatedAt: jobs.updatedAt,\n        },\n      })\n      .from(applications)\n      .innerJoin(jobs, eq(applications.jobId, jobs.id))\n      .orderBy(desc(applications.appliedAt));\n\n    return applicationsWithJobs.map((app) => ({\n      id: app.id,\n      jobId: app.jobId,\n      applicantId: app.applicantId,\n      firstName: app.firstName,\n      middleName: app.middleName,\n      lastName: app.lastName,\n      email: app.email,\n      phone: app.phone,\n      address: app.address,\n      coverLetter: app.coverLetter,\n      resume: app.resume,\n      status: app.status,\n      channelId: app.channelId,\n      notes: app.notes,\n      smsNotificationSent: app.smsNotificationSent,\n      appliedAt: app.appliedAt,\n      updatedAt: app.updatedAt,\n      job: app.job,\n    }));\n  }\n\n  async clearAllData(): Promise<void> {\n    // Clear in reverse order to handle foreign key constraints\n    await db.delete(applications);\n    await db.delete(savedJobs);\n    await db.delete(jobAlerts);\n    await db.delete(jobs);\n    await db.delete(categories);\n    await db.delete(employers);\n    await db.delete(userSessions);\n    await db.delete(users);\n  }\n\n  async getPendingVerifications(): Promise<User[]> {\n    return await db\n      .select()\n      .from(users)\n      .where(\n        and(eq(users.role, \"employer\"), eq(users.verificationStatus, \"pending\"))\n      )\n      .orderBy(desc(users.updatedAt));\n  }\n\n  async getActivityTrends() {\n    const trends = [];\n    const days = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"];\n\n    for (let i = 6; i >= 0; i--) {\n      const date = new Date();\n      date.setDate(date.getDate() - i);\n      date.setHours(0, 0, 0, 0);\n\n      const nextDay = new Date(date);\n      nextDay.setDate(nextDay.getDate() + 1);\n\n      const [jobsCount] = await db\n        .select({ count: count() })\n        .from(jobs)\n        .where(\n          and(\n            gte(jobs.postedAt, date),\n            lt(jobs.postedAt, nextDay)\n          )\n        );\n\n      const [applicationsCount] = await db\n        .select({ count: count() })\n        .from(applications)\n        .where(\n          and(\n            gte(applications.appliedAt, date),\n            lt(applications.appliedAt, nextDay)\n          )\n        );\n\n      trends.push({\n        day: days[date.getDay() === 0 ? 6 : date.getDay() - 1],\n        jobs: jobsCount.count || 0,\n        applications: applicationsCount.count || 0,\n      });\n    }\n\n    return trends;\n  }\n}\n\nexport const storage = new DatabaseStorage();","path":null,"size_bytes":52780,"size_tokens":null},"api/server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","path":null,"size_bytes":2280,"size_tokens":null},"VERCEL_DEPLOYMENT.md":{"content":"# Vercel Deployment Guide\n\n## ✅ Deployment Ready Status\n\nYour Pili Jobs application is now **fully configured and ready for Vercel deployment**!\n\n## What Was Fixed\n\n### 1. Build Configuration\n- **Updated `package.json` build script** from `vite build && esbuild server/index.ts...` to just `vite build`\n- For Vercel, the API is handled through serverless functions, not bundled server code\n- The frontend is built to the `dist/` directory as static files\n\n### 2. Dependencies\n- **Installed `@vercel/node`** - Required for Vercel serverless functions\n- **Installed `nanoid`** - Required dependency for the application\n\n### 3. Vercel Configuration\nYour `vercel.json` is properly configured:\n```json\n{\n  \"buildCommand\": \"npm run build\",\n  \"outputDirectory\": \"dist\",\n  \"functions\": {\n    \"api/[...path].ts\": {\n      \"memory\": 1024,\n      \"maxDuration\": 10\n    }\n  }\n}\n```\n\n## Deployment Architecture\n\n### Frontend (Static)\n- Built with Vite\n- Output directory: `dist/`\n- Served as static files by Vercel\n\n### Backend (Serverless API)\n- Entry point: `api/[...path].ts`\n- Routes defined in: `api/server/routes.ts`\n- Database: PostgreSQL (Neon) via `@neondatabase/serverless`\n\n## Environment Variables Required\n\nMake sure these are set in your Vercel project settings:\n\n### Required\n- `DATABASE_URL` - Your PostgreSQL connection string (Neon or other provider)\n- `JWT_SECRET` - Secret key for JWT token signing\n- `NODE_ENV` - Set to `production`\n\n### Optional (for SMS features)\n- `TEXTBEE_API_KEY` - TextBee SMS service API key\n- `TEXTBEE_DEVICE_ID` - TextBee device identifier\n\n## Deployment Steps\n\n### 1. Push to GitHub\n```bash\ngit add .\ngit commit -m \"Fixed Vercel deployment configuration\"\ngit push origin main\n```\n\n### 2. Deploy to Vercel\n1. Go to [vercel.com](https://vercel.com)\n2. Import your GitHub repository\n3. Vercel will automatically detect the settings from `vercel.json`\n4. Add your environment variables in the project settings\n5. Deploy!\n\n### 3. Post-Deployment\n- Your API will be available at: `https://your-domain.vercel.app/api/*`\n- Your frontend will be at: `https://your-domain.vercel.app`\n\n## Build Output\n\nThe production build generates:\n- `dist/index.html` - Main HTML file\n- `dist/assets/` - All CSS, JS, and image assets\n- Total bundle size: ~981 KB JS, ~86 KB CSS\n\n## Database Setup\n\nThe application uses PostgreSQL (Neon). Make sure you:\n1. Have a Neon database created\n2. Set the `DATABASE_URL` environment variable in Vercel\n3. Run migrations if needed (the schema is already in your code)\n\n## Testing Locally\n\nBefore deploying, you can test the production build locally:\n```bash\nnpm run build\n# Serve the dist folder with any static server\n```\n\n## Notes\n\n- The `api/` directory contains all serverless functions\n- The `server` symlink allows local development to work\n- SQLite files (pili_jobs.db) are not used in production\n- All API routes are handled through the serverless function\n\n## Support\n\nIf you encounter any issues during deployment:\n1. Check Vercel build logs for errors\n2. Verify all environment variables are set\n3. Ensure your database is accessible from Vercel's network\n\n---\n\n**Status**: ✅ Ready to deploy!\n","path":null,"size_bytes":3156,"size_tokens":null}},"version":2}